import{u as O,c as dt,V as rt,e as d,s as b,E as _,p as f,l as H,i as E,a as G,b as Wt,S as yt,f as Pt,t as ut,d as ba,D as U,w as ya,o as A,g as ae,h as Vs,j as ne,k as y,m as re,n as Ut,q as va,r as Os,v as st,x as $a,y as wa,z as Ta,A as ka,B as Ne,C as ht,F as M,G as oe,H as Sa,I as ct,J as Ct,K as Fe,L as k,M as C,N as B,O as J,P as Be,Q as Nt,R as T,T as He,U as $,W as Rs,X as xa,Y as Pa,Z as Ns,_ as Ca,$ as Ge,a0 as le,a1 as h,a2 as Ea,a3 as de,a4 as ue,a5 as Aa,a6 as Ma,a7 as La,a8 as Da,a9 as Fs,aa as Et,ab as ce,ac as qa,ad as Bs,ae as _a,af as Ia,ag as tt,ah as Va,ai as Oa,aj as Ft,ak as Ra,al as Na,am as Fa}from"./vidstack-B8Kcr51E.js";import{c as Hs,I as Gs,a as Ba,b as Ha,d as Ga,e as Ka,i as Qa,f as Wa,g as Ua,h as za,j as ja,k as he,l as Ks,m as pe,n as Ya}from"./vidstack-Cv36beFn.js";import{T as me,g as At,a as Qs,u as Xa}from"./vidstack-BwI5J5m1.js";import{i as z,T as j,a as fe,w as zt,b as Ja,c as Za}from"./vidstack-DzQr9irW.js";import{L}from"./vidstack-C_AxqLKV.js";import{Q as ot}from"./vidstack-DRH_1tFW.js";import{c as Ke,a as pt}from"./vidstack-BfBBPhXV.js";import{p as jt,g as ge,a as Ws,b as Us}from"./vidstack-BT950sWn.js";import{c as Qe,r as K,g as tn}from"./vidstack-Bxv1Qnxe.js";import"https://cdn.vidstack.io/icons";const We=Symbol(0),en=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"],zs=dt();function g(){return O(zs)}function F(){return g().$state}function sn(i){return i instanceof HTMLAudioElement}function an(i){return i instanceof HTMLVideoElement}function nn(i){return sn(i)||an(i)}class Mt extends rt{}const rn={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},Yt=new Set(["Shift","Alt","Meta","Ctrl"]),on='button, [role="button"]',js='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';class ln extends Mt{#t;constructor(t){super(),this.#t=t}onConnect(){d(this.#e.bind(this))}#e(){const{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;const s=e()==="player"?this.el:document,a=b(!1);s===this.el?new _(this.el).add("focusin",()=>a.set(!0)).add("focusout",n=>{this.el.contains(n.target)||a.set(!1)}):(f(a)||a.set(document.querySelector("[data-media-player]")===this.el),H(document,"focusin",n=>{const r=n.composedPath().find(o=>o instanceof Element&&o.localName==="media-player");r!==void 0&&a.set(this.el===r)})),d(()=>{a()&&new _(s).add("keyup",this.#s.bind(this)).add("keydown",this.#i.bind(this)).add("keydown",this.#a.bind(this),{capture:!0})})}#s(t){const e=document.activeElement;if(!t.key||!this.$state.canSeek()||e?.matches(js))return;let{method:s,value:a}=this.#n(t);if(!E(a)&&!G(a)){a?.onKeyUp?.({event:t,player:this.#t.player,remote:this.#t.remote}),a?.callback?.(t,this.#t.remote);return}s?.startsWith("seek")&&(t.preventDefault(),t.stopPropagation(),this.#l?(this.#u(t,s==="seekForward"),this.#l=null):(this.#t.remote.seek(this.#r,t),this.#r=void 0)),s?.startsWith("volume")&&this.el.querySelector("[data-media-volume-slider]")?.dispatchEvent(new KeyboardEvent("keyup",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}#i(t){if(!t.key||Yt.has(t.key))return;const e=document.activeElement;if(e?.matches(js)||Wt(t)&&e?.matches(on))return;let{method:s,value:a}=this.#n(t),n=!t.metaKey&&/^[0-9]$/.test(t.key);if(!E(a)&&!G(a)&&!n){a?.onKeyDown?.({event:t,player:this.#t.player,remote:this.#t.remote}),a?.callback?.(t,this.#t.remote);return}if(!s&&n&&!cn(t)){t.preventDefault(),t.stopPropagation(),this.#t.remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(s){switch(t.preventDefault(),t.stopPropagation(),s){case"seekForward":case"seekBackward":this.#c(t,s,s==="seekForward");break;case"volumeUp":case"volumeDown":const r=this.el.querySelector("[data-media-volume-slider]");if(r)r.dispatchEvent(new KeyboardEvent("keydown",{key:s==="volumeUp"?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{const l=t.shiftKey?.1:.05;this.#t.remote.changeVolume(this.$state.volume()+(s==="volumeUp"?+l:-l),t)}break;case"toggleFullscreen":this.#t.remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":const o=this.$state.playbackRate();this.#t.remote.changePlaybackRate(Math.max(.25,Math.min(2,o+(s==="speedUp"?.25:-.25))),t);break;default:this.#t.remote[s]?.(t)}this.$state.lastKeyboardAction.set({action:s,event:t})}}#a(t){nn(t.target)&&this.#n(t).method&&t.preventDefault()}#n(t){const e={...this.$props.keyShortcuts(),...this.#t.ariaKeys},s=Object.keys(e).find(a=>{const n=e[a],r=G(n)?n.join(" "):E(n)?n:n?.keys;return(G(r)?r:r?.split(" "))?.map(l=>un(l).replace(/Control/g,"Ctrl").split("+"))?.some(l=>{const u=new Set(l.filter(c=>Yt.has(c)));for(const c of Yt){const m=c.toLowerCase()+"Key";if(!u.has(c)&&t[m])return!1}return l.every(c=>Yt.has(c)?t[c.toLowerCase()+"Key"]:t.key===c.replace("Space"," "))})});return{method:s,value:s?e[s]:null}}#r;#o(t,e){const s=t.shiftKey?10:5;return this.#r=Math.max(0,Math.min((this.#r??this.$state.currentTime())+(e==="seekForward"?+s:-s),this.$state.duration()))}#l=null;#u(t,e){this.#l?.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}#c(t,e,s){this.$state.canSeek()&&(this.#l||(this.#l=this.el.querySelector("[data-media-time-slider]")),this.#l?this.#u(t,s):this.#t.remote.seeking(this.#o(t,e),t))}}const dn=["!","@","#","$","%","^","&","*","(",")"];function un(i){return i.replace(/Shift\+(\d)/g,(t,e)=>dn[e-1])}function cn(i){for(const t of Yt)if(i[t.toLowerCase()+"Key"])return!0;return!1}const hn={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:rn,storage:null},Ys=new yt({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new me,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:Hs(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return Gs&&this.mediaType==="video"&&(!this.playsInline||!Pt.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new me,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new me,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(z).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.inferredViewType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){const i=Qs(this.buffered)??0;return Math.max(i,this.clipStartTime)},get bufferedEnd(){const i=At(this.buffered)??0;return Math.min(this.seekableEnd,Math.max(0,i-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);const i=Qs(this.seekable)??0;return Math.max(i,this.clipStartTime)},get seekableEnd(){if(this.providedDuration>0)return this.providedDuration;const i=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?At(this.seekable)??1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,i):i},get seekableWindow(){const i=this.seekableEnd-this.seekableStart;return isNaN(i)?1/0:Math.max(0,i)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return this.remotePlaybackType==="airplay"&&this.remotePlaybackState==="connected"},get isGoogleCastConnected(){return this.remotePlaybackType==="google-cast"&&this.remotePlaybackState==="connected"},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),Xs=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),pn=new Set([...Xs,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function Js(i,t=!1){const e=t?Xs:pn;Ys.reset(i,s=>e.has(s)),ut()}function Zs(i,t){const e=i+t.clipStartTime(),s=Math.floor(i)===Math.floor(t.seekableStart()),a=Math.floor(e)===Math.floor(t.seekableEnd());return s?t.seekableStart():a?t.seekableEnd():t.isLiveDVR()&&t.liveDVRWindow()>0&&e<t.seekableEnd()-t.liveDVRWindow()?t.bufferedStart():Math.min(Math.max(t.seekableStart()+.1,e),t.seekableEnd()-.1)}class ti extends ba{items=[];[L.readonly]=!1;get length(){return this.items.length}get readonly(){return this[L.readonly]}indexOf(t){return this.items.indexOf(t)}getById(t){return t===""?null:this.items.find(e=>e.id===t)??null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[L.add](t,e){const s=this.items.length;""+s in this||Object.defineProperty(this,s,{get(){return this.items[s]}}),!this.items.includes(t)&&(this.items.push(t),this.dispatchEvent(new U("add",{detail:t,trigger:e})))}[L.remove](t,e){const s=this.items.indexOf(t);s>=0&&(this[L.onRemove]?.(t,e),this.items.splice(s,1),this.dispatchEvent(new U("remove",{detail:t,trigger:e})))}[L.reset](t){for(const e of[...this.items])this[L.remove](e,t);this.items=[],this[L.setReadonly](!1,t),this[L.onReset]?.()}[L.setReadonly](t,e){this[L.readonly]!==t&&(this[L.readonly]=t,this.dispatchEvent(new U("readonly-change",{detail:t,trigger:e})))}}const Xt=Symbol(0);class ei extends ti{get selected(){return this.items.find(t=>t.selected)??null}get selectedIndex(){return this.items.findIndex(t=>t.selected)}[L.onRemove](t,e){this[L.select](t,!1,e)}[L.add](t,e){t[Xt]=!1,Object.defineProperty(t,"selected",{get(){return this[Xt]},set:s=>{this.readonly||(this[L.onUserSelect]?.(),this[L.select](t,s))}}),super[L.add](t,e)}[L.select](t,e,s){if(e===t?.[Xt])return;const a=this.selected;t&&(t[Xt]=e),(e?a!==t:a===t)&&(a&&(a[Xt]=!1),this.dispatchEvent(new U("change",{detail:{prev:a,current:this.selected},trigger:s})))}}class mn extends ei{#t=!1;switch="current";get auto(){return this.#t||this.readonly}[ot.enableAuto];[L.onUserSelect](){this[ot.setAuto](!1)}[L.onReset](t){this[ot.enableAuto]=void 0,this[ot.setAuto](!1,t)}autoSelect(t){this.readonly||this.#t||!this[ot.enableAuto]||(this[ot.enableAuto]?.(t),this[ot.setAuto](!0,t))}getBySrc(t){return this.items.find(e=>e.src===t)}[ot.setAuto](t,e){this.#t!==t&&(this.#t=t,this.dispatchEvent(new U("auto-change",{detail:t,trigger:e})))}}class si extends Mt{#t;#e;constructor(t,e){super(),this.#t=t,this.#e=e}async onAttach(t){const e=this.$props[this.#t]();if(e==="eager")requestAnimationFrame(this.#e);else if(e==="idle")ya(this.#e);else if(e==="visible"){let s,a=new IntersectionObserver(n=>{this.scope&&n[0].isIntersecting&&(s?.(),s=void 0,this.#e())});a.observe(t),s=A(()=>a.disconnect())}}}class fn{#t;#e;constructor(t,e){this.#t=t,this.#e=e}notify(t,...e){this.#t(new U(t,{detail:e?.[0],trigger:e?.[1]}))}async ready(t,e){return ae(async()=>{const{logger:s}=this.#e,{autoPlay:a,canPlay:n,started:r,duration:o,seekable:l,buffered:u,remotePlaybackInfo:c,playsInline:m,savedState:v,source:w}=this.#e.$state;if(n())return;const P={duration:t?.duration??o(),seekable:t?.seekable??l(),buffered:t?.buffered??u(),provider:this.#e.$provider()};this.notify("can-play",P,e),ut();let I=this.#e.$provider(),{storage:q,qualities:Z}=this.#e,{muted:Vt,volume:kt,clipStartTime:nt,playbackRate:St}=this.#e.$props;await q?.onLoad?.(w());const xt=v()?.currentTime,Re=v()?.paused,Ot=await q?.getTime(),qs=xt??Ot??nt(),ga=Re===!1||Re!==!0&&!r()&&a();if(I){I.setVolume(await q?.getVolume()??kt()),I.setMuted(Vt()||!!await q?.getMuted());const Rt=await q?.getAudioGain()??1;Rt>1&&I.audioGain?.setGain?.(Rt),I.setPlaybackRate?.(await q?.getPlaybackRate()??St()),I.setPlaysInline?.(m()),qs>0&&I.setCurrentTime(qs)}const Qt=await q?.getVideoQuality();if(Qt&&Z.length){let Rt=null,_s=1/0;for(const ie of Z){const Is=Math.abs(Qt.width-ie.width)+Math.abs(Qt.height-ie.height)+(Qt.bitrate?Math.abs(Qt.bitrate-(ie.bitrate??0)):0);Is<_s&&(Rt=ie,_s=Is)}Rt&&(Rt.selected=!0)}n()&&ga?await this.#s(e):Ot&&Ot>0&&this.notify("started",void 0,e),c.set(null)})}async#s(t){const{player:e,$state:{autoPlaying:s,muted:a}}=this.#e;s.set(!0);const n=new U("auto-play-attempt",{trigger:t});try{await e.play(n)}catch{}}}const Ue=Pt.fullscreenEnabled;class gn extends rt{#t=!1;#e=!1;get active(){return this.#e}get supported(){return Ue}onConnect(){new _(Pt).add("fullscreenchange",this.#i.bind(this)).add("fullscreenerror",this.#a.bind(this)),A(this.#s.bind(this))}async#s(){Ue&&await this.exit()}#i(t){const e=ze(this.el);e!==this.#e&&(e||(this.#t=!1),this.#e=e,this.dispatch("fullscreen-change",{detail:e,trigger:t}))}#a(t){this.#t&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),this.#t=!1)}async enter(){try{return this.#t=!0,!this.el||ze(this.el)?void 0:(ii(),Pt.requestFullscreen(this.el))}catch(t){throw this.#t=!1,t}}async exit(){if(!(!this.el||!ze(this.el)))return ii(),Pt.exitFullscreen()}}function ze(i){if(Pt.fullscreenElement===i)return!0;try{return i.matches(Pt.fullscreenPseudoClass)}catch{return!1}}function ii(){if(!Ue)throw Error("[vidstack] no fullscreen API")}class Oe extends rt{#t=b(this.#r());#e=b(!1);#s;get type(){return this.#t()}get locked(){return this.#e()}get portrait(){return this.#t().startsWith("portrait")}get landscape(){return this.#t().startsWith("landscape")}static supported=Hs();get supported(){return Oe.supported}onConnect(){if(this.supported)H(screen.orientation,"change",this.#a.bind(this));else{const t=window.matchMedia("(orientation: landscape)");t.onchange=this.#a.bind(this),A(()=>t.onchange=null)}A(this.#i.bind(this))}async#i(){this.supported&&this.#e()&&await this.unlock()}#a(t){this.#t.set(this.#r()),this.dispatch("orientation-change",{detail:{orientation:f(this.#t),lock:this.#s},trigger:t})}async lock(t){f(this.#e)||this.#s===t||(this.#n(),await screen.orientation.lock(t),this.#e.set(!0),this.#s=t)}async unlock(){f(this.#e)&&(this.#n(),this.#s=void 0,await screen.orientation.unlock(),this.#e.set(!1))}#n(){if(!this.supported)throw Error("[vidstack] no orientation API")}#r(){return this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}}class bn{#t=new Map;enqueue(t,e){this.#t.set(t,e)}serve(t){const e=this.peek(t);return this.#t.delete(t),e}peek(t){return this.#t.get(t)}delete(t){this.#t.delete(t)}clear(){this.#t.clear()}}class ai{#t=!1;#e=Vs();#s=new Map;get size(){return this.#s.size}get isServing(){return this.#t}async waitForFlush(){this.#t||await this.#e.promise}enqueue(t,e){if(this.#t){e();return}this.#s.delete(t),this.#s.set(t,e)}serve(t){this.#s.get(t)?.(),this.#s.delete(t)}start(){this.#i(),this.#t=!0,this.#s.size>0&&this.#i()}stop(){this.#t=!1}reset(){this.stop(),this.#s.clear(),this.#a()}#i(){for(const t of this.#s.keys())this.serve(t);this.#a()}#a(){this.#e.resolve(),this.#e=Vs()}}function ni(i,t){const e=t.composedPath()[0];return Os(e)&&i.contains(e)}const je=new Set;{let i=function(){for(const t of je)try{t()}catch{}window.requestAnimationFrame(i)};i()}function yn(i){return je.add(i),()=>je.delete(i)}function D(i,t,e){i.hasAttribute(t)||i.setAttribute(t,e)}function vt(i,t){if(i.hasAttribute("aria-label")||i.hasAttribute("data-no-label"))return;if(!ne(t)){y(i,"aria-label",t);return}function e(){y(i,"aria-label",t())}d(e)}function ri(i){const t=getComputedStyle(i);return t.display!=="none"&&parseInt(t.opacity)>0}function vn(i){return!!i&&("checkVisibility"in i?i.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):ri(i))}function oi(i,t){return yn(()=>t(vn(i)))}function li(i,t,e){for(;t;){if(t===i)return!0;if(e?.(t))break;t=t.parentElement}return!1}function $t(i,t){return new _(i).add("pointerup",e=>{e.button===0&&!e.defaultPrevented&&t(e)}).add("keydown",e=>{Wt(e)&&t(e)})}function Ye(i){return re(i)&&(i.touches.length>1||i.changedTouches.length>1)}function mt(i){let t=va(),e=window.requestAnimationFrame(()=>{Ut(i,t),e=-1});return()=>void window.cancelAnimationFrame(e)}function Xe(i,t,e){let s,a=i,n=i.parentElement,r=i.content.firstElementChild,o=[];!r&&i.firstElementChild&&(i.innerHTML=i.firstElementChild.outerHTML,i.firstElementChild.remove(),r=i.content.firstElementChild);for(let l=0;l<t;l++)s=document.importNode(r,!0),e?.(s,l),n.insertBefore(s,a.nextSibling),o.push(s),a=s;return A(()=>{for(let l=0;l<o.length;l++)o[l].remove()}),o}function Je(i){const t=document.createElement("template");return t.innerHTML=i,t.content}function Ze(i){return i.cloneNode(!0).firstElementChild}function di(i,t,e,{offsetVarName:s,xOffset:a,yOffset:n,...r}){if(!i)return;const o=e.replace(" ","-").replace("-center","");if(st(i,"visibility",t?null:"hidden"),!t)return;let l=e.includes("top");const u=m=>e.includes("left")?`calc(-1 * ${m})`:m,c=m=>l?`calc(-1 * ${m})`:m;return $a(t,i,()=>{wa(t,i,{placement:o,middleware:[...r.middleware??[],Ta({fallbackAxisSideDirection:"start",crossAxis:!1}),ka()],...r}).then(({x:m,y:v,middlewareData:w})=>{const P=!!w.flip?.index;l=e.includes(P?"bottom":"top"),i.setAttribute("data-placement",P?e.startsWith("top")?e.replace("top","bottom"):e.replace("bottom","top"):e),Object.assign(i.style,{top:`calc(${v+"px"} + ${c(n?n+"px":`var(--${s}-y-offset, 0px)`)})`,left:`calc(${m+"px"} + ${u(a?a+"px":`var(--${s}-x-offset, 0px)`)})`})})})}function $n(i){return getComputedStyle(i).animationName!=="none"}function wn(i){const t=document.createElement("slot");return t.name=i,t}function Tn(i){const t=b(!1);return d(()=>{const e=i();e&&new _(e).add("transitionstart",()=>t.set(!0)).add("transitionend",()=>t.set(!1))}),t}function ui(i,t){function e(){const s=i();if(!s)return;t();const a=new ResizeObserver(ht(t));return a.observe(s),()=>a.disconnect()}d(e)}function kn(i){const t=Sn(i),e=xn(i);let s=!1;return M(()=>{const a=t();return s&&!a?!1:(s=a,a||e())})}function Sn(i){const t=b(!1);return d(()=>{const e=i();if(!e){t.set(!1);return}new _(e).add("mouseenter",()=>t.set(!0)).add("mouseleave",()=>t.set(!1))}),t}function xn(i){const t=b(!1);return d(()=>{const e=i();if(!e){t.set(!1);return}new _(e).add("focusin",()=>t.set(!0)).add("focusout",()=>t.set(!1))}),t}function wt(i){return i instanceof HTMLElement}function Pn(){const i=b("dark"),t=window.matchMedia("(prefers-color-scheme: light)");function e(){i.set(t.matches?"light":"dark")}return e(),H(t,"change",e),i}function ci(i,t){d(()=>{const s=t();if(s==="system"){const a=Pn();d(()=>e(a()));return}e(s)});function e(s){Ne(i,"light",s==="light"),Ne(i,"dark",s==="dark")}}class Cn extends Mt{#t=-2;#e=!1;#s=b(!1);#i=b(!1);#a=null;#n=b(!0);defaultDelay=2e3;get canIdle(){return this.#n()}set canIdle(t){this.#n.set(t)}get hideOnMouseLeave(){const{hideControlsOnMouseLeave:t}=this.$props;return this.#s()||t()}set hideOnMouseLeave(t){this.#s.set(t)}get showing(){return this.$state.controlsVisible()}show(t=0,e){this.#m(),this.#e||this.#g(!0,t,e)}hide(t=this.defaultDelay,e){this.#m(),this.#e||this.#g(!1,t,e)}pause(t){this.#e=!0,this.#m(),this.#g(!0,0,t)}resume(t){this.#e=!1,!this.$state.paused()&&this.#g(!1,this.defaultDelay,t)}onConnect(){d(this.#r.bind(this))}#r(){const{viewType:t}=this.$state;if(!this.el||!this.#n())return;if(t()==="audio"){this.show();return}d(this.#o.bind(this)),d(this.#l.bind(this));const e=this.#u.bind(this),s=this.#c.bind(this),a=this.#h.bind(this);new _(this.el).add("can-play",n=>this.show(0,n)).add("play",e).add("pause",s).add("end",a).add("auto-play-fail",s)}#o(){if(!this.el)return;const{started:t,pointer:e,paused:s}=this.$state;if(!t()||e()!=="fine")return;const a=new _(this.el),n=this.hideOnMouseLeave;(!n||!this.#i())&&d(()=>{s()||a.add("pointermove",this.#b.bind(this))}),n&&a.add("mouseenter",this.#d.bind(this)).add("mouseleave",this.#p.bind(this))}#l(){const{paused:t,started:e,autoPlayError:s}=this.$state;if(t()||s()&&!e())return;const a=this.#b.bind(this);d(()=>{if(!this.el)return;const n=this.$state.pointer(),r=n==="coarse",o=new _(this.el),l=[r?"touchend":"pointerup","keydown"];for(const u of l)o.add(u,a,{passive:!1})})}#u(t){t.triggers.hasType("ended")||(this.show(0,t),this.hide(void 0,t))}#c(t){this.show(0,t)}#h(t){const{loop:e}=this.$state;e()&&this.hide(0,t)}#d(t){this.#i.set(!1),this.show(0,t),this.hide(void 0,t)}#p(t){this.#i.set(!0),this.hide(0,t)}#m(){window.clearTimeout(this.#t),this.#t=-1}#b(t){t.MEDIA_GESTURE||this.#e||Ye(t)||(oe(t)&&(t.key==="Escape"?(this.el?.focus(),this.#a=null):this.#a&&(t.preventDefault(),requestAnimationFrame(()=>{this.#a?.focus(),this.#a=null}))),this.show(0,t),this.hide(this.defaultDelay,t))}#g(t,e,s){if(e===0){this.#y(t,s);return}this.#t=window.setTimeout(()=>{this.scope&&this.#y(t&&!this.#e,s)},e)}#y(t,e){this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&this.el?.contains(document.activeElement)&&(this.#a=document.activeElement,requestAnimationFrame(()=>{this.el?.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))}}function En(i){return i?"true":"false"}function W(i){return()=>En(i())}function An(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}class Mn extends Mt{#t;#e;#s;controls;#i;#a;#n;#r=new ai;constructor(t,e,s){super(),this.#t=t,this.#e=e,this.#s=s,this.#n=s.$provider,this.controls=new Cn,this.#i=new gn,this.#a=new Oe}onAttach(){this.listen("fullscreen-change",this.#x.bind(this))}onConnect(t){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),s=new _(t),a=this.#u.bind(this);for(const n of e)n.startsWith("media-")&&s.add(n,a);this.#o(),d(this.#l.bind(this)),d(this.#m.bind(this)),d(this.#b.bind(this)),d(this.#g.bind(this)),d(this.#y.bind(this)),d(this.#$.bind(this)),d(this.#w.bind(this))}onDestroy(){try{const t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:s}=this.$state;s()&&this.exitFullscreen("prefer-media",t),e()&&this.exitPictureInPicture(t)}catch{}this.#r.reset()}#o(){const{load:t}=this.$props,{canLoad:e}=this.$state;if(t()!=="play"||e())return;const s=this.listen("media-play-request",a=>{this.#c(a),s()})}#l(){const t=this.#n(),e=this.$state.canPlay();return t&&e&&this.#r.start(),()=>{this.#r.stop()}}#u(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&(f(this.#n)?this[t.type](t):this.#r.enqueue(t.type,()=>{f(this.#n)&&this[t.type](t)}))}async play(t){const{canPlay:e,paused:s,autoPlaying:a}=this.$state;if(this.#c(t)||!f(s))return;t&&this.#e.queue.enqueue("media-play-request",t);const n=f(a);try{const r=f(this.#n);return ts(r,f(e)),Ln(n),await r.play()}catch(r){const o=this.createEvent("play-fail",{detail:Ke(r),trigger:t});throw o.autoPlay=n,this.#t.handle(o),r}}#c(t){const{load:e}=this.$props,{canLoad:s}=this.$state;if(e()==="play"&&!s()){const a=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(a),this.#r.enqueue("media-play-request",async()=>{try{await this.play(a)}catch{}}),!0}return!1}async pause(t){const{canPlay:e,paused:s}=this.$state;if(!f(s)){t&&this.#e.queue.enqueue("media-pause-request",t);try{const a=f(this.#n);return ts(a,f(e)),await a.pause()}catch(a){throw this.#e.queue.delete("media-pause-request"),a}}}setAudioGain(t,e){const{audioGain:s,canSetAudioGain:a}=this.$state;if(s()===t)return;const n=this.#n();if(!n?.audioGain||!a())throw Error("[vidstack] audio gain api not available");e&&this.#e.queue.enqueue("media-audio-gain-change-request",e),n.audioGain.setGain(t)}seekToLiveEdge(t){const{canPlay:e,live:s,liveEdge:a,canSeek:n,liveSyncPosition:r,seekableEnd:o,userBehindLiveEdge:l}=this.$state;if(l.set(!1),f(()=>!s()||a()||!n()))return;const u=f(this.#n);ts(u,f(e)),t&&this.#e.queue.enqueue("media-seek-request",t);const c=o()-2;u.setCurrentTime(Math.min(c,r()??c))}#h=!1;async enterFullscreen(t="prefer-media",e){const s=this.#d(t);if(hi(t,s),!s.active)return f(this.$state.pictureInPicture)&&(this.#h=!0,await this.exitPictureInPicture(e)),e&&this.#e.queue.enqueue("media-enter-fullscreen-request",e),s.enter()}async exitFullscreen(t="prefer-media",e){const s=this.#d(t);if(hi(t,s),!!s.active){e&&this.#e.queue.enqueue("media-exit-fullscreen-request",e);try{const a=await s.exit();return this.#h&&f(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),a}finally{this.#h=!1}}}#d(t){const e=f(this.#n);return t==="prefer-media"&&this.#i.supported||t==="media"?this.#i:e?.fullscreen}async enterPictureInPicture(t){if(this.#p(),!this.$state.pictureInPicture())return t&&this.#e.queue.enqueue("media-enter-pip-request",t),await this.#n().pictureInPicture.enter()}async exitPictureInPicture(t){if(this.#p(),!!this.$state.pictureInPicture())return t&&this.#e.queue.enqueue("media-exit-pip-request",t),await this.#n().pictureInPicture.exit()}#p(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}#m(){this.controls.defaultDelay=this.$props.controlsDelay()}#b(){const{canSetAudioGain:t}=this.$state,e=!!this.#n()?.audioGain?.supported;t.set(e)}#g(){const{canAirPlay:t}=this.$state,e=!!this.#n()?.airPlay?.supported;t.set(e)}#y(){const{canGoogleCast:t,source:e}=this.$state,s=Ba&&!Ha&&Ga(e());t.set(s)}#$(){const{canFullscreen:t}=this.$state,e=this.#i.supported||!!this.#n()?.fullscreen?.supported;t.set(e)}#w(){const{canPictureInPicture:t}=this.$state,e=!!this.#n()?.pictureInPicture?.supported;t.set(e)}async"media-airplay-request"(t){try{await this.requestAirPlay(t)}catch{}}async requestAirPlay(t){try{const e=this.#n()?.airPlay;if(!e?.supported)throw Error("No AirPlay adapter.");return t&&this.#e.queue.enqueue("media-airplay-request",t),await e.prompt()}catch(e){throw this.#e.queue.delete("media-airplay-request"),e}}async"media-google-cast-request"(t){try{await this.requestGoogleCast(t)}catch{}}#v;async requestGoogleCast(t){try{const{canGoogleCast:e}=this.$state;if(!f(e)){const a=Error("Cast not available.");throw a.code="CAST_NOT_AVAILABLE",a}if(jt("https://www.gstatic.com"),!this.#v){const a=await import("./vidstack-vQGhjoak.js");this.#v=new a.GoogleCastLoader}await this.#v.prompt(this.#s),t&&this.#e.queue.enqueue("media-google-cast-request",t);const s=f(this.$state.remotePlaybackState)!=="disconnected";s&&this.$state.savedState.set({paused:f(this.$state.paused),currentTime:f(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(s?this.#v:null)}catch(e){throw this.#e.queue.delete("media-google-cast-request"),e}}"media-clip-start-change-request"(t){const{clipStartTime:e}=this.$state;e.set(t.detail)}"media-clip-end-change-request"(t){const{clipEndTime:e}=this.$state;e.set(t.detail),this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-duration-change-request"(t){const{providedDuration:e,clipEndTime:s}=this.$state;e.set(t.detail),s()<=0&&this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-audio-track-change-request"(t){const{logger:e,audioTracks:s}=this.#s;if(s.readonly)return;const a=t.detail,n=s[a];if(n){const r=t.type;this.#e.queue.enqueue(r,t),n.selected=!0}}async"media-enter-fullscreen-request"(t){try{await this.enterFullscreen(t.detail,t)}catch(e){this.#f(e,t)}}async"media-exit-fullscreen-request"(t){try{await this.exitFullscreen(t.detail,t)}catch(e){this.#f(e,t)}}async#x(t){const e=f(this.$props.fullscreenOrientation),s=t.detail;if(!(Sa(e)||e==="none"||!this.#a.supported))if(s){if(this.#a.locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else this.#a.locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}#f(t,e){this.#t.handle(this.createEvent("fullscreen-error",{detail:Ke(t)}))}async"media-orientation-lock-request"(t){const e=t.type;try{this.#e.queue.enqueue(e,t),await this.#a.lock(t.detail)}catch{this.#e.queue.delete(e)}}async"media-orientation-unlock-request"(t){const e=t.type;try{this.#e.queue.enqueue(e,t),await this.#a.unlock()}catch{this.#e.queue.delete(e)}}async"media-enter-pip-request"(t){try{await this.enterPictureInPicture(t)}catch(e){this.#T(e,t)}}async"media-exit-pip-request"(t){try{await this.exitPictureInPicture(t)}catch(e){this.#T(e,t)}}#T(t,e){this.#t.handle(this.createEvent("picture-in-picture-error",{detail:Ke(t)}))}"media-live-edge-request"(t){const{live:e,liveEdge:s,canSeek:a}=this.$state;if(!(!e()||s()||!a())){this.#e.queue.enqueue("media-seek-request",t);try{this.seekToLiveEdge()}catch{this.#e.queue.delete("media-seek-request")}}}async"media-loop-request"(t){try{this.#e.looping=!0,this.#e.replaying=!0,await this.play(t)}catch{this.#e.looping=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async"media-pause-request"(t){if(!this.$state.paused())try{await this.pause(t)}catch{}}async"media-play-request"(t){if(this.$state.paused())try{await this.play(t)}catch{}}"media-rate-change-request"(t){const{playbackRate:e,canSetPlaybackRate:s}=this.$state;if(e()===t.detail||!s())return;const a=this.#n();a?.setPlaybackRate&&(this.#e.queue.enqueue("media-rate-change-request",t),a.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.setAudioGain(t.detail,t)}catch{}}"media-quality-change-request"(t){const{qualities:e,storage:s,logger:a}=this.#s;if(e.readonly)return;this.#e.queue.enqueue("media-quality-change-request",t);const n=t.detail;if(n<0)e.autoSelect(t),t.isOriginTrusted&&s?.setVideoQuality?.(null);else{const r=e[n];r&&(r.selected=!0,t.isOriginTrusted&&s?.setVideoQuality?.({id:r.id,width:r.width,height:r.height,bitrate:r.bitrate}))}}"media-pause-controls-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.controls.pause(t)}"media-resume-controls-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.controls.resume(t)}"media-seek-request"(t){const{canSeek:e,ended:s,live:a,seekableEnd:n,userBehindLiveEdge:r}=this.$state,o=t.detail;s()&&(this.#e.replaying=!0);const l=t.type;this.#e.seeking=!1,this.#e.queue.delete(l);const u=Zs(o,this.$state);!Number.isFinite(u)||!e()||(this.#e.queue.enqueue(l,t),this.#n().setCurrentTime(u),a()&&t.isOriginTrusted&&Math.abs(n()-u)>=2&&r.set(!0))}"media-seeking-request"(t){const e=t.type;this.#e.queue.enqueue(e,t),this.$state.seeking.set(!0),this.#e.seeking=!0}"media-start-loading"(t){if(this.$state.canLoad())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#t.handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){const{index:e,mode:s}=t.detail,a=this.#s.textTracks[e];if(a){const n=t.type;this.#e.queue.enqueue(n,t),a.setMode(s,t)}}"media-mute-request"(t){if(this.$state.muted())return;const e=t.type;this.#e.queue.enqueue(e,t),this.#n().setMuted(!0)}"media-unmute-request"(t){const{muted:e,volume:s}=this.$state;if(!e())return;const a=t.type;this.#e.queue.enqueue(a,t),this.#s.$provider().setMuted(!1),s()===0&&(this.#e.queue.enqueue(a,t),this.#n().setVolume(.25))}"media-volume-change-request"(t){const{muted:e,volume:s}=this.$state,a=t.detail;if(s()===a)return;const n=t.type;this.#e.queue.enqueue(n,t),this.#n().setVolume(a),a>0&&e()&&(this.#e.queue.enqueue(n,t),this.#n().setMuted(!1))}#k(t,e,s){}}function ts(i,t){if(!(i&&t))throw Error("[vidstack] media not ready")}function hi(i,t){if(!t?.supported)throw Error("[vidstack] no fullscreen support")}function Ln(i){if(!(!An()||!i))throw Error("[vidstack] autoplay blocked")}class Dn{seeking=!1;looping=!1;replaying=!1;queue=new bn}function es(i){return!E(i)&&"width"in i&&"height"in i&&ct(i.width)&&ct(i.height)}const qn=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);class _n extends Mt{#t;#e;#s=new Map;#i=!1;#a=[];#n=[-1,-1];#r=!1;#o;constructor(t,e){super(),this.#t=t,this.#e=e}onAttach(t){t.setAttribute("aria-busy","true"),new _(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(t){d(this.#E.bind(this)),this.#p(),this.#m(),this.#b(),this.#u(),A(this.#c.bind(this))}onDestroy(){const{audioTracks:t,qualities:e,textTracks:s}=this.#e;t[L.reset](),e[L.reset](),s[L.reset](),this.#S()}handle(t){if(!this.scope)return;const e=t.type;ae(()=>this[t.type]?.(t)),qn.has(e)&&this.#s.set(e,t),this.dispatch(t)}#l=!1;#u(){this.#l&&(requestAnimationFrame(()=>{this.scope&&this.#e.remote.play(new U("dom-connect"))}),this.#l=!1)}#c(){this.#l||(this.#l=!this.$state.paused(),this.#e.$provider()?.pause())}#h(){this.#I(),this.#i=!1,this.#t.replaying=!1,this.#t.looping=!1,this.#r=!1,this.#o=void 0,this.#s.clear()}#d(t,e){const s=this.#t.queue.serve(t);s&&(e.request=s,e.triggers.add(s))}#p(){this.#g(),this.#y();const t=this.#e.textTracks;new _(t).add("add",this.#g.bind(this)).add("remove",this.#g.bind(this)).add("mode-change",this.#y.bind(this))}#m(){const t=this.#e.qualities;new _(t).add("add",this.#v.bind(this)).add("remove",this.#v.bind(this)).add("change",this.#x.bind(this)).add("auto-change",this.#f.bind(this)).add("readonly-change",this.#P.bind(this))}#b(){const t=this.#e.audioTracks;new _(t).add("add",this.#$.bind(this)).add("remove",this.#$.bind(this)).add("change",this.#w.bind(this))}#g(t){const{textTracks:e}=this.$state;e.set(this.#e.textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}#y(t){t&&this.#d("media-text-track-change-request",t);const e=this.#e.textTracks.selected,{textTrack:s}=this.$state;s()!==e&&(s.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}#$(t){const{audioTracks:e}=this.$state;e.set(this.#e.audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}#w(t){const{audioTrack:e}=this.$state;e.set(this.#e.audioTracks.selected),t&&this.#d("media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}#v(t){const{qualities:e}=this.$state;e.set(this.#e.qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}#x(t){const{quality:e}=this.$state;e.set(this.#e.qualities.selected),t&&this.#d("media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}#f(){const{qualities:t}=this.#e,e=t.auto;this.$state.autoQuality.set(e),e||this.#S()}#T=null;#k(){this.#S(),this.#T=d(()=>{const{qualities:t}=this.#e,{mediaWidth:e,mediaHeight:s}=this.$state,a=e(),n=s();if(a===0||n===0)return;let r=null,o=1/0;for(const l of t){const u=Math.abs(l.width-a)+Math.abs(l.height-n);u<o&&(o=u,r=l)}r&&t[L.select](r,!0,new U("resize",{detail:{width:a,height:n}}))})}#S(){this.#T?.(),this.#T=null}#P(){this.$state.canSetQuality.set(!this.#e.qualities.readonly)}#E(){const{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e()){t.set(!1);return}Ka().then(t.set)}"provider-change"(t){const e=this.#e.$provider(),s=t.detail;e?.type!==s?.type&&(e?.destroy?.(),e?.scope?.dispose(),this.#e.$provider.set(t.detail),e&&t.detail===null&&this.#C(t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),this.#h()}"can-load"(t){this.$state.canLoad.set(!0),this.#s.set("can-load",t),this.#e.textTracks[j.canLoad](),this.#d("media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),this.#s.set("can-load-poster",t),this.#d("media-poster-start-loading",t)}"media-type-change"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const s=this.$state.viewType();this.$state.mediaType.set(t.detail);const a=this.$state.providedViewType(),n=a==="unknown"?t.detail:a;s!==n&&setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))})},0)}"stream-type-change"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const{streamType:s,inferredStreamType:a}=this.$state;a.set(t.detail),t.detail=s()}"rate-change"(t){const{storage:e}=this.#e,{canPlay:s}=this.$state;this.$state.playbackRate.set(t.detail),this.#d("media-rate-change-request",t),s()&&e?.setPlaybackRate?.(t.detail)}"remote-playback-change"(t){const{remotePlaybackState:e,remotePlaybackType:s}=this.$state,{type:a,state:n}=t.detail,r=n==="connected";s.set(a),e.set(n);const o=a==="airplay"?"media-airplay-request":"media-google-cast-request";if(r)this.#d(o,t);else{const l=this.#t.queue.peek(o);l&&(t.request=l,t.triggers.add(l))}}"sources-change"(t){const e=this.$state.sources(),s=t.detail;this.$state.sources.set(s),this.#A(e,s,t)}#A(t,e,s){let{qualities:a}=this.#e,n=!1,r=!1;for(const o of t){if(!es(o))continue;if(!e.some(u=>u.src===o.src)){const u=a.getBySrc(o.src);u&&(a[L.remove](u,s),r=!0)}}r&&!a.length&&(this.$state.savedState.set(null),a[L.reset](s));for(const o of e){if(!es(o)||a.getBySrc(o.src))continue;const l={id:o.id??o.height+"p",bitrate:null,codec:null,...o,selected:!1};a[L.add](l,s),n=!0}n&&!a[ot.enableAuto]&&(this.#k(),a[ot.enableAuto]=this.#k.bind(this),a[ot.setAuto](!0,s))}"source-change"(t){t.isQualityChange=t.originEvent?.type==="quality-change";const e=t.detail;this.#C(t,t.isQualityChange),this.#s.set(t.type,t),this.$state.source.set(e),this.el?.setAttribute("aria-busy","true")}#C(t,e=!1){const{audioTracks:s,qualities:a}=this.#e;if(!e){this.#a=[],this.#n=[-1,-1],s[L.reset](t),a[L.reset](t),Js(this.$state,e),this.#h();return}Js(this.$state,e),this.#h()}abort(t){const e=this.#s.get("source-change");e&&t.triggers.add(e);const s=this.#s.get("can-load");s&&!t.triggers.hasType("can-load")&&t.triggers.add(s)}"load-start"(t){const e=this.#s.get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);const e=this.#s.get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){const e=this.#s.get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){const e=this.#s.get("load-start");e&&t.triggers.add(e)}"can-play"(t){const e=this.#s.get("loaded-metadata");e&&t.triggers.add(e),this.#M(t.detail),this.el?.setAttribute("aria-busy","false")}"can-play-through"(t){this.#M(t.detail);const e=this.#s.get("can-play");e&&t.triggers.add(e)}#M(t){const{seekable:e,buffered:s,intrinsicDuration:a,canPlay:n}=this.$state;n.set(!0),s.set(t.buffered),e.set(t.seekable);const r=At(t.seekable)??1/0;a.set(r)}"duration-change"(t){const{live:e,intrinsicDuration:s,providedDuration:a,clipEndTime:n,ended:r}=this.$state,o=t.detail;if(!e()){const l=Number.isNaN(o)?0:o;s.set(l),r()&&this.#q(t)}(a()>0||n()>0)&&t.stopImmediatePropagation()}progress(t){const{buffered:e,seekable:s}=this.$state,{buffered:a,seekable:n}=t.detail,r=At(a),o=a.length!==e().length,l=r!==At(e()),u=At(n),c=n.length!==s().length,m=u!==At(s());(o||l)&&e.set(a),(c||m)&&s.set(n)}play(t){const{paused:e,autoPlayError:s,ended:a,autoPlaying:n,playsInline:r,pointer:o,muted:l,viewType:u,live:c,userBehindLiveEdge:m}=this.$state;if(this.#D(),!e()){t.stopImmediatePropagation();return}t.autoPlay=n();const v=this.#s.get("waiting");v&&t.triggers.add(v),this.#d("media-play-request",t),this.#s.set("play",t),e.set(!1),s.set(null),t.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:l()},trigger:t})),n.set(!1)),(a()||this.#t.replaying)&&(this.#t.replaying=!1,a.set(!1),this.handle(this.createEvent("replay",{trigger:t}))),!r()&&u()==="video"&&o()==="coarse"&&this.#e.remote.enterFullscreen("prefer-media",t),c()&&!m()&&this.#e.remote.seekToLiveEdge(t)}#D(t){if(!f(this.#e.$provider))return;const{ended:s,seekableStart:a,clipEndTime:n,currentTime:r,realCurrentTime:o,duration:l}=this.$state,u=s()||o()<a()||n()>0&&o()>=n()||Math.abs(r()-l())<.1;return u&&this.dispatch("media-seek-request",{detail:a(),trigger:t}),u}"play-fail"(t){const{muted:e,autoPlaying:s}=this.$state,a=this.#s.get("play");a&&t.triggers.add(a),this.#d("media-play-request",t);const{paused:n,playing:r}=this.$state;n.set(!0),r.set(!1),this.#h(),this.#s.set("play-fail",t),t.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),s.set(!1))}playing(t){const e=this.#s.get("play"),s=this.#s.get("seeked");e?t.triggers.add(e):s&&t.triggers.add(s),setTimeout(()=>this.#h(),0);const{paused:a,playing:n,live:r,liveSyncPosition:o,seekableEnd:l,started:u,currentTime:c,seeking:m,ended:v}=this.$state;if(a.set(!1),n.set(!0),m.set(!1),v.set(!1),this.#t.looping){this.#t.looping=!1;return}if(r()&&!u()&&c()===0){const w=o()??l()-2;Number.isFinite(w)&&this.#e.$provider().setCurrentTime(w)}this.started(t)}started(t){const{started:e}=this.$state;e()||(e.set(!0),this.handle(this.createEvent("started",{trigger:t})))}pause(t){this.el?.isConnected||(this.#l=!0),this.#d("media-pause-request",t);const e=this.#s.get("seeked");e&&t.triggers.add(e);const{paused:s,playing:a}=this.$state;s.set(!0),a.set(!1),this.#i&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:t})),this.#i=!1},0),this.#h()}"time-change"(t){if(this.#t.looping){t.stopImmediatePropagation();return}let{waiting:e,played:s,clipEndTime:a,realCurrentTime:n,currentTime:r}=this.$state,o=t.detail,l=a();n.set(o),this.#_(),e.set(!1);for(const u of this.#e.textTracks)u[j.updateActiveCues](o,t);l>0&&o>=l&&(this.#i=!0,this.dispatch("media-pause-request",{trigger:t})),this.#V(),this.dispatch("time-update",{detail:{currentTime:r(),played:s()},trigger:t})}#_(){const{currentTime:t,played:e,paused:s}=this.$state;s()||(this.#n=Xa(this.#a,this.#n,t()),e.set(new me(this.#a)))}#q(t){const{clipStartTime:e,clipEndTime:s,duration:a}=this.$state;e()>0||s()>0||this.handle(this.createEvent("time-change",{detail:a(),trigger:t}))}#V(){const{storage:t}=this.#e,{canPlay:e,realCurrentTime:s}=this.$state;e()&&t?.setTime?.(s())}"audio-gain-change"(t){const{storage:e}=this.#e,{canPlay:s,audioGain:a}=this.$state;a.set(t.detail),this.#d("media-audio-gain-change-request",t),s()&&e?.setAudioGain?.(a())}"volume-change"(t){const{storage:e}=this.#e,{volume:s,muted:a,canPlay:n}=this.$state,r=t.detail;s.set(r.volume),a.set(r.muted||r.volume===0),this.#d("media-volume-change-request",t),this.#d(r.muted?"media-mute-request":"media-unmute-request",t),n()&&(e?.setVolume?.(s()),e?.setMuted?.(a()))}seeking=Ct(t=>{const{seeking:e,realCurrentTime:s,paused:a}=this.$state;e.set(!0),s.set(t.detail),this.#d("media-seeking-request",t),a()&&(this.#o=t,this.#L()),this.#n=[-1,-1]},150,{leading:!0});seeked(t){const{seeking:e,currentTime:s,realCurrentTime:a,paused:n,seekableEnd:r,ended:o,live:l}=this.$state;if(this.#t.seeking)e.set(!0),t.stopImmediatePropagation();else if(e()){const u=this.#s.get("waiting");u&&t.triggers.add(u);const c=this.#s.get("seeking");c&&!t.triggers.has(c)&&t.triggers.add(c),n()&&this.#I(),e.set(!1),a.set(t.detail),this.#d("media-seek-request",t);const m=t?.originEvent;m?.isTrusted&&!(m instanceof MessageEvent)&&!/seek/.test(m.type)&&this.started(t)}l()||(Math.floor(s())!==Math.floor(r())?o.set(!1):this.end(t))}waiting(t){this.#r||this.#t.seeking||(t.stopImmediatePropagation(),this.#o=t,this.#L())}#L=Fe(()=>{if(!this.#o)return;this.#r=!0;const{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);const s=this.createEvent("waiting",{trigger:this.#o});this.#s.set("waiting",s),this.dispatch(s),this.#o=void 0,this.#r=!1},300);end(t){const{loop:e,ended:s}=this.$state;if(!(!e()&&s())){if(e()){setTimeout(()=>{requestAnimationFrame(()=>{this.#D(t),this.dispatch("media-loop-request",{trigger:t})})},10);return}setTimeout(()=>this.#O(t),0)}}#O(t){const{storage:e}=this.#e,{paused:s,seeking:a,ended:n,duration:r}=this.$state;this.#q(t),s()||this.dispatch("pause",{trigger:t}),a()&&this.dispatch("seeked",{detail:r(),trigger:t}),n.set(!0),this.#h(),e?.setTime?.(r(),!0),this.dispatch("ended",{trigger:t})}#I(){this.#L.cancel(),this.$state.waiting.set(!1)}"fullscreen-change"(t){const e=t.detail;this.$state.fullscreen.set(e),this.#d(e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){this.#d("media-enter-fullscreen-request",t),this.#d("media-exit-fullscreen-request",t)}"orientation-change"(t){const e=t.detail.lock;this.#d(e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){const e=t.detail;this.$state.pictureInPicture.set(e),this.#d(e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){this.#d("media-enter-pip-request",t),this.#d("media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}}class In extends Mt{onSetup(){this.#t();const t=[this.#i,this.#n,this.#d,this.#p,this.#o,this.#u,this.#c,this.#m,this.#g,this.#b,this.#r,this.#h,this.#l,this.#e,this.#a];for(const e of t)d(e.bind(this))}#t(){const t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(const s of Object.keys(this.$props))e.has(s)||this.$state[t[s]??s]?.set(this.$props[s]());this.$state.muted.set(this.$props.muted()||this.$props.volume()===0)}#e(){const{viewType:t,streamType:e,title:s,poster:a,loop:n}=this.$props,r=this.$state;r.providedPoster.set(a()),r.providedStreamType.set(e()),r.providedViewType.set(t()),r.providedTitle.set(s()),r.providedLoop.set(n())}#s(){}#i(){const{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}#a(){const{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}#n(){const t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}#r(){const t=this.$state.loop();this.dispatch("loop-change",{detail:t})}#o(){const t=this.$props.controls();this.$state.controls.set(t)}#l(){const{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}#u(){const t=this.$props.crossOrigin()??this.$props.crossorigin(),e=t===!0?"":t;this.$state.crossOrigin.set(e)}#c(){const{duration:t}=this.$props;this.dispatch("media-duration-change-request",{detail:t()})}#h(){const t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}#d(){const{clipStartTime:t}=this.$props;this.dispatch("media-clip-start-change-request",{detail:t()})}#p(){const{clipEndTime:t}=this.$props;this.dispatch("media-clip-end-change-request",{detail:t()})}#m(){this.dispatch("live-change",{detail:this.$state.live()})}#b(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}#g(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}}class Vn{playerId="vds-player";mediaId=null;#t={volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null};async getVolume(){return this.#t.volume}async setVolume(t){this.#t.volume=t,this.save()}async getMuted(){return this.#t.muted}async setMuted(t){this.#t.muted=t,this.save()}async getTime(){return this.#t.time}async setTime(t,e){const s=t<0;this.#t.time=s?null:t,s||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return this.#t.lang}async setLang(t){this.#t.lang=t,this.save()}async getCaptions(){return this.#t.captions}async setCaptions(t){this.#t.captions=t,this.save()}async getPlaybackRate(){return this.#t.rate}async setPlaybackRate(t){this.#t.rate=t,this.save()}async getAudioGain(){return this.#t.audioGain}async setAudioGain(t){this.#t.audioGain=t,this.save()}async getVideoQuality(){return this.#t.quality}async setVideoQuality(t){this.#t.quality=t,this.save()}onChange(t,e,s="vds-player"){const a=s?localStorage.getItem(s):null,n=e?localStorage.getItem(e):null;this.playerId=s,this.mediaId=e,this.#t={volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...a?JSON.parse(a):{},time:n?+n:null}}save(){if(!this.playerId)return;const t=JSON.stringify({...this.#t,time:void 0});localStorage.setItem(this.playerId,t)}saveTimeThrottled=Ct(this.saveTime.bind(this),1e3);saveTime(){if(!this.mediaId)return;const t=(this.#t.time??0).toString();localStorage.setItem(this.mediaId,t)}}const pi=["play","pause","seekforward","seekbackward","seekto"];class On extends Mt{onConnect(){d(this.#e.bind(this)),d(this.#s.bind(this));const t=this.#i.bind(this);for(const e of pi)navigator.mediaSession.setActionHandler(e,t);A(this.#t.bind(this))}#t(){for(const t of pi)navigator.mediaSession.setActionHandler(t,null)}#e(){const{title:t,artist:e,artwork:s,poster:a}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:t(),artist:e(),artwork:s()??[{src:a()}]})}#s(){const{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}#i(t){const e=new U("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":this.dispatch("media-seek-request",{detail:ct(t.seekTime)?t.seekTime:this.$state.currentTime()+(t.seekOffset??(t.action==="seekforward"?10:-10)),trigger:e});break}}}class Rn{#t=null;#e=null;#s=-1;#i;constructor(t=void 0){this.#i=t}setTarget(t){this.#t=t}getPlayer(t){return this.#e?this.#e:((t??this.#t)?.dispatchEvent(new U("find-media-player",{detail:e=>void(this.#e=e),bubbles:!0,composed:!0})),this.#e)}setPlayer(t){this.#e=t}startLoading(t){this.#a("media-start-loading",t)}startLoadingPoster(t){this.#a("media-poster-start-loading",t)}requestAirPlay(t){this.#a("media-airplay-request",t)}requestGoogleCast(t){this.#a("media-google-cast-request",t)}play(t){this.#a("media-play-request",t)}pause(t){this.#a("media-pause-request",t)}mute(t){this.#a("media-mute-request",t)}unmute(t){this.#a("media-unmute-request",t)}enterFullscreen(t,e){this.#a("media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){this.#a("media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){this.#a("media-orientation-lock-request",e,t)}unlockScreenOrientation(t){this.#a("media-orientation-unlock-request",t)}enterPictureInPicture(t){this.#a("media-enter-pip-request",t)}exitPictureInPicture(t){this.#a("media-exit-pip-request",t)}seeking(t,e){this.#a("media-seeking-request",e,t)}seek(t,e){this.#a("media-seek-request",e,t)}seekToLiveEdge(t){this.#a("media-live-edge-request",t)}changeDuration(t,e){this.#a("media-duration-change-request",e,t)}changeClipStart(t,e){this.#a("media-clip-start-change-request",e,t)}changeClipEnd(t,e){this.#a("media-clip-end-change-request",e,t)}changeVolume(t,e){this.#a("media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){this.#a("media-audio-track-change-request",e,t)}changeQuality(t,e){this.#a("media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,s){this.#a("media-text-track-change-request",s,{index:t,mode:e})}changePlaybackRate(t,e){this.#a("media-rate-change-request",e,t)}changeAudioGain(t,e){this.#a("media-audio-gain-change-request",e,t)}resumeControls(t){this.#a("media-resume-controls-request",t)}pauseControls(t){this.#a("media-pause-controls-request",t)}togglePaused(t){const e=this.getPlayer(t?.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){const e=this.getPlayer(t?.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){const e=this.getPlayer(t?.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){const s=this.getPlayer(e?.target);s&&(s.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){const e=this.getPlayer(t?.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;let s=e.state.textTracks,a=this.#s;(!s[a]||!z(s[a]))&&(a=-1),a===-1&&(a=s.findIndex(n=>z(n)&&n.default)),a===-1&&(a=s.findIndex(n=>z(n))),a>=0&&this.changeTextTrackMode(a,"showing",t),this.#s=-1}disableCaptions(t){const e=this.getPlayer(t?.target);if(!e)return;const s=e.state.textTracks,a=e.state.textTrack;if(a){const n=s.indexOf(a);this.changeTextTrackMode(n,"disabled",t),this.#s=n}}toggleCaptions(t){const e=this.getPlayer(t?.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){this.#a("media-user-loop-change-request",e,t)}#a(t,e,s){const a=new U(t,{bubbles:!0,composed:!0,cancelable:!0,detail:s,trigger:e});let n=e?.target||null;n&&n instanceof k&&(n=n.el),n=!n||n===document||n===window||n===document.body||this.#e?.el&&n instanceof Node&&!this.#e.el.contains(n)?this.#t??this.getPlayer()?.el:n??this.#t,this.#e?t==="media-play-request"&&!this.#e.state.canLoad?n?.dispatchEvent(a):this.#e.canPlayQueue.enqueue(t,()=>n?.dispatchEvent(a)):n?.dispatchEvent(a)}#n(t){}}class Nn extends ei{}class Fn{priority=0;#t=!0;#e=null;#s=null;#i=new Set;canRender(t,e){return!!e}attach(t){this.#e=t,t&&(t.textTracks.onchange=this.#o.bind(this))}addTrack(t){this.#i.add(t),this.#a(t)}removeTrack(t){t[j.native]?.remove?.(),t[j.native]=null,this.#i.delete(t)}changeTrack(t){const e=t?.[j.native];e&&e.track.mode!=="showing"&&(e.track.mode="showing"),this.#s=t}setDisplay(t){this.#t=t,this.#o()}detach(){this.#e&&(this.#e.textTracks.onchange=null);for(const t of this.#i)this.removeTrack(t);this.#i.clear(),this.#e=null,this.#s=null}#a(t){if(!this.#e)return;const e=t[j.native]??=this.#n(t);wt(e)&&(this.#e.append(e),e.track.mode=e.default?"showing":"disabled")}#n(t){const e=document.createElement("track"),s=t.default||t.mode==="showing",a=t.src&&t.type==="vtt";return e.id=t.id,e.src=a?t.src:"",e.label=t.label,e.kind=t.kind,e.default=s,t.language&&(e.srclang=t.language),s&&!a&&this.#r(t,e.track),e}#r(t,e){if(!(t.src&&t.type==="vtt"||e.cues?.length))for(const s of t.cues)e.addCue(s)}#o(t){for(const e of this.#i){const s=e[j.native];if(!s)continue;if(!this.#t){s.track.mode=s.managed?"hidden":"disabled";continue}const a=s.track.mode==="showing";a&&this.#r(e,s.track),e.setMode(a?"showing":"disabled",t)}}}class Bn{#t=null;#e;#s=[];#i;#a=!1;#n=null;#r=null;constructor(t){this.#i=t;const e=t.textTracks;this.#e=e,d(this.#o.bind(this)),A(this.#p.bind(this)),new _(e).add("add",this.#c.bind(this)).add("remove",this.#h.bind(this)).add("mode-change",this.#d.bind(this))}#o(){const{nativeControls:t}=this.#i.$state;this.#a=t(),this.#d()}add(t){this.#s.push(t),ae(this.#d.bind(this))}remove(t){t.detach(),this.#s.splice(this.#s.indexOf(t),1),ae(this.#d.bind(this))}attachVideo(t){requestAnimationFrame(()=>{if(this.#t=t,t){this.#n=new Fn,this.#n.attach(t);for(const e of this.#e)this.#l(e)}this.#d()})}#l(t){z(t)&&this.#n?.addTrack(t)}#u(t){z(t)&&this.#n?.removeTrack(t)}#c(t){this.#l(t.detail)}#h(t){this.#u(t.detail)}#d(){const t=this.#e.selected;if(this.#t&&(this.#a||t?.[j.nativeHLS])){this.#r?.changeTrack(null),this.#n?.setDisplay(!0),this.#n?.changeTrack(t);return}if(this.#n?.setDisplay(!1),this.#n?.changeTrack(null),!t){this.#r?.changeTrack(null);return}const e=this.#s.sort((s,a)=>s.priority-a.priority).find(s=>s.canRender(t,this.#t));this.#r!==e&&(this.#r?.detach(),e?.attach(this.#t),this.#r=e??null),e?.changeTrack(t)}#p(){this.#n?.detach(),this.#n=null,this.#r?.detach(),this.#r=null}}class Hn extends ti{#t=!1;#e={};#s=null;#i=null;[j.crossOrigin];constructor(){super()}get selected(){return this.items.find(e=>e.mode==="showing"&&z(e))??null}get selectedIndex(){const t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return this.#i}set preferredLang(t){this.#i=t,this.#u(t)}add(t,e){const s=t instanceof fe,a=s?t:new fe(t),n=t.kind==="captions"||t.kind==="subtitles"?"captions":t.kind;return this.#e[n]&&t.default&&delete t.default,a.addEventListener("mode-change",this.#r),this[L.add](a,e),a[j.crossOrigin]=this[j.crossOrigin],this.#t&&a[j.canLoad](),t.default&&(this.#e[n]=a),this.#a(),this}remove(t,e){if(this.#n=t,!!this.items.includes(t))return t===this.#e[t.kind]&&delete this.#e[t.kind],t.mode="disabled",t[j.onModeChange]=null,t.removeEventListener("mode-change",this.#r),this[L.remove](t,e),this.#n=null,this}clear(t){for(const e of[...this.items])this.remove(e,t);return this}getByKind(t){const e=Array.isArray(t)?t:[t];return this.items.filter(s=>e.includes(s.kind))}[j.canLoad](){if(!this.#t){for(const t of this.items)t[j.canLoad]();this.#t=!0,this.#a()}}#a=Fe(async()=>{if(!this.#t)return;!this.#i&&this.#s&&(this.#i=await this.#s.getLang());const t=await this.#s?.getCaptions(),e=[["captions","subtitles"],"chapters","descriptions","metadata"];for(const s of e){const a=this.getByKind(s);if(a.find(u=>u.mode==="showing"))continue;const n=this.#i?a.find(u=>u.language===this.#i):null,r=G(s)?this.#e[s.find(u=>this.#e[u])||""]:this.#e[s],o=n??r,l=o&&z(o);o&&(!l||t!==!1)&&(o.mode="showing",l&&this.#l(o))}},300);#n=null;#r=this.#o.bind(this);#o(t){const e=t.detail;if(this.#s&&z(e)&&e!==this.#n&&this.#l(e),e.mode==="showing"){const s=z(e)?["captions","subtitles"]:[e.kind];for(const a of this.items)a.mode==="showing"&&a!=e&&s.includes(a.kind)&&(a.mode="disabled")}this.dispatchEvent(new U("mode-change",{detail:t.detail,trigger:t}))}#l(t){t.mode!=="disabled"&&this.#u(t.language),this.#s?.setCaptions?.(t.mode==="showing")}#u(t){this.#s?.setLang?.(this.#i=t)}setStorage(t){this.#s=t}}let be=b(!1);H(document,"pointerdown",()=>{be.set(!1)}),H(document,"keydown",i=>{i.metaKey||i.altKey||i.ctrlKey||be.set(!0)});class lt extends rt{#t=b(!1);onConnect(t){d(()=>{const e=new _(t);if(!be()){this.#t.set(!1),ye(t,!1),e.add("pointerenter",this.#i.bind(this)).add("pointerleave",this.#a.bind(this));return}const s=document.activeElement===t;this.#t.set(s),ye(t,s),e.add("focus",this.#e.bind(this)).add("blur",this.#s.bind(this))})}focused(){return this.#t()}#e(){this.#t.set(!0),ye(this.el,!0)}#s(){this.#t.set(!1),ye(this.el,!1)}#i(){mi(this.el,!0)}#a(){mi(this.el,!1)}}function ye(i,t){y(i,"data-focus",t),y(i,"data-hocus",t)}function mi(i,t){y(i,"data-hocus",t),y(i,"data-hover",t)}class Kt extends k{static props=hn;static state=Ys;#t;#e;#s;canPlayQueue=new ai;remoteControl;get#i(){return this.#t.$provider()}get#a(){return this.$props}constructor(){super(),new In;const t={player:this,qualities:new mn,audioTracks:new Nn,storage:null,$provider:b(null),$providerSetup:b(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new Rn(void 0),t.remote.setPlayer(this),t.textTracks=new Hn,t.textTracks[j.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new Bn(t),t.ariaKeys={},this.#t=t,J(zs,t),this.orientation=new Oe,new lt,new ln(t);const e=new Dn;this.#e=new _n(e,t),this.#s=new Mn(this.#e,e,t),t.delegate=new fn(this.#e.handle.bind(this.#e),t),t.notify=t.delegate.notify.bind(t.delegate),typeof navigator<"u"&&"mediaSession"in navigator&&new On,new si("load",this.startLoading.bind(this)),new si("posterLoad",this.startLoadingPoster.bind(this))}onSetup(){this.#u(),d(this.#l.bind(this)),d(this.#b.bind(this)),d(this.#p.bind(this)),d(this.#w.bind(this)),d(this.#y.bind(this)),d(this.#T.bind(this)),d(this.#x.bind(this))}onAttach(t){t.setAttribute("data-media-player",""),D(t,"tabindex","0"),D(t,"role","region"),d(this.#S.bind(this)),d(this.#r.bind(this)),d(this.#o.bind(this)),H(t,"find-media-player",this.#c.bind(this))}onConnect(t){Gs&&y(t,"data-iphone","");const e=window.matchMedia("(pointer: coarse)");this.#d(e),e.onchange=this.#d.bind(this);const s=new ResizeObserver(ht(this.#h.bind(this)));s.observe(t),d(this.#h.bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),A(()=>{s.disconnect(),e.onchange=null})}onDestroy(){this.#t.player=null,this.canPlayQueue.reset()}#n=!1;#r(){const t=this.$el,{title:e,live:s,viewType:a,providedTitle:n}=this.$state,r=s(),o=Be(a()),l=o!=="Unknown"?`${r?"Live ":""}${o}`:r?"Live":"Media",u=e();y(this.el,"aria-label",`${l} Player`+(u?` - ${u}`:"")),t?.hasAttribute("title")&&(this.#n=!0,t?.removeAttribute("title"))}#o(){const t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),y(this.el,"data-orientation",t),this.#h()}#l(){this.$state.canPlay()&&this.#i?this.canPlayQueue.start():this.canPlayQueue.stop()}#u(){if(Kt[We]){this.setAttributes(Kt[We]);return}const t={"data-load":function(){return this.$props.load()},"data-captions":function(){const s=this.$state.textTrack();return!!s&&z(s)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){const{canLoad:s,canPlay:a,waiting:n}=this.$state;return s()&&(!a()||n())},"data-error":function(){const{error:s}=this.$state;return!!s()},"data-autoplay-error":function(){const{autoPlayError:s}=this.$state;return!!s()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(const s of en){const a="data-"+(e[s]??Nt(s));t[a]=function(){return this.$state[s]()}}delete t.title,Kt[We]=t,this.setAttributes(t)}#c(t){t.detail(this)}#h(){if(!this.el)return;const t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),st(this.el,"--player-width",t+"px"),st(this.el,"--player-height",e+"px")}#d(t){const e=t.matches?"coarse":"fine";y(this.el,"data-pointer",e),this.$state.pointer.set(e),this.#h()}get provider(){return this.#i}get controls(){return this.#s.controls}set controls(t){this.#a.controls.set(t)}orientation;get title(){return f(this.$state.title)}set title(t){if(this.#n){this.#n=!1;return}this.#a.title.set(t)}get qualities(){return this.#t.qualities}get audioTracks(){return this.#t.audioTracks}get textTracks(){return this.#t.textTracks}get textRenderers(){return this.#t.textRenderers}get duration(){return this.$state.duration()}set duration(t){this.#a.duration.set(t)}get paused(){return f(this.$state.paused)}set paused(t){this.#m(t)}#p(){this.#m(this.$props.paused())}#m(t){t?this.canPlayQueue.enqueue("paused",()=>this.#s.pause()):this.canPlayQueue.enqueue("paused",()=>this.#s.play())}get muted(){return f(this.$state.muted)}set muted(t){this.#g(t)}#b(){this.#g(this.$props.muted())}#g(t){this.canPlayQueue.enqueue("muted",()=>{this.#i&&this.#i.setMuted(t)})}get currentTime(){return f(this.$state.currentTime)}set currentTime(t){this.#$(t)}#y(){this.#$(this.$props.currentTime())}#$(t){this.canPlayQueue.enqueue("currentTime",()=>{const{currentTime:e}=this.$state;t!==f(e)&&f(()=>{if(!this.#i)return;const s=Zs(t,this.$state);Number.isFinite(s)&&this.#i.setCurrentTime(s)})})}get volume(){return f(this.$state.volume)}set volume(t){this.#v(t)}#w(){this.#v(this.$props.volume())}#v(t){const e=Qe(0,t,1);this.canPlayQueue.enqueue("volume",()=>{this.#i&&this.#i.setVolume(e)})}get playbackRate(){return f(this.$state.playbackRate)}set playbackRate(t){this.#f(t)}#x(){this.#f(this.$props.playbackRate())}#f(t){this.canPlayQueue.enqueue("rate",()=>{this.#i&&this.#i.setPlaybackRate?.(t)})}#T(){this.#k(this.$props.playsInline())}#k(t){this.canPlayQueue.enqueue("playsinline",()=>{this.#i&&this.#i.setPlaysInline?.(t)})}#S(){let t=this.$props.storage(),e=E(t)?new Vn:t;if(e?.onChange){const{source:s}=this.$state,a=E(t)?t:this.el?.id,n=M(this.#P.bind(this));d(()=>e.onChange(s(),n(),a||void 0))}this.#t.storage=e,this.#t.textTracks.setStorage(e),A(()=>{e?.onDestroy?.(),this.#t.storage=null,this.#t.textTracks.setStorage(null)})}#P(){const{clipStartTime:t,clipEndTime:e}=this.$props,{source:s}=this.$state,a=s();return a.src?`${a.src}:${t()}:${e()}`:null}async play(t){return this.#s.play(t)}async pause(t){return this.#s.pause(t)}async enterFullscreen(t,e){return this.#s.enterFullscreen(t,e)}async exitFullscreen(t,e){return this.#s.exitFullscreen(t,e)}enterPictureInPicture(t){return this.#s.enterPictureInPicture(t)}exitPictureInPicture(t){return this.#s.exitPictureInPicture(t)}seekToLiveEdge(t){this.#s.seekToLiveEdge(t)}startLoading(t){this.#t.notify("can-load",void 0,t)}startLoadingPoster(t){this.#t.notify("can-load-poster",void 0,t)}requestAirPlay(t){return this.#s.requestAirPlay(t)}requestGoogleCast(t){return this.#s.requestGoogleCast(t)}setAudioGain(t,e){return this.#s.setAudioGain(t,e)}destroy(){super.destroy(),this.#t.remote.setPlayer(null),this.dispatch("destroy")}}const V=Kt.prototype;C(V,"canPlayQueue"),C(V,"remoteControl"),C(V,"provider"),C(V,"controls"),C(V,"orientation"),C(V,"title"),C(V,"qualities"),C(V,"audioTracks"),C(V,"textTracks"),C(V,"textRenderers"),C(V,"duration"),C(V,"paused"),C(V,"muted"),C(V,"currentTime"),C(V,"volume"),C(V,"playbackRate"),B(V,"play"),B(V,"pause"),B(V,"enterFullscreen"),B(V,"exitFullscreen"),B(V,"enterPictureInPicture"),B(V,"exitPictureInPicture"),B(V,"seekToLiveEdge"),B(V,"startLoading"),B(V,"startLoadingPoster"),B(V,"requestAirPlay"),B(V,"requestGoogleCast"),B(V,"setAudioGain");class Gn extends T(HTMLElement,Kt){static tagName="media-player";static attrs={autoPlay:"autoplay",crossOrigin:"crossorigin",playsInline:"playsinline",preferNativeHLS:"prefer-native-hls",minLiveDVRWindow:"min-live-dvr-window"}}class Kn{name="audio";target;canPlay(t){return Qa(t)?!E(t.src)||t.type==="?"||Wa(this.target,t.type):!1}mediaType(){return"audio"}async load(t){return new(await import("../providers/vidstack-audio-TqAJ3SPb.js")).AudioProvider(this.target,t)}}class ve{name="video";target;canPlay(t){return Ua(t)?!E(t.src)||t.type==="?"||za(this.target,t.type):!1}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-video-DmHYVb0n.js")).VideoProvider(this.target,t)}}class As extends ve{static supported=ja();name="dash";canPlay(t){return As.supported&&he(t)}async load(t){return new(await import("../providers/vidstack-dash-DygXeMRA.js")).DASHProvider(this.target,t)}}class Ms extends ve{static supported=Ks();name="hls";canPlay(t){return Ms.supported&&pe(t)}async load(t){return new(await import("../providers/vidstack-hls-DXxFXo7L.js")).HLSProvider(this.target,t)}}class Ls extends ve{static supported=Ya();name="shaka";canPlay(t){return Ls.supported&&(he(t)||pe(t))}async load(t){return new(await import("../providers/vidstack-shaka-BI1-vrj9.js")).ShakaProvider(this.target,t)}}class Qn{name="vimeo";target;preconnect(){const t=["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"];for(const e of t)jt(e)}canPlay(t){return E(t.src)&&t.type==="video/vimeo"}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-vimeo-DBotqgfP.js")).VimeoProvider(this.target,t)}async loadPoster(t,e,s){const{resolveVimeoVideoId:a,getVimeoVideoInfo:n}=await import("./vidstack-2f5gzOW6.js");if(!E(t.src))return null;const{videoId:r,hash:o}=a(t.src);return r?n(r,s,o).then(l=>l?l.poster:null):null}}class Wn{name="youtube";target;preconnect(){const t=["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"];for(const e of t)jt(e)}canPlay(t){return E(t.src)&&t.type==="video/youtube"}mediaType(){return"video"}async load(t){return new(await import("../providers/vidstack-youtube-BC_sjF_x.js")).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){const{findYouTubePoster:a,resolveYouTubeVideoId:n}=await import("./vidstack-DiNS2Vx5.js"),r=E(t.src)&&n(t.src);return r?a(r,s):null}}function Un(i,t){return fetch(i,t).then(e=>e.text()).then(e=>/type="static"/.test(e)?"on-demand":"live")}function fi(i,t){return fetch(i,t).then(e=>e.text()).then(e=>{const s=zn(e);if(s)return fi(/^https?:/.test(s)?s:new URL(s,i).href,t);const a=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(e)?"on-demand":"live";return a==="live"&&jn(e)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(e)||e.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":a})}function zn(i){const t=i.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return t?t[0].split(`
`)[1].trim():null}function jn(i){const t=i.split(`
`);for(const e of t)if(e.startsWith("#EXT-X-TARGETDURATION")){const s=parseFloat(e.split(":")[1]);if(!isNaN(s))return s}return-1}const ss=new Map;class Yn{#t=!1;#e;#s;#i;#a;constructor(t,e,s,a=[]){this.#s=t,this.#i=e,this.#a=s;const n=new As,r=new Ms,o=new Ls,l=new ve,u=new Kn,c=new Wn,m=new Qn,v=[c,m];this.#e=M(()=>{const P=e.$state.remotePlaybackLoader(),I=e.$props.preferNativeHLS()?[l,u,o,n,r,...v,...a]:[o,r,l,u,n,...v,...a];return P?[P,...I]:I});const{$state:w}=e;w.sources.set(gi(e.$props.src()));for(const P of w.sources()){const I=this.#e().find(Z=>Z.canPlay(P));if(!I)continue;const q=I.mediaType(P);e.$state.source.set(P),e.$state.mediaType.set(q),e.$state.inferredViewType.set(q),this.#a.set(I),this.#t=!0;break}}connect(){const t=this.#a();this.#t&&(this.#l(this.#i.$state.source(),t),this.#u(t),this.#t=!1),d(this.#n.bind(this)),d(this.#r.bind(this)),d(this.#c.bind(this)),d(this.#h.bind(this)),d(this.#d.bind(this))}#n(){this.#i.notify("sources-change",[...gi(this.#i.$props.src()),...this.#s()])}#r(){const{$state:t}=this.#i,e=t.sources(),s=f(t.source),a=this.#o(s,e);if(e[0]?.src&&!a.src&&!a.type){const{crossOrigin:r}=t,o=ge(r()),l=new AbortController;return Promise.all(e.map(u=>E(u.src)&&u.type==="?"?fetch(u.src,{method:"HEAD",credentials:o,signal:l.signal}).then(c=>(u.type=c.headers.get("content-type")||"??",ss.set(u.src,u.type),u)).catch(()=>u):u)).then(u=>{if(l.signal.aborted)return;const c=this.#o(f(t.source),u);ut(),c.src||this.#i.notify("error",{message:"Failed to load resource.",code:4})}),()=>l.abort()}ut()}#o(t,e){let s={src:"",type:""},a=null,n=new U("sources-change",{detail:{sources:e}}),r=this.#e(),{started:o,paused:l,currentTime:u,quality:c,savedState:m}=this.#i.$state;for(const v of e){const w=r.find(P=>P.canPlay(v));if(w){s=v,a=w;break}}if(es(s)){const v=c(),w=e.find(P=>P.src===v?.src);f(o)?m.set({paused:f(l),currentTime:f(u)}):m.set(null),w&&(s=w,n=new U("quality-change",{detail:{quality:v}}))}return yi(t,s)||this.#l(s,a,n),a!==f(this.#a)&&this.#u(a,n),s}#l(t,e,s){this.#i.notify("source-change",t,s),this.#i.notify("media-type-change",e?.mediaType(t)||"unknown",s)}#u(t,e){this.#i.$providerSetup.set(!1),this.#i.notify("provider-change",null,e),t&&f(()=>t.preconnect?.(this.#i)),this.#a.set(t),this.#i.notify("provider-loader-change",t,e)}#c(){const t=this.#i.$provider();if(!(!t||f(this.#i.$providerSetup))){if(this.#i.$state.canLoad()){Ut(()=>t.setup(),t.scope),this.#i.$providerSetup.set(!0);return}f(()=>t.preconnect?.())}}#h(){if(!this.#i.$providerSetup())return;const t=this.#i.$provider(),e=this.#i.$state.source(),s=f(this.#i.$state.crossOrigin),a=f(this.#i.$props.preferNativeHLS);if(!yi(t?.currentSrc,e)){if(this.#i.$state.canLoad()){const n=new AbortController;return pe(e)?(a||!Ks())&&fi(e.src,{credentials:ge(s),signal:n.signal}).then(r=>{this.#i.notify("stream-type-change",r)}).catch(He):he(e)?Un(e.src,{credentials:ge(s),signal:n.signal}).then(r=>{this.#i.notify("stream-type-change",r)}).catch(He):this.#i.notify("stream-type-change","on-demand"),f(()=>{const r=f(this.#i.$state.preload);return t?.loadSource(e,r).catch(o=>{})}),()=>n.abort()}try{E(e.src)&&jt(new URL(e.src).origin)}catch{}}}#d(){const t=this.#a(),{providedPoster:e,source:s,canLoadPoster:a}=this.#i.$state;if(!t||!t.loadPoster||!s()||!a()||e())return;const n=new AbortController,r=new U("source-change",{detail:s});return t.loadPoster(s(),this.#i,n).then(o=>{this.#i.notify("poster-change",o||"",r)}).catch(()=>{this.#i.notify("poster-change","",r)}),()=>{n.abort()}}}function gi(i){return(G(i)?i:[i]).map(t=>E(t)?{src:t,type:bi(t)}:{...t,type:bi(t.src,t.type)})}function bi(i,t){return E(t)&&t.length?t:E(i)&&ss.has(i)?ss.get(i):!t&&pe({src:i,type:""})?"application/x-mpegurl":!t&&he({src:i,type:""})?"application/dash+xml":!E(i)||i.startsWith("blob:")?"video/object":i.includes("youtube")||i.includes("youtu.be")?"video/youtube":i.includes("vimeo")&&!i.includes("progressive_redirect")&&!i.includes(".m3u8")?"video/vimeo":"?"}function yi(i,t){return i?.src===t?.src&&i?.type===t?.type}class Xn{#t;#e;#s=[];constructor(t,e){this.#t=t,this.#e=e,d(this.#i.bind(this))}#i(){const t=this.#t();for(const e of this.#s)if(!t.some(s=>s.id===e.id)){const s=e.id&&this.#e.textTracks.getById(e.id);s&&this.#e.textTracks.remove(s)}for(const e of t){const s=e.id||fe.createId(e);this.#e.textTracks.getById(s)||(e.id=s,this.#e.textTracks.add(e))}this.#s=t}}class vi extends k{static props={loaders:[]};static state=new yt({loader:null});#t;#e;#s=b([]);#i=b([]);#a=null;onSetup(){this.#t=g(),this.#e=new Yn(this.#s,this.#t,this.$state.loader,this.$props.loaders())}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){this.#e.connect(),new Xn(this.#i,this.#t);const e=new ResizeObserver(ht(this.#l.bind(this)));e.observe(t);const s=new MutationObserver(this.#u.bind(this));s.observe(t,{attributes:!0,childList:!0}),this.#l(),this.#u(),A(()=>{e.disconnect(),s.disconnect()})}#n=-1;load(t){t?.setAttribute("aria-hidden","true"),window.cancelAnimationFrame(this.#n),this.#n=requestAnimationFrame(()=>this.#r(t)),A(()=>{window.cancelAnimationFrame(this.#n)})}#r(t){if(!this.scope)return;const e=this.$state.loader(),{$provider:s}=this.#t;this.#a===e&&e?.target===t&&f(s)||(this.#o(),this.#a=e,e&&(e.target=t||null),!(!e||!t)&&e.load(this.#t).then(a=>{this.scope&&f(this.$state.loader)===e&&this.#t.notify("provider-change",a)}))}onDestroy(){this.#a=null,this.#o()}#o(){this.#t?.notify("provider-change",null)}#l(){if(!this.el)return;const{player:t,$state:e}=this.#t,s=this.el.offsetWidth,a=this.el.offsetHeight;t&&(e.mediaWidth.set(s),e.mediaHeight.set(a),t.el&&(st(t.el,"--media-width",s+"px"),st(t.el,"--media-height",a+"px")))}#u(){const t=[],e=[],s=this.el.children;for(const a of s)if(!a.hasAttribute("data-vds")){if(a instanceof HTMLSourceElement){const n={id:a.id,src:a.src,type:a.type};for(const r of["id","src","width","height","bitrate","codec"]){const o=a.getAttribute(`data-${r}`);E(o)&&(n[r]=/id|src|codec/.test(r)?o:Number(o))}t.push(n)}else if(a instanceof HTMLTrackElement){const n={src:a.src,kind:a.track.kind,language:a.srclang,label:a.label,default:a.default,type:a.getAttribute("data-type")};e.push({id:a.id||fe.createId(n),...n})}}this.#s.set(t),this.#i.set(e),ut()}}const Jn=vi.prototype;B(Jn,"load");class Zn extends T(HTMLElement,vi){static tagName="media-provider";#t;#e=null;#s=null;onSetup(){this.#t=g(),this.setAttribute("keep-alive","")}onDestroy(){this.#s?.remove(),this.#s=null,this.#e?.remove(),this.#e=null}onConnect(){d(()=>{const t=this.$state.loader(),e=t?.name==="youtube",s=t?.name==="vimeo",a=e||s,n=t?.name==="google-cast",r=t?n?this.#r():a?this.#n():t.mediaType()==="audio"?this.#i():this.#a():null;if(this.#e!==r){const o=this.#e?.parentElement??this;this.#e?.remove(),this.#e=r,r&&o.prepend(r),a&&r&&d(()=>{const{nativeControls:l,viewType:u}=this.#t.$state,c=l(),m=u()==="audio";!c&&!m?(this.#s=this.querySelector(".vds-blocker"),this.#s||(this.#s=document.createElement("div"),this.#s.classList.add("vds-blocker"),r.after(this.#s))):(this.#s?.remove(),this.#s=null),y(r,"data-no-controls",!c)})}e?r?.classList.add("vds-youtube"):s&&r?.classList.add("vds-vimeo"),a||(this.#s?.remove(),this.#s=null),this.load(r)})}#i(){const t=this.#e instanceof HTMLAudioElement?this.#e:document.createElement("audio"),{controls:e,crossOrigin:s}=this.#t.$state;return d(()=>{y(t,"controls",e()),y(t,"crossorigin",s())}),t}#a(){const t=this.#e instanceof HTMLVideoElement?this.#e:document.createElement("video"),{crossOrigin:e,poster:s,nativeControls:a}=this.#t.$state,n=M(()=>a()?"true":null),r=M(()=>s()&&a()?s():null);return d(()=>{y(t,"controls",n()),y(t,"crossorigin",e()),y(t,"poster",r())}),t}#n(){const t=this.#e instanceof HTMLIFrameElement?this.#e:document.createElement("iframe"),{nativeControls:e}=this.#t.$state;return d(()=>y(t,"tabindex",e()?null:-1)),t}#r(){if(this.#e?.classList.contains("vds-google-cast"))return this.#e;const t=document.createElement("div");return t.classList.add("vds-google-cast"),import("./vidstack-stw7mM8m.js").then(({insertContent:e})=>{e(t,this.#t.$state)}),t}}$(Gn),$(Zn);const $i=dt();function S(){return O($i)}const tr={colorScheme:"system",download:null,customIcons:!1,disableTimeSlider:!1,menuContainer:null,menuGroup:"bottom",noAudioGain:!1,noGestures:!1,noKeyboardAnimations:!1,noModal:!1,noScrubGesture:!1,playbackRates:{min:0,max:2,step:.25},audioGains:{min:0,max:300,step:25},seekStep:10,sliderChaptersMinWidth:325,hideQualityBitrate:!1,smallWhen:!1,thumbnails:null,translations:null,when:!1};class is extends k{static props=tr;#t;#e=M(()=>{const t=this.$props.when();return this.#i(t)});#s=M(()=>{const t=this.$props.smallWhen();return this.#i(t)});get isMatch(){return this.#e()}get isSmallLayout(){return this.#s()}onSetup(){this.#t=g(),this.setAttributes({"data-match":this.#e,"data-sm":()=>this.#s()?"":null,"data-lg":()=>this.#s()?null:"","data-size":()=>this.#s()?"sm":"lg","data-no-scrub-gesture":this.$props.noScrubGesture}),J($i,{...this.$props,when:this.#e,smallWhen:this.#s,userPrefersAnnouncements:b(!0),userPrefersKeyboardAnimations:b(!0),menuPortal:b(null)})}onAttach(t){ci(t,this.$props.colorScheme)}#i(t){return t!=="never"&&(Rs(t)?t:M(()=>t(this.#t.player.state))())}}const wi=is.prototype;C(wi,"isMatch"),C(wi,"isSmallLayout");let er=class extends is{static props={...super.props,when:({viewType:t})=>t==="audio",smallWhen:({width:t})=>t<576}};class sr extends Pa{#t=null;#e=!1;#s=null;constructor(t){super(t),this.#e=t.type===Ns.ATTRIBUTE||t.type===Ns.BOOLEAN_ATTRIBUTE}render(t){return t!==this.#t&&(this.disconnected(),this.#t=t,this.isConnected&&this.#i()),this.#t?this.#a(f(this.#t)):Ca}reconnected(){this.#i()}disconnected(){this.#s?.(),this.#s=null}#i(){this.#t&&(this.#s=d(this.#r.bind(this)))}#a(t){return this.#e?Ge(t):t}#n(t){this.setValue(this.#a(t))}#r(){this.#n(this.#t?.())}}function p(i){return xa(sr)(M(i))}class $e extends HTMLElement{rootPart=null;connectedCallback(){this.rootPart=le(this.render(),this,{renderBefore:this.firstChild}),this.rootPart.setConnected(!0)}disconnectedCallback(){this.rootPart?.setConnected(!1),this.rootPart=null,le(null,this)}}function Ti(i,t){d(()=>{const{player:e}=g(),s=e.el;return s&&y(s,"data-layout",t()&&i),()=>s?.removeAttribute("data-layout")})}class ki{#t;#e;elements=new Set;constructor(t,e){this.#t=t,this.#e=e}connect(){this.#i();const t=new MutationObserver(this.#s);for(const e of this.#t)t.observe(e,{childList:!0,subtree:!0});A(()=>t.disconnect()),A(this.disconnect.bind(this))}disconnect(){this.elements.clear()}assign(t,e){Os(t)?(e.textContent="",e.append(t)):(le(null,e),le(t,e)),e.style.display||(e.style.display="contents");const s=e.firstElementChild;if(!s)return;const a=e.getAttribute("data-class");a&&s.classList.add(...a.split(" "))}#s=ht(this.#i.bind(this));#i(t){if(t&&!t.some(a=>a.addedNodes.length))return;let e=!1,s=this.#t.flatMap(a=>[...a.querySelectorAll("slot")]);for(const a of s)!a.hasAttribute("name")||this.elements.has(a)||(this.elements.add(a),e=!0);e&&this.#e(this.elements)}}let ir=0,we="data-slot-id";class as{#t;slots;constructor(t){this.#t=t,this.slots=new ki(t,this.#s.bind(this))}connect(){this.slots.connect(),this.#s();const t=new MutationObserver(this.#e);for(const e of this.#t)t.observe(e,{childList:!0});A(()=>t.disconnect())}#e=ht(this.#s.bind(this));#s(){for(const t of this.#t)for(const e of t.children){if(e.nodeType!==1)continue;const s=e.getAttribute("slot");if(!s)continue;e.style.display="none";let a=e.getAttribute(we);a||e.setAttribute(we,a=++ir+"");for(const n of this.slots.elements){if(n.getAttribute("name")!==s||n.getAttribute(we)===a)continue;const r=document.importNode(e,!0);s.includes("-icon")&&r.classList.add("vds-icon"),r.style.display="",r.removeAttribute("slot"),this.slots.assign(r,n),n.setAttribute(we,a)}}}}function Y(i,t){return i()?.[t]??t}function ns(){return p(()=>{const{translations:i,userPrefersAnnouncements:t}=S();return t()?h`<media-announcer .translations=${p(i)}></media-announcer>`:null})}function et(i,t=""){return h`<slot
    name=${`${i}-icon`}
    data-class=${`vds-icon vds-${i}-icon${t?` ${t}`:""}`}
  ></slot>`}function Jt(i){return i.map(t=>et(t))}function x(i,t){return p(()=>Y(i,t))}function rs({tooltip:i}){const{translations:t}=S(),{remotePlaybackState:e}=F(),s=p(()=>{const n=Y(t,"AirPlay"),r=Be(e());return`${n} ${r}`}),a=x(t,"AirPlay");return h`
    <media-tooltip class="vds-airplay-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-airplay-button class="vds-airplay-button vds-button" aria-label=${s}>
          ${et("airplay")}
        </media-airplay-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-airplay-tooltip-text">${a}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Si({tooltip:i}){const{translations:t}=S(),{remotePlaybackState:e}=F(),s=p(()=>{const n=Y(t,"Google Cast"),r=Be(e());return`${n} ${r}`}),a=x(t,"Google Cast");return h`
    <media-tooltip class="vds-google-cast-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-google-cast-button class="vds-google-cast-button vds-button" aria-label=${s}>
          ${et("google-cast")}
        </media-google-cast-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-google-cast-tooltip-text">${a}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Te({tooltip:i}){const{translations:t}=S(),e=x(t,"Play"),s=x(t,"Pause");return h`
    <media-tooltip class="vds-play-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-play-button
          class="vds-play-button vds-button"
          aria-label=${x(t,"Play")}
        >
          ${Jt(["play","pause","replay"])}
        </media-play-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-play-tooltip-text">${e}</span>
        <span class="vds-pause-tooltip-text">${s}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function xi({tooltip:i,ref:t=He}){const{translations:e}=S(),s=x(e,"Mute"),a=x(e,"Unmute");return h`
    <media-tooltip class="vds-mute-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-mute-button
          class="vds-mute-button vds-button"
          aria-label=${x(e,"Mute")}
          ${de(t)}
        >
          ${Jt(["mute","volume-low","volume-high"])}
        </media-mute-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-mute-tooltip-text">${a}</span>
        <span class="vds-unmute-tooltip-text">${s}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function os({tooltip:i}){const{translations:t}=S(),e=x(t,"Closed-Captions On"),s=x(t,"Closed-Captions Off");return h`
    <media-tooltip class="vds-caption-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-caption-button
          class="vds-caption-button vds-button"
          aria-label=${x(t,"Captions")}
        >
          ${Jt(["cc-on","cc-off"])}
        </media-caption-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-cc-on-tooltip-text">${s}</span>
        <span class="vds-cc-off-tooltip-text">${e}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function ar(){const{translations:i}=S(),t=x(i,"Enter PiP"),e=x(i,"Exit PiP");return h`
    <media-tooltip class="vds-pip-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-pip-button
          class="vds-pip-button vds-button"
          aria-label=${x(i,"PiP")}
        >
          ${Jt(["pip-enter","pip-exit"])}
        </media-pip-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content">
        <span class="vds-pip-enter-tooltip-text">${t}</span>
        <span class="vds-pip-exit-tooltip-text">${e}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Pi({tooltip:i}){const{translations:t}=S(),e=x(t,"Enter Fullscreen"),s=x(t,"Exit Fullscreen");return h`
    <media-tooltip class="vds-fullscreen-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-fullscreen-button
          class="vds-fullscreen-button vds-button"
          aria-label=${x(t,"Fullscreen")}
        >
          ${Jt(["fs-enter","fs-exit"])}
        </media-fullscreen-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${i}>
        <span class="vds-fs-enter-tooltip-text">${e}</span>
        <span class="vds-fs-exit-tooltip-text">${s}</span>
      </media-tooltip-content>
    </media-tooltip>
  `}function Ci({backward:i,tooltip:t}){const{translations:e,seekStep:s}=S(),a=i?"Seek Backward":"Seek Forward",n=x(e,a);return h`
    <media-tooltip class="vds-seek-tooltip vds-tooltip">
      <media-tooltip-trigger>
        <media-seek-button
          class="vds-seek-button vds-button"
          seconds=${p(()=>(i?-1:1)*s())}
          aria-label=${n}
        >
          ${et(i?"seek-backward":"seek-forward")}
        </media-seek-button>
      </media-tooltip-trigger>
      <media-tooltip-content class="vds-tooltip-content" placement=${t}>
        ${x(e,a)}
      </media-tooltip-content>
    </media-tooltip>
  `}function Ei(){const{translations:i}=S(),{live:t}=F(),e=x(i,"Skip To Live"),s=x(i,"LIVE");return t()?h`
        <media-live-button class="vds-live-button" aria-label=${e}>
          <span class="vds-live-button-text">${s}</span>
        </media-live-button>
      `:null}function ls(){return p(()=>{const{download:i,translations:t}=S(),e=i();if(Ea(e))return null;const{source:s,title:a}=F(),n=s(),r=Ws({title:a(),src:n,download:e});return E(r?.url)?h`
          <media-tooltip class="vds-download-tooltip vds-tooltip">
            <media-tooltip-trigger>
              <a
                role="button"
                class="vds-download-button vds-button"
                aria-label=${x(t,"Download")}
                href=${Us(r.url,{download:r.name})}
                download=${r.name}
                target="_blank"
              >
                <slot name="download-icon" data-class="vds-icon" />
              </a>
            </media-tooltip-trigger>
            <media-tooltip-content class="vds-tooltip-content" placement="top">
              ${x(t,"Download")}
            </media-tooltip-content>
          </media-tooltip>
        `:null})}function ds(){const{translations:i}=S();return h`
    <media-captions
      class="vds-captions"
      .exampleText=${x(i,"Captions look like this")}
    ></media-captions>
  `}function ft(){return h`<div class="vds-controls-spacer"></div>`}function Ai(i,t){return h`
    <media-menu-portal .container=${p(i)} disabled="fullscreen">
      ${t}
    </media-menu-portal>
  `}function Mi(i,t,e,s){let a=E(t)?document.querySelector(t):t;a||(a=i?.closest("dialog")),a||(a=document.body);const n=document.createElement("div");n.style.display="contents",n.classList.add(e),a.append(n),d(()=>{if(!n)return;const{viewType:o}=F(),l=s();y(n,"data-view-type",o()),y(n,"data-sm",l),y(n,"data-lg",!l),y(n,"data-size",l?"sm":"lg")});const{colorScheme:r}=S();return ci(n,r),n}function Li({placement:i,tooltip:t,portal:e}){const{textTracks:s}=g(),{viewType:a,seekableStart:n,seekableEnd:r}=F(),{translations:o,thumbnails:l,menuPortal:u,noModal:c,menuGroup:m,smallWhen:v}=S();if(M(()=>{const nt=n(),St=r(),xt=b(null);return zt(s,"chapters",xt.set),!xt()?.cues.filter(Ot=>Ot.startTime<=St&&Ot.endTime>=nt)?.length})())return null;const P=M(()=>c()?ue(i):v()?null:ue(i)),I=M(()=>!v()&&m()==="bottom"&&a()==="video"?26:0),q=b(!1);function Z(){q.set(!0)}function Vt(){q.set(!1)}const kt=h`
    <media-menu-items
      class="vds-chapters-menu-items vds-menu-items"
      placement=${p(P)}
      offset=${p(I)}
    >
      ${p(()=>q()?h`
          <media-chapters-radio-group
            class="vds-chapters-radio-group vds-radio-group"
            .thumbnails=${p(l)}
          >
            <template>
              <media-radio class="vds-chapter-radio vds-radio">
                <media-thumbnail class="vds-thumbnail"></media-thumbnail>
                <div class="vds-chapter-radio-content">
                  <span class="vds-chapter-radio-label" data-part="label"></span>
                  <span class="vds-chapter-radio-start-time" data-part="start-time"></span>
                  <span class="vds-chapter-radio-duration" data-part="duration"></span>
                </div>
              </media-radio>
            </template>
          </media-chapters-radio-group>
        `:null)}
    </media-menu-items>
  `;return h`
    <media-menu class="vds-chapters-menu vds-menu" @open=${Z} @close=${Vt}>
      <media-tooltip class="vds-tooltip">
        <media-tooltip-trigger>
          <media-menu-button
            class="vds-menu-button vds-button"
            aria-label=${x(o,"Chapters")}
          >
            ${et("menu-chapters")}
          </media-menu-button>
        </media-tooltip-trigger>
        <media-tooltip-content
          class="vds-tooltip-content"
          placement=${ne(t)?p(t):t}
        >
          ${x(o,"Chapters")}
        </media-tooltip-content>
      </media-tooltip>
      ${Ai(u,kt)}
    </media-menu>
  `}function us(i){const{style:t}=new Option;return t.color=i,t.color.match(/\((.*?)\)/)[1].replace(/,/g," ")}const cs={type:"color"},nr={type:"radio",values:{"Monospaced Serif":"mono-serif","Proportional Serif":"pro-serif","Monospaced Sans-Serif":"mono-sans","Proportional Sans-Serif":"pro-sans",Casual:"casual",Cursive:"cursive","Small Capitals":"capitals"}},rr={type:"slider",min:0,max:400,step:25,upIcon:null,downIcon:null},or={type:"slider",min:0,max:100,step:5,upIcon:null,downIcon:null},lr={type:"radio",values:["None","Drop Shadow","Raised","Depressed","Outline"]},ke={fontFamily:"pro-sans",fontSize:"100%",textColor:"#ffffff",textOpacity:"100%",textShadow:"none",textBg:"#000000",textBgOpacity:"100%",displayBg:"#000000",displayBgOpacity:"0%"},Lt=Object.keys(ke).reduce((i,t)=>({...i,[t]:b(ke[t])}),{});for(const i of Object.keys(Lt)){const t=localStorage.getItem(`vds-player:${Nt(i)}`);E(t)&&Lt[i].set(t)}function dr(){for(const i of Object.keys(Lt)){const t=ke[i];Lt[i].set(t)}}let Di=!1,hs=new Set;function ur(){const{player:i}=g();hs.add(i),A(()=>hs.delete(i)),Di||(Ut(()=>{for(const t of Aa(Lt)){const e=Lt[t],s=ke[t],a=`--media-user-${Nt(t)}`,n=`vds-player:${Nt(t)}`;d(()=>{const r=e(),o=r===s,l=o?null:cr(i,t,r);for(const u of hs)u.el?.style.setProperty(a,l);o?localStorage.removeItem(n):localStorage.setItem(n,r)})}},null),Di=!0)}function cr(i,t,e){switch(t){case"fontFamily":const s=e==="capitals"?"small-caps":"";return i.el?.style.setProperty("--media-user-font-variant",s),pr(e);case"fontSize":case"textOpacity":case"textBgOpacity":case"displayBgOpacity":return hr(e);case"textColor":return`rgb(${us(e)} / var(--media-user-text-opacity, 1))`;case"textShadow":return mr(e);case"textBg":return`rgb(${us(e)} / var(--media-user-text-bg-opacity, 1))`;case"displayBg":return`rgb(${us(e)} / var(--media-user-display-bg-opacity, 1))`}}function hr(i){return(parseInt(i)/100).toString()}function pr(i){switch(i){case"mono-serif":return'"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace';case"mono-sans":return'"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace';case"pro-sans":return'Roboto, "Arial Unicode Ms", Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif';case"casual":return'"Comic Sans MS", Impact, Handlee, fantasy';case"cursive":return'"Monotype Corsiva", "URW Chancery L", "Apple Chancery", "Dancing Script", cursive';case"capitals":return'"Arial Unicode Ms", Arial, Helvetica, Verdana, "Marcellus SC", sans-serif + font-variant=small-caps';default:return'"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif'}}function mr(i){switch(i){case"drop shadow":return"rgb(34, 34, 34) 1.86389px 1.86389px 2.79583px, rgb(34, 34, 34) 1.86389px 1.86389px 3.72778px, rgb(34, 34, 34) 1.86389px 1.86389px 4.65972px";case"raised":return"rgb(34, 34, 34) 1px 1px, rgb(34, 34, 34) 2px 2px";case"depressed":return"rgb(204, 204, 204) 1px 1px, rgb(34, 34, 34) -1px -1px";case"outline":return"rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px, rgb(34, 34, 34) 0px 0px 1.86389px";default:return""}}let fr=0;function it({label:i="",value:t="",children:e}){if(!i)return h`
      <div class="vds-menu-section">
        <div class="vds-menu-section-body">${e}</div>
      </div>
    `;const s=`vds-menu-section-${++fr}`;return h`
    <section class="vds-menu-section" role="group" aria-labelledby=${s}>
      <div class="vds-menu-section-title">
        <header id=${s}>${i}</header>
        ${t?h`<div class="vds-menu-section-value">${t}</div>`:null}
      </div>
      <div class="vds-menu-section-body">${e}</div>
    </section>
  `}function Zt({label:i,children:t}){return h`
    <div class="vds-menu-item">
      <div class="vds-menu-item-label">${i}</div>
      ${t}
    </div>
  `}function Dt({label:i,icon:t,hint:e}){return h`
    <media-menu-button class="vds-menu-item">
      ${et("menu-arrow-left","vds-menu-close-icon")}
      ${t?et(t,"vds-menu-item-icon"):null}
      <span class="vds-menu-item-label">${p(i)}</span>
      <span class="vds-menu-item-hint" data-part="hint">${e?p(e):null} </span>
      ${et("menu-arrow-right","vds-menu-open-icon")}
    </media-menu-button>
  `}function gr({value:i=null,options:t,hideLabel:e=!1,children:s=null,onChange:a=null}){function n(r){const{value:o,label:l}=r;return h`
      <media-radio class="vds-radio" value=${o}>
        ${et("menu-radio-check")}
        ${e?null:h`
              <span class="vds-radio-label" data-part="label">
                ${E(l)?l:p(l)}
              </span>
            `}
        ${ne(s)?s(r):s}
      </media-radio>
    `}return h`
    <media-radio-group
      class="vds-radio-group"
      value=${E(i)?i:i?p(i):""}
      @change=${a}
    >
      ${G(t)?t.map(n):p(()=>t().map(n))}
    </media-radio-group>
  `}function br(i){return G(i)?i.map(t=>({label:t,value:t.toLowerCase()})):Object.keys(i).map(t=>({label:t,value:i[t]}))}function Se(){return h`
    <div class="vds-slider-track"></div>
    <div class="vds-slider-track-fill vds-slider-track"></div>
    <div class="vds-slider-thumb"></div>
  `}function xe(){return h`
    <media-slider-steps class="vds-slider-steps">
      <template>
        <div class="vds-slider-step"></div>
      </template>
    </media-slider-steps>
  `}function Pe({label:i=null,value:t=null,upIcon:e="",downIcon:s="",children:a,isMin:n,isMax:r}){const o=i||t,l=[s?et(s,"down"):null,a,e?et(e,"up"):null];return h`
    <div
      class=${`vds-menu-item vds-menu-slider-item${o?" group":""}`}
      data-min=${p(()=>n()?"":null)}
      data-max=${p(()=>r()?"":null)}
    >
      ${o?h`
            <div class="vds-menu-slider-title">
              ${[i?h`<div>${i}</div>`:null,t?h`<div>${t}</div>`:null]}
            </div>
            <div class="vds-menu-slider-body">${l}</div>
          `:l}
    </div>
  `}const yr={...rr,upIcon:"menu-opacity-up",downIcon:"menu-opacity-down"},ps={...or,upIcon:"menu-opacity-up",downIcon:"menu-opacity-down"};function vr(){return p(()=>{const{hasCaptions:i}=F(),{translations:t}=S();return i()?h`
      <media-menu class="vds-font-menu vds-menu">
        ${Dt({label:()=>Y(t,"Caption Styles")})}
        <media-menu-items class="vds-menu-items">
          ${[it({label:x(t,"Font"),children:[$r(),wr()]}),it({label:x(t,"Text"),children:[Tr(),Sr(),kr()]}),it({label:x(t,"Text Background"),children:[xr(),Pr()]}),it({label:x(t,"Display Background"),children:[Cr(),Er()]}),it({children:[Ar()]})]}
        </media-menu-items>
      </media-menu>
    `:null})}function $r(){return gt({label:"Family",option:nr,type:"fontFamily"})}function wr(){return gt({label:"Size",option:yr,type:"fontSize"})}function Tr(){return gt({label:"Color",option:cs,type:"textColor"})}function kr(){return gt({label:"Opacity",option:ps,type:"textOpacity"})}function Sr(){return gt({label:"Shadow",option:lr,type:"textShadow"})}function xr(){return gt({label:"Color",option:cs,type:"textBg"})}function Pr(){return gt({label:"Opacity",option:ps,type:"textBgOpacity"})}function Cr(){return gt({label:"Color",option:cs,type:"displayBg"})}function Er(){return gt({label:"Opacity",option:ps,type:"displayBgOpacity"})}function Ar(){const{translations:i}=S();return h`
    <button class="vds-menu-item" role="menuitem" @click=${dr}>
      <span class="vds-menu-item-label">${p(()=>Y(i,"Reset"))}</span>
    </button>
  `}function gt({label:i,option:t,type:e}){const{player:s}=g(),{translations:a}=S(),n=Lt[e],r=()=>Y(a,i);function o(){ut(),s.dispatchEvent(new Event("vds-font-change"))}if(t.type==="color"){let c=function(m){n.set(m.target.value),o()};return Zt({label:p(r),children:h`
        <input
          class="vds-color-picker"
          type="color"
          .value=${p(n)}
          @input=${c}
        />
      `})}if(t.type==="slider"){let c=function(q){n.set(q.detail+"%"),o()};const{min:m,max:v,step:w,upIcon:P,downIcon:I}=t;return Pe({label:p(r),value:p(n),upIcon:P,downIcon:I,isMin:()=>n()===m+"%",isMax:()=>n()===v+"%",children:h`
        <media-slider
          class="vds-slider"
          min=${m}
          max=${v}
          step=${w}
          key-step=${w}
          .value=${p(()=>parseInt(n()))}
          aria-label=${p(r)}
          @value-change=${c}
          @drag-value-change=${c}
        >
          ${Se()}${xe()}
        </media-slider>
      `})}const l=br(t.values),u=()=>{const c=n(),m=l.find(v=>v.value===c)?.label||"";return Y(a,E(m)?m:m())};return h`
    <media-menu class=${`vds-${Nt(e)}-menu vds-menu`}>
      ${Dt({label:r,hint:u})}
      <media-menu-items class="vds-menu-items">
        ${gr({value:n,options:l,onChange({detail:c}){n.set(c),o()}})}
      </media-menu-items>
    </media-menu>
  `}function Ce({label:i,checked:t,defaultChecked:e=!1,storageKey:s,onChange:a}){const{translations:n}=S(),r=s?localStorage.getItem(s):null,o=b(!!(r??e)),l=b(!1),u=p(W(o)),c=x(n,i);s&&a(f(o)),t&&d(()=>void o.set(t()));function m(P){P?.button!==1&&(o.set(I=>!I),s&&localStorage.setItem(s,o()?"1":""),a(o(),P),l.set(!1))}function v(P){Wt(P)&&m()}function w(P){P.button===0&&l.set(!0)}return h`
    <div
      class="vds-menu-checkbox"
      role="menuitemcheckbox"
      tabindex="0"
      aria-label=${c}
      aria-checked=${u}
      data-active=${p(()=>l()?"":null)}
      @pointerup=${m}
      @pointerdown=${w}
      @keydown=${v}
    ></div>
  `}function Mr(){return p(()=>{const{translations:i}=S();return h`
      <media-menu class="vds-accessibility-menu vds-menu">
        ${Dt({label:()=>Y(i,"Accessibility"),icon:"menu-accessibility"})}
        <media-menu-items class="vds-menu-items">
          ${[it({children:[Lr(),Dr()]}),it({children:[vr()]})]}
        </media-menu-items>
      </media-menu>
    `})}function Lr(){const{userPrefersAnnouncements:i,translations:t}=S(),e="Announcements";return Zt({label:x(t,e),children:Ce({label:e,storageKey:"vds-player::announcements",onChange(s){i.set(s)}})})}function Dr(){return p(()=>{const{translations:i,userPrefersKeyboardAnimations:t,noKeyboardAnimations:e}=S(),{viewType:s}=F();if(M(()=>s()!=="video"||e())())return null;const n="Keyboard Animations";return Zt({label:x(i,n),children:Ce({label:n,defaultChecked:!0,storageKey:"vds-player::keyboard-animations",onChange(r){t.set(r)}})})})}function qr(){return p(()=>{const{noAudioGain:i,translations:t}=S(),{audioTracks:e,canSetAudioGain:s}=F();return M(()=>!(s()&&!i())&&e().length<=1)()?null:h`
      <media-menu class="vds-audio-menu vds-menu">
        ${Dt({label:()=>Y(t,"Audio"),icon:"menu-audio"})}
        <media-menu-items class="vds-menu-items">
          ${[_r(),Ir()]}
        </media-menu-items>
      </media-menu>
    `})}function _r(){return p(()=>{const{translations:i}=S(),{audioTracks:t}=F(),e=x(i,"Default");return M(()=>t().length<=1)()?null:it({children:h`
        <media-menu class="vds-audio-tracks-menu vds-menu">
          ${Dt({label:()=>Y(i,"Track")})}
          <media-menu-items class="vds-menu-items">
            <media-audio-radio-group
              class="vds-audio-track-radio-group vds-radio-group"
              empty-label=${e}
            >
              <template>
                <media-radio class="vds-audio-track-radio vds-radio">
                  <slot name="menu-radio-check-icon" data-class="vds-icon"></slot>
                  <span class="vds-radio-label" data-part="label"></span>
                </media-radio>
              </template>
            </media-audio-radio-group>
          </media-menu-items>
        </media-menu>
      `})})}function Ir(){return p(()=>{const{noAudioGain:i,translations:t}=S(),{canSetAudioGain:e}=F();if(M(()=>!e()||i())())return null;const{audioGain:a}=F();return it({label:x(t,"Boost"),value:p(()=>Math.round(((a()??1)-1)*100)+"%"),children:[Pe({upIcon:"menu-audio-boost-up",downIcon:"menu-audio-boost-down",children:Vr(),isMin:()=>((a()??1)-1)*100<=qi(),isMax:()=>((a()??1)-1)*100===_i()})]})})}function Vr(){const{translations:i}=S(),t=x(i,"Boost"),e=qi,s=_i,a=Or;return h`
    <media-audio-gain-slider
      class="vds-audio-gain-slider vds-slider"
      aria-label=${t}
      min=${p(e)}
      max=${p(s)}
      step=${p(a)}
      key-step=${p(a)}
    >
      ${Se()}${xe()}
    </media-audio-gain-slider>
  `}function qi(){const{audioGains:i}=S(),t=i();return G(t)?t[0]??0:t.min}function _i(){const{audioGains:i}=S(),t=i();return G(t)?t[t.length-1]??300:t.max}function Or(){const{audioGains:i}=S(),t=i();return G(t)?t[1]-t[0]||25:t.step}function Rr(){return p(()=>{const{translations:i}=S(),{hasCaptions:t}=F(),e=x(i,"Off");return t()?h`
      <media-menu class="vds-captions-menu vds-menu">
        ${Dt({label:()=>Y(i,"Captions"),icon:"menu-captions"})}
        <media-menu-items class="vds-menu-items">
          <media-captions-radio-group
            class="vds-captions-radio-group vds-radio-group"
            off-label=${e}
          >
            <template>
              <media-radio class="vds-caption-radio vds-radio">
                <slot name="menu-radio-check-icon" data-class="vds-icon"></slot>
                <span class="vds-radio-label" data-part="label"></span>
              </media-radio>
            </template>
          </media-captions-radio-group>
        </media-menu-items>
      </media-menu>
    `:null})}function ms(i,t){return[...i].sort(t?Fr:Nr)}function Nr(i,t){return i.height===t.height?(i.bitrate??0)-(t.bitrate??0):i.height-t.height}function Fr(i,t){return t.height===i.height?(t.bitrate??0)-(i.bitrate??0):t.height-i.height}function Br(){return p(()=>{const{translations:i}=S();return h`
      <media-menu class="vds-playback-menu vds-menu">
        ${Dt({label:()=>Y(i,"Playback"),icon:"menu-playback"})}
        <media-menu-items class="vds-menu-items">
          ${[it({children:Hr()}),Gr(),Ur()]}
        </media-menu-items>
      </media-menu>
    `})}function Hr(){const{remote:i}=g(),{translations:t}=S(),e="Loop";return Zt({label:x(t,e),children:Ce({label:e,storageKey:"vds-player::user-loop",onChange(s,a){i.userPrefersLoopChange(s,a)}})})}function Gr(){return p(()=>{const{translations:i}=S(),{canSetPlaybackRate:t,playbackRate:e}=F();return t()?it({label:x(i,"Speed"),value:p(()=>e()===1?Y(i,"Normal"):e()+"x"),children:[Pe({upIcon:"menu-speed-up",downIcon:"menu-speed-down",children:Qr(),isMin:()=>e()===Ii(),isMax:()=>e()===Vi()})]}):null})}function Ii(){const{playbackRates:i}=S(),t=i();return G(t)?t[0]??0:t.min}function Vi(){const{playbackRates:i}=S(),t=i();return G(t)?t[t.length-1]??2:t.max}function Kr(){const{playbackRates:i}=S(),t=i();return G(t)?t[1]-t[0]||.25:t.step}function Qr(){const{translations:i}=S(),t=x(i,"Speed"),e=Ii,s=Vi,a=Kr;return h`
    <media-speed-slider
      class="vds-speed-slider vds-slider"
      aria-label=${t}
      min=${p(e)}
      max=${p(s)}
      step=${p(a)}
      key-step=${p(a)}
    >
      ${Se()}${xe()}
    </media-speed-slider>
  `}function Wr(){const{remote:i,qualities:t}=g(),{autoQuality:e,canSetQuality:s,qualities:a}=F(),{translations:n}=S(),r="Auto";return M(()=>!s()||a().length<=1)()?null:Zt({label:x(n,r),children:Ce({label:r,checked:e,onChange(l,u){l?i.requestAutoQuality(u):i.changeQuality(t.selectedIndex,u)}})})}function Ur(){return p(()=>{const{hideQualityBitrate:i,translations:t}=S(),{canSetQuality:e,qualities:s,quality:a}=F(),n=M(()=>!e()||s().length<=1),r=M(()=>ms(s()));return n()?null:it({label:x(t,"Quality"),value:p(()=>{const o=a()?.height,l=i()?null:a()?.bitrate,u=l&&l>0?`${(l/1e6).toFixed(2)} Mbps`:null,c=Y(t,"Auto");return o?`${o}p${u?` (${u})`:""}`:c}),children:[Pe({upIcon:"menu-quality-up",downIcon:"menu-quality-down",children:zr(),isMin:()=>r()[0]===a(),isMax:()=>r().at(-1)===a()}),Wr()]})})}function zr(){const{translations:i}=S(),t=x(i,"Quality");return h`
    <media-quality-slider class="vds-quality-slider vds-slider" aria-label=${t}>
      ${Se()}${xe()}
    </media-quality-slider>
  `}function Oi({placement:i,portal:t,tooltip:e}){return p(()=>{const{viewType:s}=F(),{translations:a,menuPortal:n,noModal:r,menuGroup:o,smallWhen:l}=S(),u=M(()=>r()?ue(i):l()?null:ue(i)),c=M(()=>!l()&&o()==="bottom"&&s()==="video"?26:0),m=b(!1);ur();function v(){m.set(!0)}function w(){m.set(!1)}const P=h`
      <media-menu-items
        class="vds-settings-menu-items vds-menu-items"
        placement=${p(u)}
        offset=${p(c)}
      >
        ${p(()=>m()?[Br(),Mr(),qr(),Rr()]:null)}
      </media-menu-items>
    `;return h`
      <media-menu class="vds-settings-menu vds-menu" @open=${v} @close=${w}>
        <media-tooltip class="vds-tooltip">
          <media-tooltip-trigger>
            <media-menu-button
              class="vds-menu-button vds-button"
              aria-label=${x(a,"Settings")}
            >
              ${et("menu-settings","vds-rotate-icon")}
            </media-menu-button>
          </media-tooltip-trigger>
          <media-tooltip-content
            class="vds-tooltip-content"
            placement=${ne(e)?p(e):e}
          >
            ${x(a,"Settings")}
          </media-tooltip-content>
        </media-tooltip>
        ${Ai(n,P)}
      </media-menu>
    `})}function fs({orientation:i,tooltip:t}){return p(()=>{const{pointer:e,muted:s,canSetVolume:a}=F();if(e()==="coarse"&&!s())return null;if(!a())return xi({tooltip:t});const n=b(void 0),r=kn(n);return h`
      <div class="vds-volume" ?data-active=${p(r)} ${de(n.set)}>
        ${xi({tooltip:t})}
        <div class="vds-volume-popup">${jr({orientation:i})}</div>
      </div>
    `})}function jr({orientation:i}={}){const{translations:t}=S(),e=x(t,"Volume");return h`
    <media-volume-slider
      class="vds-volume-slider vds-slider"
      aria-label=${e}
      orientation=${Ge(i)}
    >
      <div class="vds-slider-track"></div>
      <div class="vds-slider-track-fill vds-slider-track"></div>
      <media-slider-preview class="vds-slider-preview" no-clamp>
        <media-slider-value class="vds-slider-value"></media-slider-value>
      </media-slider-preview>
      <div class="vds-slider-thumb"></div>
    </media-volume-slider>
  `}function gs(){const i=b(void 0),t=b(0),{thumbnails:e,translations:s,sliderChaptersMinWidth:a,disableTimeSlider:n,seekStep:r,noScrubGesture:o}=S(),l=x(s,"Seek"),u=p(n),c=p(()=>t()<a()),m=p(e);return ui(i,()=>{const v=i();v&&t.set(v.clientWidth)}),h`
    <media-time-slider
      class="vds-time-slider vds-slider"
      aria-label=${l}
      key-step=${p(r)}
      ?disabled=${u}
      ?no-swipe-gesture=${p(o)}
      ${de(i.set)}
    >
      <media-slider-chapters class="vds-slider-chapters" ?disabled=${c}>
        <template>
          <div class="vds-slider-chapter">
            <div class="vds-slider-track"></div>
            <div class="vds-slider-track-fill vds-slider-track"></div>
            <div class="vds-slider-progress vds-slider-track"></div>
          </div>
        </template>
      </media-slider-chapters>
      <div class="vds-slider-thumb"></div>
      <media-slider-preview class="vds-slider-preview">
        <media-slider-thumbnail
          class="vds-slider-thumbnail vds-thumbnail"
          .src=${m}
        ></media-slider-thumbnail>
        <div class="vds-slider-chapter-title" data-part="chapter-title"></div>
        <media-slider-value class="vds-slider-value"></media-slider-value>
      </media-slider-preview>
    </media-time-slider>
  `}function Yr(){return h`
    <div class="vds-time-group">
      ${p(()=>{const{duration:i}=F();return i()?[h`<media-time class="vds-time" type="current"></media-time>`,h`<div class="vds-time-divider">/</div>`,h`<media-time class="vds-time" type="duration"></media-time>`]:null})}
    </div>
  `}function Xr(){return p(()=>{const{live:i,duration:t}=F();return i()?Ei():t()?h`<media-time class="vds-time" type="current" toggle remainder></media-time>`:null})}function Ri(){return p(()=>{const{live:i}=F();return i()?Ei():Yr()})}function Ni(){return p(()=>{const{textTracks:i}=g(),{title:t,started:e}=F(),s=b(null);return zt(i,"chapters",s.set),s()&&(e()||!t())?Fi():h`<media-title class="vds-chapter-title"></media-title>`})}function Fi(){return h`<media-chapter-title class="vds-chapter-title"></media-chapter-title>`}function Jr(){return[ns(),ds(),h`
      <media-controls class="vds-controls">
        <media-controls-group class="vds-controls-group">
          ${[Ci({backward:!0,tooltip:"top start"}),Te({tooltip:"top"}),Ci({tooltip:"top"}),Zr(),gs(),Xr(),fs({orientation:"vertical",tooltip:"top"}),os({tooltip:"top"}),ls(),rs({tooltip:"top"}),to()]}
        </media-controls-group>
      </media-controls>
    `]}function Zr(){return p(()=>{let i=b(void 0),t=b(!1),e=g(),{title:s,started:a,currentTime:n,ended:r}=F(),{translations:o}=S(),l=Tn(i),u=()=>a()||n()>0;const c=()=>{const w=r()?"Replay":u()?"Continue":"Play";return`${Y(o,w)}: ${s()}`};d(()=>{l()&&document.activeElement===document.body&&e.player.el?.focus({preventScroll:!0})});function m(){const w=i(),P=!!w&&!l()&&w.clientWidth<w.children[0].clientWidth;w&&Ne(w,"vds-marquee",P),t.set(P)}function v(){return h`
        <span class="vds-title-text">
          ${p(c)}${p(()=>u()?Fi():null)}
        </span>
      `}return ui(i,m),s()?h`
          <span class="vds-title" title=${p(c)} ${de(i.set)}>
            ${[v(),p(()=>t()&&!l()?v():null)]}
          </span>
        `:ft()})}function to(){const i="top end";return[Li({tooltip:"top",placement:i,portal:!0}),Oi({tooltip:"top end",placement:i,portal:!0})]}function Bi({name:i,class:t,state:e,paths:s,viewBox:a="0 0 32 32"}){return h`<svg
    class="${"vds-icon"+(t?` ${t}`:"")}"
    viewBox="${a}"
    fill="none"
    aria-hidden="true"
    focusable="false"
    xmlns="http://www.w3.org/2000/svg"
    data-icon=${Ge(i??e)}
  >
    ${E(s)?Ma(s):p(s)}
  </svg>`}class eo{#t={};#e=!1;slots;constructor(t){this.slots=new ki(t,this.#i.bind(this))}connect(){this.slots.connect()}load(){this.loadIcons().then(t=>{this.#t=t,this.#e=!0,this.#i()})}*#s(){for(const t of Object.keys(this.#t)){const e=`${t}-icon`;for(const s of this.slots.elements)s.name===e&&(yield{icon:this.#t[t],slot:s})}}#i(){if(this.#e)for(const{icon:t,slot:e}of this.#s())this.slots.assign(t,e)}}class Hi extends eo{connect(){super.connect();const{player:t}=g();if(!t.el)return;let e,s=new IntersectionObserver(a=>{a[0]?.isIntersecting&&(e?.(),e=void 0,this.load())});s.observe(t.el),e=A(()=>s.disconnect())}}class Gi extends Hi{async loadIcons(){const t=(await import("./vidstack-Cw0Hc52B.js")).icons,e={};for(const s of Object.keys(t))e[s]=Bi({name:s,paths:t[s]});return e}}class so extends T($e,er){static tagName="media-audio-layout";static attrs={smallWhen:{converter(t){return t!=="never"&&!!t}}};#t;#e=b(!1);onSetup(){this.forwardKeepAlive=!1,this.#t=g(),this.classList.add("vds-audio-layout"),this.#a()}onConnect(){Ti("audio",()=>this.isMatch),this.#i()}render(){return p(this.#s.bind(this))}#s(){return this.isMatch?Jr():null}#i(){const{menuPortal:t}=S();d(()=>{if(!this.isMatch)return;const e=Mi(this,this.menuContainer,"vds-audio-layout",()=>this.isSmallLayout),s=e?[this,e]:[this];return(this.$props.customIcons()?new as(s):new Gi(s)).connect(),t.set(e),()=>{e.remove(),t.set(null)}})}#a(){const{pointer:t}=this.#t.$state;d(()=>{t()==="coarse"&&d(this.#n.bind(this))})}#n(){if(!this.#e()){H(this,"pointerdown",this.#r.bind(this),{capture:!0});return}H(this,"pointerdown",t=>t.stopPropagation()),H(window,"pointerdown",this.#o.bind(this))}#r(t){const{target:e}=t;wt(e)&&e.closest(".vds-time-slider")&&(t.stopImmediatePropagation(),this.setAttribute("data-scrubbing",""),this.#e.set(!0))}#o(){this.#e.set(!1),this.removeAttribute("data-scrubbing")}}class io extends is{static props={...super.props,when:({viewType:t})=>t==="video",smallWhen:({width:t,height:e})=>t<576||e<380}}function Ki(){return p(()=>{const i=g(),{noKeyboardAnimations:t,userPrefersKeyboardAnimations:e}=S();if(M(()=>t()||!e())())return null;const a=b(!1),{lastKeyboardAction:n}=i.$state;d(()=>{a.set(!!n());const m=setTimeout(()=>a.set(!1),500);return()=>{a.set(!1),window.clearTimeout(m)}});const r=M(()=>{const m=n()?.action;return m&&a()?Nt(m):null}),o=M(()=>`vds-kb-action${a()?"":" hidden"}`),l=M(ao),u=M(()=>{const m=no();return m?wn(m):null});function c(){const m=u();return m?h`
        <div class="vds-kb-bezel">
          <div class="vds-kb-icon">${m}</div>
        </div>
      `:null}return h`
      <div class=${p(o)} data-action=${p(r)}>
        <div class="vds-kb-text-wrapper">
          <div class="vds-kb-text">${p(l)}</div>
        </div>
        ${p(()=>La(n(),c()))}
      </div>
    `})}function ao(){const{$state:i}=g(),t=i.lastKeyboardAction()?.action,e=i.audioGain()??1;switch(t){case"toggleMuted":return i.muted()?"0%":Qi(i.volume(),e);case"volumeUp":case"volumeDown":return Qi(i.volume(),e);default:return""}}function Qi(i,t){return`${Math.round(i*t*100)}%`}function no(){const{$state:i}=g();switch(i.lastKeyboardAction()?.action){case"togglePaused":return i.paused()?"kb-pause-icon":"kb-play-icon";case"toggleMuted":return i.muted()||i.volume()===0?"kb-mute-icon":i.volume()>=.5?"kb-volume-up-icon":"kb-volume-down-icon";case"toggleFullscreen":return`kb-fs-${i.fullscreen()?"enter":"exit"}-icon`;case"togglePictureInPicture":return`kb-pip-${i.pictureInPicture()?"enter":"exit"}-icon`;case"toggleCaptions":return i.hasCaptions()?`kb-cc-${i.textTrack()?"on":"off"}-icon`:null;case"volumeUp":return"kb-volume-up-icon";case"volumeDown":return"kb-volume-down-icon";case"seekForward":return"kb-seek-forward-icon";case"seekBackward":return"kb-seek-backward-icon";default:return null}}function ro(){return[ns(),Wi(),Ee(),Ki(),ds(),h`<div class="vds-scrim"></div>`,h`
      <media-controls class="vds-controls">
        ${[lo(),ft(),h`<media-controls-group class="vds-controls-group"></media-controls-group>`,ft(),h`
            <media-controls-group class="vds-controls-group">
              ${gs()}
            </media-controls-group>
          `,h`
            <media-controls-group class="vds-controls-group">
              ${[Te({tooltip:"top start"}),fs({orientation:"horizontal",tooltip:"top"}),Ri(),Ni(),os({tooltip:"top"}),oo(),rs({tooltip:"top"}),Si({tooltip:"top"}),ls(),ar(),Pi({tooltip:"top end"})]}
            </media-controls-group>
          `]}
      </media-controls>
    `]}function oo(){return p(()=>{const{menuGroup:i}=S();return i()==="bottom"?bs():null})}function lo(){return h`
    <media-controls-group class="vds-controls-group">
      ${p(()=>{const{menuGroup:i}=S();return i()==="top"?[ft(),bs()]:null})}
    </media-controls-group>
  `}function uo(){return[ns(),Wi(),Ee(),ds(),Ki(),h`<div class="vds-scrim"></div>`,h`
      <media-controls class="vds-controls">
        <media-controls-group class="vds-controls-group">
          ${[rs({tooltip:"top start"}),Si({tooltip:"bottom start"}),ft(),os({tooltip:"bottom"}),ls(),bs(),fs({orientation:"vertical",tooltip:"bottom end"})]}
        </media-controls-group>

        ${ft()}

        <media-controls-group class="vds-controls-group" style="pointer-events: none;">
          ${[ft(),Te({tooltip:"top"}),ft()]}
        </media-controls-group>

        ${ft()}

        <media-controls-group class="vds-controls-group">
          ${[Ri(),Ni(),Pi({tooltip:"top end"})]}
        </media-controls-group>

        <media-controls-group class="vds-controls-group">
          ${gs()}
        </media-controls-group>
      </media-controls>
    `,ho()]}function co(){return h`
    <div class="vds-load-container">
      ${[Ee(),Te({tooltip:"top"})]}
    </div>
  `}function ho(){return p(()=>{const{duration:i}=F();return i()===0?null:h`
      <div class="vds-start-duration">
        <media-time class="vds-time" type="duration"></media-time>
      </div>
    `})}function Ee(){return h`
    <div class="vds-buffering-indicator">
      <media-spinner class="vds-buffering-spinner"></media-spinner>
    </div>
  `}function bs(){const{menuGroup:i,smallWhen:t}=S(),e=()=>i()==="top"||t()?"bottom":"top",s=M(()=>`${e()} ${i()==="top"?"end":"center"}`),a=M(()=>`${e()} end`);return[Li({tooltip:s,placement:a,portal:!0}),Oi({tooltip:s,placement:a,portal:!0})]}function Wi(){return p(()=>{const{noGestures:i}=S();return i()?null:h`
      <div class="vds-gestures">
        <media-gesture class="vds-gesture" event="pointerup" action="toggle:paused"></media-gesture>
        <media-gesture
          class="vds-gesture"
          event="pointerup"
          action="toggle:controls"
        ></media-gesture>
        <media-gesture
          class="vds-gesture"
          event="dblpointerup"
          action="toggle:fullscreen"
        ></media-gesture>
        <media-gesture class="vds-gesture" event="dblpointerup" action="seek:-10"></media-gesture>
        <media-gesture class="vds-gesture" event="dblpointerup" action="seek:10"></media-gesture>
      </div>
    `})}class po extends T($e,io){static tagName="media-video-layout";static attrs={smallWhen:{converter(t){return t!=="never"&&!!t}}};#t;onSetup(){this.forwardKeepAlive=!1,this.#t=g(),this.classList.add("vds-video-layout")}onConnect(){Ti("video",()=>this.isMatch),this.#e()}render(){return p(this.#s.bind(this))}#e(){const{menuPortal:t}=S();d(()=>{if(!this.isMatch)return;const e=Mi(this,this.menuContainer,"vds-video-layout",()=>this.isSmallLayout),s=e?[this,e]:[this];return(this.$props.customIcons()?new as(s):new Gi(s)).connect(),t.set(e),()=>{e.remove(),t.set(null)}})}#s(){const{load:t}=this.#t.$props,{canLoad:e,streamType:s,nativeControls:a}=this.#t.$state;return!a()&&this.isMatch?t()==="play"&&!e()?co():s()==="unknown"?Ee():this.isSmallLayout?uo():ro():null}}const Ui=dt();function R(){return O(Ui)}const mo={clickToPlay:!0,clickToFullscreen:!0,controls:["play-large","play","progress","current-time","mute+volume","captions","settings","pip","airplay","fullscreen"],customIcons:!1,displayDuration:!1,download:null,markers:null,invertTime:!0,thumbnails:null,toggleTime:!0,translations:null,seekTime:10,speed:[.5,.75,1,1.25,1.5,1.75,2,4]};class fo extends k{static props=mo;#t;onSetup(){this.#t=g(),J(Ui,{...this.$props,previewTime:b(0)})}}function go(i,t){const{canAirPlay:e,canFullscreen:s,canPictureInPicture:a,controlsHidden:n,currentTime:r,fullscreen:o,hasCaptions:l,isAirPlayConnected:u,paused:c,pictureInPicture:m,playing:v,pointer:w,poster:P,textTrack:I,viewType:q,waiting:Z}=t.$state;i.classList.add("plyr"),i.classList.add("plyr--full-ui");const Vt={"plyr--airplay-active":u,"plyr--airplay-supported":e,"plyr--fullscreen-active":o,"plyr--fullscreen-enabled":s,"plyr--hide-controls":n,"plyr--is-touch":()=>w()==="coarse","plyr--loading":Z,"plyr--paused":c,"plyr--pip-active":m,"plyr--pip-enabled":a,"plyr--playing":v,"plyr__poster-enabled":P,"plyr--stopped":()=>c()&&r()===0,"plyr--captions-active":I,"plyr--captions-enabled":l},kt=Da();for(const nt of Object.keys(Vt))kt.add(d(()=>void i.classList.toggle(nt,!!Vt[nt]())));return kt.add(d(()=>{const nt=`plyr--${q()}`;return i.classList.add(nt),()=>i.classList.remove(nt)}),d(()=>{const{$provider:nt}=t,St=nt()?.type,xt=`plyr--${bo(St)?"html5":St}`;return i.classList.toggle(xt,!!St),()=>i.classList.remove(xt)})),()=>kt.empty()}function bo(i){return i==="audio"||i==="video"}class yo extends Hi{async loadIcons(){const t=(await import("./vidstack-Dge3KT8k.js")).icons,e={};for(const s of Object.keys(t))e[s]=Bi({name:s,paths:t[s],viewBox:"0 0 18 18"});return e}}function Ae(i,t){return i()?.[t]??t}function vo(){return ko()}function $o(){const i=g(),{load:t}=i.$props,{canLoad:e}=i.$state;return M(()=>t()==="play"&&!e())()?[zi(),ji()]:[wo(),To(),ji(),So(),No(),Fo()]}function zi(){const i=g(),{translations:t}=R(),{title:e}=i.$state,s=p(()=>`${Ae(t,"Play")}, ${e()}`);return h`
    <media-play-button
      class="plyr__control plyr__control--overlaid"
      aria-label=${s}
      data-plyr="play"
    >
      <slot name="play-icon"></slot>
    </button>
  `}function wo(){const{controls:i}=R();return p(()=>i().includes("play-large")?zi():null)}function To(){const{thumbnails:i,previewTime:t}=R();return h`
    <media-thumbnail
      .src=${p(i)}
      class="plyr__preview-scrubbing"
      time=${p(()=>t())}
    ></media-thumbnail>
  `}function ji(){const i=g(),{poster:t}=i.$state,e=p(()=>`background-image: url("${t()}");`);return h`<div class="plyr__poster" style=${e}></div>`}function ko(){const i=new Set(["captions","pip","airplay","fullscreen"]),{controls:t}=R(),e=p(()=>t().filter(s=>!i.has(s)).map(Yi));return h`<div class="plyr__controls">${e}</div>`}function So(){const{controls:i}=R(),t=p(()=>i().map(Yi));return h`<div class="plyr__controls">${t}</div>`}function Yi(i){switch(i){case"airplay":return xo();case"captions":return Po();case"current-time":return Oo();case"download":return Ro();case"duration":return Xi();case"fast-forward":return qo();case"fullscreen":return Co();case"mute":case"volume":case"mute+volume":return Io(i);case"pip":return Ao();case"play":return Mo();case"progress":return _o();case"restart":return Lo();case"rewind":return Do();case"settings":return Bo();default:return null}}function xo(){const{translations:i}=R();return h`
    <media-airplay-button class="plyr__controls__item plyr__control" data-plyr="airplay">
      <slot name="airplay-icon"></slot>
      <span class="plyr__tooltip">${N(i,"AirPlay")}</span>
    </media-airplay-button>
  `}function Po(){const{translations:i}=R(),t=N(i,"Disable captions"),e=N(i,"Enable captions");return h`
    <media-caption-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="captions"
    >
      <slot name="captions-on-icon" data-class="icon--pressed"></slot>
      <slot name="captions-off-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${t}</span>
      <span class="label--not-pressed plyr__tooltip">${e}</span>
    </media-caption-button>
  `}function Co(){const{translations:i}=R(),t=N(i,"Enter Fullscreen"),e=N(i,"Exit Fullscreen");return h`
    <media-fullscreen-button
      class="plyr__controls__item plyr__control"
      data-no-label
      data-plyr="fullscreen"
    >
      <slot name="enter-fullscreen-icon" data-class="icon--pressed"></slot>
      <slot name="exit-fullscreen-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-fullscreen-button>
  `}function Eo(){const{translations:i}=R(),t=N(i,"Mute"),e=N(i,"Unmute");return h`
    <media-mute-button class="plyr__control" data-no-label data-plyr="mute">
      <slot name="muted-icon" data-class="icon--pressed"></slot>
      <slot name="volume-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-mute-button>
  `}function Ao(){const{translations:i}=R(),t=N(i,"Enter PiP"),e=N(i,"Exit PiP");return h`
    <media-pip-button class="plyr__controls__item plyr__control" data-no-label data-plyr="pip">
      <slot name="pip-icon"></slot>
      <slot name="enter-pip-icon" data-class="icon--pressed"></slot>
      <slot name="exit-pip-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-pip-button>
  `}function Mo(){const{translations:i}=R(),t=N(i,"Play"),e=N(i,"Pause");return h`
    <media-play-button class="plyr__controls__item plyr__control" data-no-label data-plyr="play">
      <slot name="pause-icon" data-class="icon--pressed"></slot>
      <slot name="play-icon" data-class="icon--not-pressed"></slot>
      <span class="label--pressed plyr__tooltip">${e}</span>
      <span class="label--not-pressed plyr__tooltip">${t}</span>
    </media-play-button>
  `}function Lo(){const{translations:i}=R(),{remote:t}=g(),e=N(i,"Restart");function s(a){oe(a)&&!Wt(a)||t.seek(0,a)}return h`
    <button
      type="button"
      class="plyr__control"
      data-plyr="restart"
      @pointerup=${s}
      @keydown=${s}
    >
      <slot name="restart-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </button>
  `}function Do(){const{translations:i,seekTime:t}=R(),e=p(()=>`${Ae(i,"Rewind")} ${t()}s`),s=p(()=>-1*t());return h`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${s}
      data-no-label
      data-plyr="rewind"
    >
      <slot name="rewind-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </media-seek-button>
  `}function qo(){const{translations:i,seekTime:t}=R(),e=p(()=>`${Ae(i,"Forward")} ${t()}s`),s=p(t);return h`
    <media-seek-button
      class="plyr__controls__item plyr__control"
      seconds=${s}
      data-no-label
      data-plyr="fast-forward"
    >
      <slot name="fast-forward-icon"></slot>
      <span class="plyr__tooltip">${e}</span>
    </media-seek-button>
  `}function _o(){let i=g(),{duration:t,viewType:e}=i.$state,{translations:s,markers:a,thumbnails:n,seekTime:r,previewTime:o}=R(),l=N(s,"Seek"),u=b(null),c=p(()=>{const q=u();return q?h`<span class="plyr__progress__marker-label">${Fs(q.label)}<br /></span>`:null});function m(q){o.set(q.detail)}function v(){u.set(this)}function w(){u.set(null)}function P(){const q=n(),Z=p(()=>e()==="audio");return q?h`
          <media-slider-preview class="plyr__slider__preview" ?no-clamp=${Z}>
            <media-slider-thumbnail .src=${q} class="plyr__slider__preview__thumbnail">
              <span class="plyr__slider__preview__time-container">
                ${c}
                <media-slider-value class="plyr__slider__preview__time"></media-slider-value>
              </span>
            </media-slider-thumbnail>
          </media-slider-preview>
        `:h`
          <span class="plyr__tooltip">
            ${c}
            <media-slider-value></media-slider-value>
          </span>
        `}function I(){const q=t();return Number.isFinite(q)?a()?.map(Z=>h`
        <span
          class="plyr__progress__marker"
          @mouseenter=${v.bind(Z)}
          @mouseleave=${w}
          style=${`left: ${Z.time/q*100}%;`}
        ></span>
      `):null}return h`
    <div class="plyr__controls__item plyr__progress__container">
      <div class="plyr__progress">
        <media-time-slider
          class="plyr__slider"
          data-plyr="seek"
          pause-while-dragging
          key-step=${p(r)}
          aria-label=${l}
          @media-seeking-request=${m}
        >
          <div class="plyr__slider__track"></div>
          <div class="plyr__slider__thumb"></div>
          <div class="plyr__slider__buffer"></div>
          ${p(P)}${p(I)}
        </media-time-slider>
      </div>
    </div>
  `}function Io(i){return p(()=>{const t=i==="mute"||i==="mute+volume",e=i==="volume"||i==="mute+volume";return h`
      <div class="plyr__controls__item plyr__volume">
        ${[t?Eo():null,e?Vo():null]}
      </div>
    `})}function Vo(){const{translations:i}=R(),t=N(i,"Volume");return h`
    <media-volume-slider class="plyr__slider" data-plyr="volume" aria-label=${t}>
      <div class="plyr__slider__track"></div>
      <div class="plyr__slider__thumb"></div>
    </media-volume-slider>
  `}function Oo(){const i=g(),{translations:t,invertTime:e,toggleTime:s,displayDuration:a}=R(),n=b(f(e));function r(l){!s()||a()||oe(l)&&!Wt(l)||n.set(u=>!u)}function o(){return p(()=>a()?Xi():null)}return p(()=>{const{streamType:l}=i.$state,u=N(t,"LIVE"),c=N(t,"Current time"),m=p(()=>!a()&&n());return l()==="live"||l()==="ll-live"?h`
          <media-live-button
            class="plyr__controls__item plyr__control plyr__live-button"
            data-plyr="live"
          >
            <span class="plyr__live-button__text">${u}</span>
          </media-live-button>
        `:h`
          <media-time
            type="current"
            class="plyr__controls__item plyr__time plyr__time--current"
            tabindex="0"
            role="timer"
            aria-label=${c}
            ?remainder=${m}
            @pointerup=${r}
            @keydown=${r}
          ></media-time>
          ${o()}
        `})}function Xi(){const{translations:i}=R(),t=N(i,"Duration");return h`
    <media-time
      type="duration"
      class="plyr__controls__item plyr__time plyr__time--duration"
      role="timer"
      tabindex="0"
      aria-label=${t}
    ></media-time>
  `}function Ro(){return p(()=>{const i=g(),{translations:t,download:e}=R(),{title:s,source:a}=i.$state,n=a(),r=e(),o=Ws({title:s(),src:n,download:r}),l=N(t,"Download");return E(o?.url)?h`
          <a
            class="plyr__controls__item plyr__control"
            href=${Us(o.url,{download:o.name})}
            download=${o.name}
            target="_blank"
          >
            <slot name="download-icon" />
            <span class="plyr__tooltip">${l}</span>
          </a>
        `:null})}function No(){return p(()=>{const{clickToPlay:i,clickToFullscreen:t}=R();return[i()?h`
            <media-gesture
              class="plyr__gesture"
              event="pointerup"
              action="toggle:paused"
            ></media-gesture>
          `:null,t()?h`
            <media-gesture
              class="plyr__gesture"
              event="dblpointerup"
              action="toggle:fullscreen"
            ></media-gesture>
          `:null]})}function Fo(){const i=g(),t=b(void 0),e=p(()=>Fs(t()?.text));return d(()=>{const s=i.$state.textTrack();if(!s)return;function a(){t.set(s?.activeCues[0])}return a(),H(s,"cue-change",a)}),h`
    <div class="plyr__captions" dir="auto">
      <span class="plyr__caption">${e}</span>
    </div>
  `}function Bo(){const{translations:i}=R(),t=N(i,"Settings");return h`
    <div class="plyr__controls__item plyr__menu">
      <media-menu>
        <media-menu-button class="plyr__control" data-plyr="settings">
          <slot name="settings-icon" />
          <span class="plyr__tooltip">${t}</span>
        </media-menu-button>
        <media-menu-items class="plyr__menu__container" placement="top end">
          <div><div>${[Go(),Uo(),jo(),Qo()]}</div></div>
        </media-menu-items>
      </media-menu>
    </div>
  `}function Me({label:i,children:t}){const e=b(!1);return h`
    <media-menu @open=${()=>e.set(!0)} @close=${()=>e.set(!1)}>
      ${Ho({label:i,open:e})}
      <media-menu-items>${t}</media-menu-items>
    </media-menu>
  `}function Ho({open:i,label:t}){const{translations:e}=R(),s=p(()=>`plyr__control plyr__control--${i()?"back":"forward"}`);function a(){const n=N(e,"Go back to previous menu");return p(()=>i()?h`<span class="plyr__sr-only">${n}</span>`:null)}return h`
    <media-menu-button class=${s} data-plyr="settings">
      <span class="plyr__menu__label" aria-hidden=${Xo(i)}>
        ${N(e,t)}
      </span>
      <span class="plyr__menu__value" data-part="hint"></span>
      ${a()}
    </media-menu-button>
  `}function Go(){return Me({label:"Audio",children:Ko()})}function Ko(){const{translations:i}=R();return h`
    <media-audio-radio-group empty-label=${N(i,"Default")}>
      <template>
        <media-radio class="plyr__control" data-plyr="audio">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-audio-radio-group>
  `}function Qo(){return Me({label:"Speed",children:Wo()})}function Wo(){const{translations:i,speed:t}=R();return h`
    <media-speed-radio-group .rates=${t} normal-label=${N(i,"Normal")}>
      <template>
        <media-radio class="plyr__control" data-plyr="speed">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-speed-radio-group>
  `}function Uo(){return Me({label:"Captions",children:zo()})}function zo(){const{translations:i}=R();return h`
    <media-captions-radio-group off-label=${N(i,"Disabled")}>
      <template>
        <media-radio class="plyr__control" data-plyr="captions">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-captions-radio-group>
  `}function jo(){return Me({label:"Quality",children:Yo()})}function Yo(){const{translations:i}=R();return h`
    <media-quality-radio-group auto-label=${N(i,"Auto")}>
      <template>
        <media-radio class="plyr__control" data-plyr="quality">
          <span data-part="label"></span>
        </media-radio>
      </template>
    </media-quality-radio-group>
  `}function Xo(i){return p(()=>i()?"true":"false")}function N(i,t){return p(()=>Ae(i,t))}class Jo extends T($e,fo){static tagName="media-plyr-layout";#t;onSetup(){this.forwardKeepAlive=!1,this.#t=g()}onConnect(){this.#t.player.el?.setAttribute("data-layout","plyr"),A(()=>this.#t.player.el?.removeAttribute("data-layout")),go(this,this.#t),d(()=>{this.$props.customIcons()?new as([this]).connect():new yo([this]).connect()})}render(){return p(this.#e.bind(this))}#e(){const{viewType:t}=this.#t.$state;return t()==="audio"?vo():t()==="video"?$o():null}}$(so),$(po),$(Jo);function ys(i,t){const e=String(i),s=e.length;if(s<t){const n=t-s;return`${"0".repeat(n)}${i}`}return e}function Ji(i){const t=Math.trunc(i/3600),e=Math.trunc(i%3600/60),s=Math.trunc(i%60),a=Number((i-Math.trunc(i)).toPrecision(3));return{hours:t,minutes:e,seconds:s,fraction:a}}function Le(i,{padHrs:t=null,padMins:e=null,showHrs:s=!1,showMs:a=!1}={}){const{hours:n,minutes:r,seconds:o,fraction:l}=Ji(i),u=t?ys(n,2):n,c=e||Et(e)&&i>=3600?ys(r,2):r,m=ys(o,2),v=a&&l>0?`.${String(l).replace(/^0?\./,"")}`:"",w=`${c}:${m}${v}`;return n>0||s?`${u}:${w}`:w}function De(i){const t=[],{hours:e,minutes:s,seconds:a}=Ji(i);return e>0&&t.push(`${e} hour`),s>0&&t.push(`${s} min`),(a>0||t.length===0)&&t.push(`${a} sec`),t.join(" ")}class Zo extends k{static props={translations:null};static state=new yt({label:null,busy:!1});#t;#e=!1;onSetup(){this.#t=g()}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),D(t,"role","status"),D(t,"aria-live","polite");const{busy:e}=this.$state;this.setAttributes({"aria-busy":()=>e()?"true":null}),this.#e=!0,d(this.#s.bind(this)),d(this.#r.bind(this)),d(this.#n.bind(this)),d(this.#i.bind(this)),d(this.#a.bind(this)),d(this.#u.bind(this)),d(this.#h.bind(this)),ut(),this.#e=!1}#s(){const{paused:t}=this.#t.$state;this.#d(t()?"Pause":"Play")}#i(){const{fullscreen:t}=this.#t.$state;this.#d(t()?"Enter Fullscreen":"Exit Fullscreen")}#a(){const{pictureInPicture:t}=this.#t.$state;this.#d(t()?"Enter PiP":"Exit PiP")}#n(){const{textTrack:t}=this.#t.$state;this.#d(t()?"Closed-Captions On":"Closed-Captions Off")}#r(){const{muted:t,volume:e,audioGain:s}=this.#t.$state;this.#d(t()||e()===0?"Mute":`${Math.round(e()*(s()??1)*100)}% ${this.#c("Volume")}`)}#o=-1;#l=-1;#u(){const{seeking:t,currentTime:e}=this.#t.$state,s=t();this.#o>0?(window.clearTimeout(this.#l),this.#l=window.setTimeout(()=>{if(!this.scope)return;const a=f(e),n=Math.abs(a-this.#o);if(n>=1){const r=a>=this.#o,o=De(n);this.#d(`${this.#c(r?"Seek Forward":"Seek Backward")} ${o}`)}this.#o=-1,this.#l=-1},300)):s&&(this.#o=f(e))}#c(t){const{translations:e}=this.$props;return e?.()?.[t||""]??t}#h(){const{label:t,busy:e}=this.$state,s=this.#c(t());if(this.#e)return;e.set(!0);const a=window.setTimeout(()=>void e.set(!1),150);return this.el&&y(this.el,"aria-label",s),E(s)&&this.dispatch("change",{detail:s}),()=>window.clearTimeout(a)}#d(t){const{label:e}=this.$state;e.set(t)}}class tl extends T(HTMLElement,Zo){static tagName="media-announcer"}class el extends rt{#t;constructor(t){super(),this.#t=t}onAttach(t){const{$props:e,ariaKeys:s}=g(),a=t.getAttribute("aria-keyshortcuts");if(a){s[this.#t]=a,A(()=>{delete s[this.#t]});return}const n=e.keyShortcuts()[this.#t];if(n){const r=G(n)?n.join(" "):E(n)?n:n?.keys;t.setAttribute("aria-keyshortcuts",G(r)?r.join(" "):r)}}}class X extends rt{static props={disabled:!1};#t;constructor(t){super(),this.#t=t,new lt,t.keyShortcut&&new el(t.keyShortcut)}onSetup(){const{disabled:t}=this.$props;this.setAttributes({"data-pressed":this.#t.isPresssed,"aria-pressed":this.#e.bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){D(t,"tabindex","0"),D(t,"role","button"),D(t,"type","button")}onConnect(t){const e=$t(t,this.#i.bind(this));for(const s of["click","touchstart"])e.add(s,this.#a.bind(this),{passive:!0})}#e(){return ce(this.#t.isPresssed())}#s(t){qa(this.#t.isPresssed)&&this.#t.isPresssed.set(e=>!e)}#i(t){if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(this.#t.onPress??this.#s).call(this,t)}#a(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}}class sl extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=g();const{canAirPlay:t,isAirPlayConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#i.bind(this),"aria-hidden":W(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),vt(t,this.#a.bind(this))}#e(t){this.#t.remote.requestAirPlay(t)}#s(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()!=="disconnected"}#i(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="airplay"&&e()}#a(){const{remotePlaybackState:t}=this.#t.$state;return`AirPlay ${t()}`}}class il extends T(HTMLElement,sl){static tagName="media-airplay-button"}class al extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),keyShortcut:"toggleCaptions",onPress:this.#e.bind(this)})}onSetup(){this.#t=g(),this.setAttributes({"data-active":this.#s.bind(this),"data-supported":()=>!this.#i(),"aria-hidden":W(this.#i.bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),vt(t,"Captions")}#e(t){this.#t.remote.toggleCaptions(t)}#s(){const{textTrack:t}=this.#t.$state,e=t();return!!e&&z(e)}#i(){const{hasCaptions:t}=this.#t.$state;return!t()}}class nl extends T(HTMLElement,al){static tagName="media-caption-button"}class rl extends k{static props={...X.props,target:"prefer-media"};#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),keyShortcut:"toggleFullscreen",onPress:this.#e.bind(this)})}onSetup(){this.#t=g();const{fullscreen:t}=this.#t.$state,e=this.#i.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":W(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),vt(t,"Fullscreen")}#e(t){const e=this.#t.remote,s=this.$props.target();this.#s()?e.exitFullscreen(s,t):e.enterFullscreen(s,t)}#s(){const{fullscreen:t}=this.#t.$state;return t()}#i(){const{canFullscreen:t}=this.#t.$state;return t()}}class ol extends T(HTMLElement,rl){static tagName="media-fullscreen-button"}class ll extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),onPress:this.#e.bind(this)})}onSetup(){this.#t=g();const{canGoogleCast:t,isGoogleCastConnected:e}=this.#t.$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":this.#i.bind(this),"aria-hidden":W(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),vt(t,this.#a.bind(this))}#e(t){this.#t.remote.requestGoogleCast(t)}#s(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="google-cast"&&e()!=="disconnected"}#i(){const{remotePlaybackType:t,remotePlaybackState:e}=this.#t.$state;return t()==="google-cast"&&e()}#a(){const{remotePlaybackState:t}=this.#t.$state;return`Google Cast ${t()}`}}class dl extends T(HTMLElement,ll){static tagName="media-google-cast-button"}class ul extends k{static props={disabled:!1};#t;constructor(){super(),new lt}onSetup(){this.#t=g();const{disabled:t}=this.$props,{live:e,liveEdge:s}=this.#t.$state,a=()=>!e();this.setAttributes({"data-edge":s,"data-hidden":a,"aria-disabled":W(()=>t()||s()),"aria-hidden":W(a)})}onAttach(t){D(t,"tabindex","0"),D(t,"role","button"),D(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){$t(t,this.#e.bind(this))}#e(t){const{disabled:e}=this.$props,{liveEdge:s}=this.#t.$state;e()||s()||this.#t.remote.seekToLiveEdge(t)}}class cl extends T(HTMLElement,ul){static tagName="media-live-button"}class hl extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),keyShortcut:"toggleMuted",onPress:this.#e.bind(this)})}onSetup(){this.#t=g(),this.setAttributes({"data-muted":this.#s.bind(this),"data-state":this.#i.bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),vt(t,"Mute")}#e(t){const e=this.#t.remote;this.#s()?e.unmute(t):e.mute(t)}#s(){const{muted:t,volume:e}=this.#t.$state;return t()||e()===0}#i(){const{muted:t,volume:e}=this.#t.$state,s=e();if(t()||s===0)return"muted";if(s>=.5)return"high";if(s<.5)return"low"}}class pl extends T(HTMLElement,hl){static tagName="media-mute-button"}class ml extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),keyShortcut:"togglePictureInPicture",onPress:this.#e.bind(this)})}onSetup(){this.#t=g();const{pictureInPicture:t}=this.#t.$state,e=this.#i.bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":W(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),vt(t,"PiP")}#e(t){const e=this.#t.remote;this.#s()?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}#s(){const{pictureInPicture:t}=this.#t.$state;return t()}#i(){const{canPictureInPicture:t}=this.#t.$state;return t()}}class fl extends T(HTMLElement,ml){static tagName="media-pip-button"}class gl extends k{static props=X.props;#t;constructor(){super(),new X({isPresssed:this.#s.bind(this),keyShortcut:"togglePaused",onPress:this.#e.bind(this)})}onSetup(){this.#t=g();const{paused:t,ended:e}=this.#t.$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),vt(t,"Play")}#e(t){const e=this.#t.remote;this.#s()?e.pause(t):e.play(t)}#s(){const{paused:t}=this.#t.$state;return!t()}}class bl extends T(HTMLElement,gl){static tagName="media-play-button"}class yl extends k{static props={disabled:!1,seconds:30};#t;constructor(){super(),new lt}onSetup(){this.#t=g();const{seeking:t}=this.#t.$state,{seconds:e}=this.$props,s=this.#e.bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":s,"aria-hidden":W(()=>!s())})}onAttach(t){D(t,"tabindex","0"),D(t,"role","button"),D(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),vt(t,this.#s.bind(this))}onConnect(t){$t(t,this.#i.bind(this))}#e(){const{canSeek:t}=this.#t.$state;return t()}#s(){const{seconds:t}=this.$props;return`Seek ${t()>0?"forward":"backward"} ${t()} seconds`}#i(t){const{seconds:e,disabled:s}=this.$props;if(s())return;const{currentTime:a}=this.#t.$state,n=a()+e();this.#t.remote.seek(n,t)}}class vl extends T(HTMLElement,yl){static tagName="media-seek-button"}class Zi extends k{static props={disabled:!1,defaultPressed:!1};#t=b(!1);get pressed(){return this.#t()}constructor(){super(),new X({isPresssed:this.#t})}}const $l=Zi.prototype;C($l,"pressed");class wl extends T(HTMLElement,Zi){static tagName="media-toggle-button"}class Tl{priority=10;#t=null;#e;#s;constructor(t){this.#e=t}attach(){}canRender(){return!0}detach(){this.#s?.abort(),this.#s=void 0,this.#e.reset(),this.#t=null}changeTrack(t){!t||this.#t===t||(this.#s?.abort(),this.#s=new _(t),t.readyState<2?(this.#e.reset(),this.#s.add("load",()=>this.#i(t),{once:!0})):this.#i(t),this.#s.add("add-cue",e=>{this.#e.addCue(e.detail)}).add("remove-cue",e=>{this.#e.removeCue(e.detail)}),this.#t=t)}#i(t){this.#e.changeTrack({cues:[...t.cues],regions:[...t.regions]})}}class Tt extends k{static props={textDir:"ltr",exampleText:"Captions look like this."};#t;static lib=b(null);onSetup(){this.#t=g(),this.setAttributes({"aria-hidden":W(this.#e.bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){Tt.lib()||import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(e=>Tt.lib.set(e)),d(this.#s.bind(this))}#e(){const{textTrack:t,remotePlaybackState:e,iOSControls:s}=this.#t.$state,a=t();return s()||e()==="connected"||!a||!z(a)}#s(){if(!Tt.lib())return;const{viewType:t}=this.#t.$state;return t()==="audio"?this.#i():this.#o()}#i(){return d(this.#a.bind(this)),this.#c(null),()=>{this.el.textContent=""}}#a(){if(this.#e())return;this.#n();const{textTrack:t}=this.#t.$state;H(t(),"cue-change",this.#n.bind(this)),d(this.#r.bind(this))}#n(){this.el.textContent="",this.#p>=0&&this.#b();const{realCurrentTime:t,textTrack:e}=this.#t.$state,{renderVTTCueString:s}=Tt.lib(),a=f(t),n=f(e).activeCues;for(const r of n){const o=this.#g(),l=this.#y();l.innerHTML=s(r,a),o.append(l),this.el.append(l)}}#r(){const{realCurrentTime:t}=this.#t.$state,{updateTimedVTTCueNodes:e}=Tt.lib();e(this.el,t())}#o(){const{CaptionsRenderer:t}=Tt.lib(),e=new t(this.el),s=new Tl(e);return this.#t.textRenderers.add(s),d(this.#l.bind(this,e)),d(this.#u.bind(this,e)),this.#c(e),()=>{this.el.textContent="",this.#t.textRenderers.remove(s),e.destroy()}}#l(t){t.dir=this.$props.textDir()}#u(t){if(this.#e())return;const{realCurrentTime:e,textTrack:s}=this.#t.$state;t.currentTime=e(),this.#p>=0&&s()?.activeCues[0]&&this.#b()}#c(t){const e=this.#t.player;if(!e)return;const s=this.#h.bind(this,t);H(e,"vds-font-change",s)}#h(t){if(this.#p>=0){this.#m();return}const{textTrack:e}=this.#t.$state;e()?.activeCues[0]?t?.update(!0):this.#d()}#d(){const t=this.#g();y(t,"data-example","");const e=this.#y();y(e,"data-example",""),e.textContent=this.$props.exampleText(),t?.append(e),this.el?.append(t),this.el?.setAttribute("data-example",""),this.#m()}#p=-1;#m(){window.clearTimeout(this.#p),this.#p=window.setTimeout(this.#b.bind(this),2500)}#b(){this.el?.removeAttribute("data-example"),this.el?.querySelector("[data-example]")&&(this.el.textContent=""),this.#p=-1}#g(){const t=document.createElement("div");return y(t,"data-part","cue-display"),t}#y(){const t=document.createElement("div");return y(t,"data-part","cue"),t}}class kl extends T(HTMLElement,Tt){static tagName="media-captions"}class Sl extends k{static props={defaultText:""}}class xl extends T(HTMLElement,Sl){static tagName="media-chapter-title";#t;#e;onSetup(){this.#t=g(),this.#e=b("")}onConnect(){const t=this.#t.textTracks;Ja(t,"chapters",this.#e.set),d(this.#s.bind(this))}#s(){const{defaultText:t}=this.$props;this.textContent=this.#e()||t()}}class Pl extends k{static props={hideDelay:2e3,hideOnMouseLeave:!1};#t;onSetup(){this.#t=g(),d(this.#s.bind(this))}onAttach(t){const{pictureInPicture:e,fullscreen:s}=this.#t.$state;st(t,"pointer-events","none"),D(t,"role","group"),this.setAttributes({"data-visible":this.#i.bind(this),"data-fullscreen":s,"data-pip":e}),d(()=>{this.dispatch("change",{detail:this.#i()})}),d(this.#e.bind(this)),d(()=>{const a=s();for(const n of["top","right","bottom","left"])st(t,`padding-${n}`,a&&`env(safe-area-inset-${n})`)})}#e(){if(!this.el)return;const{nativeControls:t}=this.#t.$state,e=t();y(this.el,"aria-hidden",e?"true":null),st(this.el,"display",e?"none":null)}#s(){const{controls:t}=this.#t.player,{hideDelay:e,hideOnMouseLeave:s}=this.$props;t.defaultDelay=e()===2e3?this.#t.$props.controlsDelay():e(),t.hideOnMouseLeave=s()}#i(){const{controlsVisible:t}=this.#t.$state;return t()}}class Cl extends T(HTMLElement,Pl){static tagName="media-controls"}class El extends k{onAttach(t){t.style.pointerEvents||st(t,"pointer-events","auto")}}class Al extends T(HTMLElement,El){static tagName="media-controls-group"}class Ml extends k{static props={disabled:!1,event:void 0,action:void 0};#t;#e=null;onSetup(){this.#t=g();const{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){this.#e=this.#t.player.el?.querySelector("[data-media-provider]"),d(this.#s.bind(this))}#s(){let t=this.$props.event(),e=this.$props.disabled();!this.#e||!t||e||(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),(t==="pointerup"||t==="pointerdown")&&this.#t.$state.pointer()==="coarse"&&(t=t==="pointerup"?"touchend":"touchstart"),H(this.#e,t,this.#n.bind(this),{passive:!1}))}#i=0;#a=-1;#n(t){if(this.$props.disabled()||Bs(t)&&(t.button!==0||this.#t.activeMenu)||re(t)&&this.#t.activeMenu||Ye(t)||!this.#o(t))return;if(t.MEDIA_GESTURE=!0,t.preventDefault(),!f(this.$props.event)?.startsWith("dbl"))this.#i===0&&setTimeout(()=>{this.#i===1&&this.#r(t)},250);else if(this.#i===1){queueMicrotask(()=>this.#r(t)),clearTimeout(this.#a),this.#i=0;return}this.#i===0&&(this.#a=window.setTimeout(()=>{this.#i=0},275)),this.#i++}#r(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{this.#l()&&this.#u(f(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}#o(t){if(!this.el)return!1;if(Bs(t)||_a(t)||re(t)){const e=re(t)?t.changedTouches[0]??t.touches[0]:void 0,s=e?.clientX??t.clientX,a=e?.clientY??t.clientY,n=this.el.getBoundingClientRect(),r=a>=n.top&&a<=n.bottom&&s>=n.left&&s<=n.right;return t.type.includes("leave")?!r:r}return!0}#l(){const t=this.#t.player.el.querySelectorAll("[data-media-gesture][data-triggered]");return Array.from(t).sort((e,s)=>+getComputedStyle(s).zIndex-+getComputedStyle(e).zIndex)[0]===this.el}#u(t,e){if(!t)return;const s=new U("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(s),s.defaultPrevented)return;const[a,n]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?this.#t.remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?this.#t.remote.seek(f(this.#t.$state.currentTime)+(+n||0),e):this.#t.remote[Ia(a)](e),this.dispatch("trigger",{detail:t,trigger:e})}}class Ll extends T(HTMLElement,Ml){static tagName="media-gesture"}class Dl extends k{static props={when:!1}}class ql extends T(HTMLElement,Dl){static tagName="media-layout";#t;onSetup(){this.#t=g()}onConnect(){d(this.#e.bind(this))}#e(){const t=this.firstElementChild,e=t?.localName==="template",s=this.$props.when();if(!(Rs(s)?s:M(()=>s(this.#t.player.state))())){e?(this.textContent="",this.appendChild(t)):wt(t)&&(t.style.display="none");return}e?this.append(t.content.cloneNode(!0)):wt(t)&&(t.style.display="")}}const Q=dt(),vs=dt();class qt extends rt{#t=new Set;#e=b("");#s=null;onValueChange;get values(){return Array.from(this.#t).map(t=>t.value())}get value(){return this.#e()}set value(t){this.#r(t)}onSetup(){J(vs,{add:this.#i.bind(this),remove:this.#a.bind(this)})}onAttach(t){tt(Q)||D(t,"role","radiogroup"),this.setAttributes({value:this.#e})}onDestroy(){this.#t.clear()}#i(t){this.#t.has(t)||(this.#t.add(t),t.onCheck=this.#n,t.check(t.value()===this.#e()))}#a(t){t.onCheck=null,this.#t.delete(t)}#n=this.#r.bind(this);#r(t,e){const s=f(this.#e);if(!t||t===s)return;const a=this.#o(s),n=this.#o(t);a?.check(!1,e),n?.check(!0,e),this.#e.set(t),this.onValueChange?.(t,e)}#o(t){for(const e of this.#t)if(t===f(e.value))return e;return null}}const _l=[1,1.25,1.5,1.75,2,2.5,3,4];class ta extends k{static props={normalLabel:"Disabled",gains:_l};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{gains:t}=this.$props,{canSetAudioGain:e}=this.#t.$state;return!e()||t().length===0}constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=g(),tt(Q)&&(this.#e=O(Q))}onConnect(t){d(this.#i.bind(this)),d(this.#a.bind(this)),d(this.#n.bind(this))}getOptions(){const{gains:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1||s===null?e:String(s*100)+"%",value:s.toString()}))}#i(){this.#s.value=this.#r()}#a(){const{normalLabel:t}=this.$props,{audioGain:e}=this.#t.$state,s=e();this.#e?.hint.set(s===1||s==null?t():String(s*100)+"%")}#n(){this.#e?.disable(this.disabled)}#r(){const{audioGain:t}=this.#t.$state;return t()?.toString()??"1"}#o(t,e){if(this.disabled)return;const s=+t;this.#t.remote.changeAudioGain(s,e),this.dispatch("change",{detail:s,trigger:e})}}const $s=ta.prototype;C($s,"value"),C($s,"disabled"),B($s,"getOptions");function Bt(i,t){mt(()=>{if(!i.connectScope)return;const e=i.querySelector("template");e&&d(()=>{const s=i.getOptions();Xe(e,s.length,(a,n)=>{const{label:r,value:o}=s[n],l=a.querySelector('[data-part="label"]');a.setAttribute("value",o),l&&(E(r)?l.textContent=r:d(()=>{l.textContent=r()})),t?.(a,s[n],n)})})})}class Il extends T(HTMLElement,ta){static tagName="media-audio-gain-radio-group";onConnect(){Bt(this)}}class ea extends k{static props={emptyLabel:"Default"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{audioTracks:t}=this.#e.$state;return t().length<=1}constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#e=g(),tt(Q)&&(this.#t=O(Q))}onConnect(t){d(this.#i.bind(this)),d(this.#n.bind(this)),d(this.#a.bind(this))}getOptions(){const{audioTracks:t}=this.#e.$state;return t().map(e=>({track:e,label:e.label,value:e.label.toLowerCase()}))}#i(){this.#s.value=this.#r()}#a(){const{emptyLabel:t}=this.$props,{audioTrack:e}=this.#e.$state,s=e();this.#t?.hint.set(s?.label??t())}#n(){this.#t?.disable(this.disabled)}#r(){const{audioTrack:t}=this.#e.$state,e=t();return e?e.label.toLowerCase():""}#o(t,e){if(this.disabled)return;const s=this.#e.audioTracks.toArray().findIndex(a=>a.label.toLowerCase()===t);if(s>=0){const a=this.#e.audioTracks[s];this.#e.remote.changeAudioTrack(s,e),this.dispatch("change",{detail:a,trigger:e})}}}const ws=ea.prototype;C(ws,"value"),C(ws,"disabled"),B(ws,"getOptions");class Vl extends T(HTMLElement,ea){static tagName="media-audio-radio-group";onConnect(){Bt(this)}}class sa extends k{static props={offLabel:"Off"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{hasCaptions:t}=this.#t.$state;return!t()}constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=g(),tt(Q)&&(this.#e=O(Q))}onConnect(t){super.onConnect?.(t),d(this.#i.bind(this)),d(this.#n.bind(this)),d(this.#a.bind(this))}getOptions(){const{offLabel:t}=this.$props,{textTracks:e}=this.#t.$state;return[{value:"off",label:t},...e().filter(z).map(s=>({track:s,label:s.label,value:this.#l(s)}))]}#i(){this.#s.value=this.#r()}#a(){const{offLabel:t}=this.$props,{textTrack:e}=this.#t.$state,s=e();this.#e?.hint.set(s&&z(s)&&s.mode==="showing"?s.label:t())}#n(){this.#e?.disable(this.disabled)}#r(){const{textTrack:t}=this.#t.$state,e=t();return e&&z(e)&&e.mode==="showing"?this.#l(e):"off"}#o(t,e){if(this.disabled)return;if(t==="off"){const a=this.#t.textTracks.selected;if(a){const n=this.#t.textTracks.indexOf(a);this.#t.remote.changeTextTrackMode(n,"disabled",e),this.dispatch("change",{detail:null,trigger:e})}return}const s=this.#t.textTracks.toArray().findIndex(a=>this.#l(a)===t);if(s>=0){const a=this.#t.textTracks[s];this.#t.remote.changeTextTrackMode(s,"showing",e),this.dispatch("change",{detail:a,trigger:e})}}#l(t){return t.id+":"+t.kind+"-"+t.label.toLowerCase()}}const Ts=sa.prototype;C(Ts,"value"),C(Ts,"disabled"),B(Ts,"getOptions");class Ol extends T(HTMLElement,sa){static tagName="media-captions-radio-group";onConnect(){Bt(this)}}var Rl=Object.defineProperty,Nl=Object.getOwnPropertyDescriptor,ks=(i,t,e,s)=>{for(var a=Nl(t,e),n=i.length-1,r;n>=0;n--)(r=i[n])&&(a=r(t,e,a)||a);return a&&Rl(t,e,a),a};class qe extends k{static props={thumbnails:null};#t;#e;#s;#i=b(null);#a=b([]);get value(){return this.#s.value}get disabled(){return!this.#a()?.length}constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#c.bind(this)}onSetup(){this.#t=g(),tt(Q)&&(this.#e=O(Q));const{thumbnails:t}=this.$props;this.setAttributes({"data-thumbnails":()=>!!t()})}onAttach(t){this.#e?.attachObserver({onOpen:this.#n.bind(this)})}getOptions(){const{seekableStart:t,seekableEnd:e}=this.#t.$state,s=t(),a=e();return this.#a().map((n,r)=>({cue:n,value:r.toString(),label:n.text,startTime:Le(Math.max(0,n.startTime-s)),duration:De(Math.min(a,n.endTime)-Math.max(s,n.startTime))}))}#n(){f(()=>this.#l())}onConnect(t){d(this.#l.bind(this)),d(this.#u.bind(this)),d(this.#r.bind(this)),zt(this.#t.textTracks,"chapters",this.#i.set)}#r(){const t=this.#i();if(!t)return;const e=this.#o.bind(this,t);return e(),new _(t).add("add-cue",e).add("remove-cue",e),()=>{this.#a.set([])}}#o(t){const{seekableStart:e,seekableEnd:s}=this.#t.$state,a=e(),n=s();this.#a.set([...t.cues].filter(r=>r.startTime<=n&&r.endTime>=a))}#l(){if(!this.#e?.expanded())return;if(!this.#i()){this.#s.value="-1";return}const{realCurrentTime:e,seekableStart:s,seekableEnd:a}=this.#t.$state,n=s(),r=a(),o=e(),l=this.#a().findIndex(u=>Za(u,o));this.#s.value=l.toString(),l>=0&&mt(()=>{if(!this.connectScope)return;const u=this.#a()[l],c=this.el.querySelector("[aria-checked='true']"),m=Math.max(n,u.startTime),v=Math.min(r,u.endTime)-m,w=Math.max(0,o-m)/v*100;c&&st(c,"--progress",K(w,3)+"%")})}#u(){this.#e?.disable(this.disabled)}#c(t,e){if(this.disabled||!e)return;const s=+t,a=this.#a(),{clipStartTime:n}=this.#t.$state;ct(s)&&a?.[s]&&(this.#s.value=s.toString(),this.#t.remote.seek(a[s].startTime-n(),e),this.dispatch("change",{detail:a[s],trigger:e}))}}ks([C],qe.prototype,"value"),ks([C],qe.prototype,"disabled"),ks([B],qe.prototype,"getOptions");class Fl extends T(HTMLElement,qe){static tagName="media-chapters-radio-group";onConnect(){Bt(this,(t,e)=>{const{cue:s,startTime:a,duration:n}=e,r=t.querySelector(".vds-thumbnail,media-thumbnail"),o=t.querySelector('[data-part="start-time"]'),l=t.querySelector('[data-part="duration"]');o&&(o.textContent=a),l&&(l.textContent=n),r&&(r.setAttribute("time",s.startTime+""),d(()=>{const u=this.$props.thumbnails();"src"in r?r.src=u:E(u)&&r.setAttribute("src",u)}))})}}class Ss extends k{static props={disabled:!1};#t;#e=b(null);get expanded(){return this.#t?.expanded()??!1}constructor(){super(),new lt}onSetup(){this.#t=O(Q)}onAttach(t){this.#t.attachMenuButton(this),d(this.#s.bind(this)),D(t,"type","button")}onConnect(t){d(this.#i.bind(this)),this.#a();const e=new MutationObserver(this.#a.bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),A(()=>e.disconnect()),$t(t,s=>{this.dispatch("select",{trigger:s})})}#s(){this.#t.disableMenuButton(this.$props.disabled())}#i(){const t=this.#e();t&&d(()=>{const e=this.#t.hint();e&&(t.textContent=e)})}#a(){const t=this.el?.querySelector('[data-part="hint"]');this.#e.set(t??null)}}const Bl=Ss.prototype;C(Bl,"expanded");class Hl extends T(HTMLElement,Ss){static tagName="media-menu-button"}class ia extends rt{#t;constructor(t){super(),this.#t=t,d(this.#e.bind(this))}onDestroy(){this.#a?.(),this.#a=null}#e(){const t=this.#t.trigger();if(!t){this.hide();return}const e=this.show.bind(this),s=this.hide.bind(this);this.#t.listen(t,e,s)}#s=-1;#i=-1;#a=null;show(t){this.#n(),window.cancelAnimationFrame(this.#i),this.#i=-1,this.#a?.(),this.#a=null,this.#s=window.setTimeout(()=>{this.#s=-1;const e=this.#t.content();e&&e.style.removeProperty("display"),f(()=>this.#t.onChange(!0,t))},this.#t.showDelay?.()??0)}hide(t){this.#n(),f(()=>this.#t.onChange(!1,t)),this.#i=requestAnimationFrame(()=>{this.#n(),this.#i=-1;const e=this.#t.content();if(e){const s=()=>{e.style.display="none",this.#a=null};if($n(e)){this.#a?.();const n=H(e,"animationend",s,{once:!0});this.#a=n}else s()}})}#n(){window.clearTimeout(this.#s),this.#s=-1}}const xs=dt(),te=dt();function Gl(i,t){const e=Va(i,t);for(const{el:s,top:a,left:n}of e)s.scroll({top:a,left:n,behavior:t.behavior})}function Kl(i,t={}){Gl(i,{scrollMode:"if-needed",block:"center",inline:"center",...t})}const Ql=["a[href]","[tabindex]","input","select","button"].map(i=>`${i}:not([aria-hidden='true'])`).join(","),Wl=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);class Ul{#t=-1;#e=null;#s=[];#i;get items(){return this.#s}constructor(t){this.#i=t}attachMenu(t){H(t,"focus",this.#r.bind(this)),this.#e=t,A(()=>{this.#e=null})}listen(){this.#e&&(this.update(),new _(this.#e).add("keyup",this.#l.bind(this)).add("keydown",this.#u.bind(this)),A(()=>{this.#t=-1,this.#s=[]}))}update(){this.#t=0,this.#s=this.#h()}scroll(t=this.#n()){const e=this.#s[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Kl(e,{behavior:"smooth",boundary:s=>!s.hasAttribute("data-root")})})})}focusActive(t=!0){const e=this.#n();this.#a(e>=0?e:0,t)}#a(t,e=!0){this.#t=t,this.#s[t]?(this.#s[t].focus({preventScroll:!0}),e&&this.scroll(t)):this.#e?.focus({preventScroll:!0})}#n(){return this.#s.findIndex(t=>document.activeElement===t||t.getAttribute("role")==="menuitemradio"&&t.getAttribute("aria-checked")==="true")}#r(){this.#t>=0||(this.update(),this.focusActive())}#o(t){const e=t.target;if(Oa(t)&&e instanceof Element){const s=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!s}return Wl.has(t.key)}#l(t){this.#o(t)&&(t.stopPropagation(),t.preventDefault())}#u(t){if(this.#o(t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":this.#i.closeMenu(t);break;case"Tab":this.#a(this.#c(t.shiftKey?-1:1));break;case"ArrowUp":this.#a(this.#c(-1));break;case"ArrowDown":this.#a(this.#c(1));break;case"Home":case"PageUp":this.#a(0);break;case"End":case"PageDown":this.#a(this.#s.length-1);break}}#c(t){let e=this.#t;do e=(e+t+this.#s.length)%this.#s.length;while(this.#s[e]?.offsetParent===null);return e}#h(){if(!this.#e)return[];const t=this.#e.querySelectorAll(Ql),e=[],s=a=>a.getAttribute("role")==="menu";for(const a of t)wt(a)&&a.offsetParent!==null&&li(this.#e,a,s)&&e.push(a);return e}}var zl=Object.defineProperty,jl=Object.getOwnPropertyDescriptor,ee=(i,t,e,s)=>{for(var a=jl(t,e),n=i.length-1,r;n>=0;n--)(r=i[n])&&(a=r(t,e,a)||a);return a&&zl(t,e,a),a};let Yl=0;class Ht extends k{static props={showDelay:0};#t;#e;#s;#i=b(!1);#a=b(!1);#n=b(null);#r=b(null);#o;#l=new Set;#u=null;#c;#h;#d=!1;#p=b(!1);#m=new Set;get triggerElement(){return this.#n()}get contentElement(){return this.#r()}get isSubmenu(){return!!this.#o}constructor(){super();const{showDelay:t}=this.$props;this.#c=new ia({trigger:this.#n,content:this.#r,showDelay:t,listen:(e,s,a)=>{$t(e,r=>{this.#i()?a(r):s(r)});const n=this.#M();n&&$t(n,r=>{r.stopPropagation(),a(r)})},onChange:this.#T.bind(this)})}onSetup(){this.#t=g();const t=++Yl;this.#e=`media-menu-${t}`,this.#s=`media-menu-button-${t}`,this.#h=new Ul({closeMenu:this.close.bind(this)}),tt(Q)&&(this.#o=O(Q)),this.#b(),this.setAttributes({"data-open":this.#i,"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":this.#P.bind(this)}),J(Q,{button:this.#n,content:this.#r,expanded:this.#i,hint:b(""),submenu:!!this.#o,disable:this.#E.bind(this),attachMenuButton:this.#y.bind(this),attachMenuItems:this.#$.bind(this),attachObserver:this.#w.bind(this),disableMenuButton:this.#x.bind(this),addSubmenu:this.#_.bind(this),onTransitionEvent:e=>{this.#m.add(e),A(()=>{this.#m.delete(e)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){d(this.#g.bind(this)),this.isSubmenu&&this.#o?.addSubmenu(this)}onDestroy(){this.#n.set(null),this.#r.set(null),this.#u=null,this.#m.clear()}#b(){let t=-1,e=tt(te)?O(te):null;J(te,{onDragStart:()=>{e?.onDragStart?.(),window.clearTimeout(t),t=-1,this.#d=!0},onDragEnd:()=>{e?.onDragEnd?.(),t=window.setTimeout(()=>{this.#d=!1,t=-1},300)}})}#g(){const t=this.#S();this.isSubmenu||this.#R(),this.#v(t),t&&(d(()=>{const{height:e}=this.#t.$state,s=this.#r();s&&st(s,"--player-height",e()+"px")}),this.#h.listen(),this.listen("pointerup",this.#A.bind(this)),H(window,"pointerup",this.#C.bind(this)))}#y(t){const e=t.el,s=this.isSubmenu,a=W(this.#P.bind(this));D(e,"tabindex",s?"-1":"0"),D(e,"role",s?"menuitem":"button"),y(e,"id",this.#s),y(e,"aria-haspopup","menu"),y(e,"aria-expanded","false"),y(e,"data-root",!this.isSubmenu),y(e,"data-submenu",this.isSubmenu),d(()=>{y(e,"data-open",this.#i()),y(e,"aria-disabled",a())}),this.#n.set(e),A(()=>{this.#n.set(null)})}#$(t){const e=t.el;e.style.setProperty("display","none"),y(e,"id",this.#e),D(e,"role","menu"),D(e,"tabindex","-1"),y(e,"data-root",!this.isSubmenu),y(e,"data-submenu",this.isSubmenu),this.#r.set(e),A(()=>this.#r.set(null)),d(()=>y(e,"data-open",this.#i())),this.#h.attachMenu(e),this.#v(!1);const a=this.#H.bind(this);this.isSubmenu?this.#o?.onTransitionEvent(a):(t.listen("transitionstart",a),t.listen("transitionend",a),t.listen("animationend",this.#R),t.listen("vds-menu-resize",this.#R))}#w(t){this.#u=t}#v(t){const e=f(this.#r);e&&y(e,"aria-hidden",ce(!t))}#x(t){this.#p.set(t)}#f=!1;#T(t,e){if(this.#f=oe(e),e?.stopPropagation(),this.#i()===t)return;if(this.#P()){t&&this.#c.hide(e);return}this.el?.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));const s=this.#n(),a=this.#r();if(s&&(y(s,"aria-controls",t&&this.#e),y(s,"aria-expanded",ce(t))),a&&y(a,"aria-labelledby",t&&this.#s),this.#i.set(t),this.#D(e),ut(),this.#f){t?a?.focus():s?.focus();for(const n of[this.el,a])n&&n.setAttribute("data-keyboard","")}else for(const n of[this.el,a])n&&n.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)!this.isSubmenu&&this.#t.activeMenu!==this&&(this.#t.activeMenu?.close(e),this.#t.activeMenu=this),this.#u?.onOpen?.(e);else{if(this.isSubmenu)for(const n of this.#l)n.close(e);else this.#t.activeMenu=null;this.#u?.onClose?.(e)}t&&requestAnimationFrame(this.#k.bind(this))}#k(){this.#N||this.#L||(this.#h.update(),requestAnimationFrame(()=>{this.#f?this.#h.focusActive():this.#h.scroll()}))}#S(){return!this.#P()&&this.#i()}#P(){return this.#a()||this.#p()}#E(t){this.#a.set(t)}#A(t){const e=this.#r();this.#d||e&&ni(e,t)||t.stopPropagation()}#C(t){const e=this.#r();this.#d||e&&ni(e,t)||this.close(t)}#M(){const t=this.el?.querySelector('[data-part="close-target"]');return this.el&&t&&li(this.el,t,e=>e.getAttribute("role")==="menu")?t:null}#D(t){this.isSubmenu||(this.#i()?this.#t.remote.pauseControls(t):this.#t.remote.resumeControls(t))}#_(t){this.#l.add(t),new _(t).add("open",this.#O).add("close",this.#F),A(this.#q)}#q=this.#V.bind(this);#V(t){this.#l.delete(t)}#L=!1;#O=this.#I.bind(this);#I(t){this.#L=!0;const e=this.#r();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","true");for(const s of this.#l)if(s!==t.target)for(const a of[s.el,s.triggerElement])a?.setAttribute("aria-hidden","true");if(e){const s=t.target.el;for(const a of e.children)a.contains(s)?a.setAttribute("data-open",""):a!==s&&a.setAttribute("data-hidden","")}}#F=this.#B.bind(this);#B(t){this.#L=!1;const e=this.#r();this.isSubmenu&&this.triggerElement?.setAttribute("aria-hidden","false");for(const s of this.#l)for(const a of[s.el,s.triggerElement])a?.setAttribute("aria-hidden","false");if(e)for(const s of e.children)s.removeAttribute("data-open"),s.removeAttribute("data-hidden")}#R=ht(()=>{const t=f(this.#r);if(!t)return;let e=0,s=getComputedStyle(t),a=[...t.children];for(const n of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(s[n])||0;for(const n of a)if(wt(n)&&n.style.display==="contents")a.push(...n.children);else if(n.nodeType===3)e+=parseFloat(getComputedStyle(n).fontSize);else if(wt(n)){if(!ri(n))continue;const r=getComputedStyle(n);e+=n.offsetHeight+(parseFloat(r.marginTop)||0)+(parseFloat(r.marginBottom)||0)}st(t,"--menu-height",e+"px")});#N=!1;#H(t){const e=this.#r();e&&t.propertyName==="height"&&(this.#N=t.type==="transitionstart",y(e,"data-transition",this.#N?"height":null),this.#i()&&this.#k());for(const s of this.#m)s(t)}open(t){f(this.#i)||(this.#c.show(t),ut())}close(t){f(this.#i)&&(this.#c.hide(t),ut())}}ee([C],Ht.prototype,"triggerElement"),ee([C],Ht.prototype,"contentElement"),ee([C],Ht.prototype,"isSubmenu"),ee([B],Ht.prototype,"open"),ee([B],Ht.prototype,"close");class Xl extends T(HTMLElement,Ht){static tagName="media-menu"}class Jl extends Ss{}class Zl extends T(HTMLElement,Jl){static tagName="media-menu-item"}class td extends k{static props={container:null,disabled:!1};#t=null;#e;onSetup(){this.#e=g(),J(_e,{attach:this.#s.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){this.#t?.remove(),this.#t=null}#s(t){this.#a(!1),this.#t=t,mt(()=>{mt(()=>{this.connectScope&&d(this.#i.bind(this))})})}#i(){const{fullscreen:t}=this.#e.$state,{disabled:e}=this.$props;this.#a(e()==="fullscreen"?!t():!e())}#a(t){if(!this.#t)return;let e=this.#n(this.$props.container());if(!e)return;const s=this.#t.parentElement===e;y(this.#t,"data-portal",t),t?s||(this.#t.remove(),e.append(this.#t)):s&&this.#t.parentElement===e&&(this.#t.remove(),this.el?.append(this.#t))}#n(t){return wt(t)?t:t?document.querySelector(t):document.body}}const _e=dt();class ed extends k{static props={placement:null,offset:0,alignOffset:0};#t;constructor(){super(),new lt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){if(this.#t=O(Q),this.#t.attachMenuItems(this),tt(_e)){const e=O(_e);e&&(J(_e,null),e.attach(t),A(()=>e.attach(null)))}}onConnect(t){d(this.#e.bind(this))}#e(){const{expanded:t}=this.#t;if(!this.el||!t())return;const e=this.$props.placement();if(!e)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});const{offset:s,alignOffset:a}=this.$props;A(di(this.el,this.#i(),e,{offsetVarName:"media-menu",xOffset:a(),yOffset:s()})),A(this.#s.bind(this))}#s(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")}#i(){return this.#t.button()}}class sd extends T(HTMLElement,ed){static tagName="media-menu-items"}class id extends T(HTMLElement,td){static tagName="media-menu-portal";static attrs={disabled:{converter(t){return E(t)?t:t!==null}}}}class aa extends k{static props={autoLabel:"Auto",hideBitrate:!1,sort:"descending"};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{canSetQuality:t,qualities:e}=this.#t.$state;return!t()||e().length<=1}#i=M(()=>{const{sort:t}=this.$props,{qualities:e}=this.#t.$state;return ms(e(),t()==="descending")});constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=g(),tt(Q)&&(this.#e=O(Q))}onConnect(t){d(this.#a.bind(this)),d(this.#r.bind(this)),d(this.#n.bind(this))}getOptions(){const{autoLabel:t,hideBitrate:e}=this.$props;return[{value:"auto",label:t},...this.#i().map(s=>{const a=s.bitrate&&s.bitrate>=0?`${K(s.bitrate/1e6,2)} Mbps`:null;return{quality:s,label:s.height+"p",value:this.#u(s),bitrate:()=>e()?null:a}})]}#a(){this.#s.value=this.#l()}#n(){const{autoLabel:t}=this.$props,{autoQuality:e,quality:s}=this.#t.$state,a=s()?s().height+"p":"";this.#e?.hint.set(e()?t()+(a?` (${a})`:""):a)}#r(){this.#e?.disable(this.disabled)}#o(t,e){if(this.disabled)return;if(t==="auto"){this.#t.remote.changeQuality(-1,e),this.dispatch("change",{detail:"auto",trigger:e});return}const{qualities:s}=this.#t.$state,a=f(s).findIndex(n=>this.#u(n)===t);if(a>=0){const n=f(s)[a];this.#t.remote.changeQuality(a,e),this.dispatch("change",{detail:n,trigger:e})}}#l(){const{quality:t,autoQuality:e}=this.#t.$state;if(e())return"auto";const s=t();return s?this.#u(s):"auto"}#u(t){return t.height+"_"+t.bitrate}}const Ps=aa.prototype;C(Ps,"value"),C(Ps,"disabled"),B(Ps,"getOptions");class ad extends T(HTMLElement,aa){static tagName="media-quality-radio-group";onConnect(){Bt(this,(t,e)=>{const s=e.bitrate,a=t.querySelector('[data-part="bitrate"]');s&&a&&d(()=>{a.textContent=s()||""})})}}class na extends k{static props={value:""};#t=b(!1);#e={value:this.$props.value,check:this.#r.bind(this),onCheck:null};get checked(){return this.#t()}constructor(){super(),new lt}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":this.#t,"aria-checked":W(this.#t)})}onAttach(t){const e=tt(Q);D(t,"tabindex",e?"-1":"0"),D(t,"role",e?"menuitemradio":"radio"),d(this.#a.bind(this))}onConnect(t){this.#i(),$t(t,this.#n.bind(this)),A(this.#s.bind(this))}#s(){Ut(()=>{O(vs).remove(this.#e)},this.connectScope)}#i(){O(vs).add(this.#e)}#a(){const{value:t}=this.$props,e=t();f(this.#t)&&this.#e.onCheck?.(e)}#n(t){f(this.#t)||(this.#o(!0,t),this.#l(t),this.#e.onCheck?.(f(this.$props.value),t))}#r(t,e){f(this.#t)!==t&&this.#o(t,e)}#o(t,e){this.#t.set(t),this.dispatch("change",{detail:t,trigger:e})}#l(t){this.dispatch("select",{trigger:t})}}const nd=na.prototype;C(nd,"checked");class rd extends T(HTMLElement,na){static tagName="media-radio"}class ra extends k{static props={value:""};#t;get values(){return this.#t.values}get value(){return this.#t.value}set value(t){this.#t.value=t}constructor(){super(),this.#t=new qt,this.#t.onValueChange=this.#s.bind(this)}onSetup(){d(this.#e.bind(this))}#e(){this.#t.value=this.$props.value()}#s(t,e){const s=this.createEvent("change",{detail:t,trigger:e});this.dispatch(s)}}const oa=ra.prototype;C(oa,"values"),C(oa,"value");class od extends T(HTMLElement,ra){static tagName="media-radio-group"}const ld=[.25,.5,.75,1,1.25,1.5,1.75,2];class la extends k{static props={normalLabel:"Normal",rates:ld};#t;#e;#s;get value(){return this.#s.value}get disabled(){const{rates:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return!e()||t().length===0}constructor(){super(),this.#s=new qt,this.#s.onValueChange=this.#o.bind(this)}onSetup(){this.#t=g(),tt(Q)&&(this.#e=O(Q))}onConnect(t){d(this.#i.bind(this)),d(this.#a.bind(this)),d(this.#n.bind(this))}getOptions(){const{rates:t,normalLabel:e}=this.$props;return t().map(s=>({label:s===1?e:s+"\xD7",value:s.toString()}))}#i(){this.#s.value=this.#r()}#a(){const{normalLabel:t}=this.$props,{playbackRate:e}=this.#t.$state,s=e();this.#e?.hint.set(s===1?t():s+"\xD7")}#n(){this.#e?.disable(this.disabled)}#r(){const{playbackRate:t}=this.#t.$state;return t().toString()}#o(t,e){if(this.disabled)return;const s=+t;this.#t.remote.changePlaybackRate(s,e),this.dispatch("change",{detail:s,trigger:e})}}const Cs=la.prototype;C(Cs,"value"),C(Cs,"disabled"),B(Cs,"getOptions");class dd extends T(HTMLElement,la){static tagName="media-speed-radio-group";onConnect(){Bt(this)}}class ud extends k{static props={src:null,alt:null,crossOrigin:null};static state=new yt({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});#t;onSetup(){this.#t=g(),this.#o(),this.#l(),this.#u(),this.#i()}onAttach(t){t.style.setProperty("pointer-events","none"),d(this.#n.bind(this)),d(this.#o.bind(this)),d(this.#l.bind(this)),d(this.#u.bind(this)),d(this.#i.bind(this));const{started:e}=this.#t.$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":this.#a.bind(this),"data-error":this.#e.bind(this),"data-hidden":this.$state.hidden})}onConnect(t){d(this.#s.bind(this)),d(this.#c.bind(this))}#e(){const{error:t}=this.$state;return!Et(t())}#s(){const{canLoadPoster:t,poster:e}=this.#t.$state;!t()&&e()&&jt(e(),"preconnect")}#i(){const{src:t}=this.$props,{poster:e,nativeControls:s}=this.#t.$state;this.el&&y(this.el,"display",s()?"none":null),this.$state.hidden.set(this.#e()||!(t()||e())||s())}#a(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}#n(){const t=this.$state.img();t&&(new _(t).add("load",this.#h.bind(this)).add("error",this.#d.bind(this)),t.complete&&this.#h())}#r="";#o(){const{poster:t}=this.#t.$props,{canLoadPoster:e,providedPoster:s,inferredPoster:a}=this.#t.$state,n=this.$props.src()||"",r=n||t()||a();this.#r===s()&&s.set(n),this.$state.src.set(e()&&r.length?r:null),this.#r=n}#l(){const{src:t}=this.$props,{alt:e}=this.$state,{poster:s}=this.#t.$state;e.set(t()||s()?this.$props.alt():null)}#u(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s,poster:a}=this.#t.$state,n=t()!==null?t():s();e.set(/ytimg\.com|vimeo/.test(a()||"")?null:n===!0?"anonymous":n)}#c(){const{loading:t,error:e}=this.$state,{canLoadPoster:s,poster:a}=this.#t.$state;t.set(s()&&!!a()),e.set(null)}#h(){const{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}#d(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}}class cd extends T(HTMLElement,ud){static tagName="media-poster";static attrs={crossOrigin:"crossorigin"};#t=document.createElement("img");onSetup(){this.$state.img.set(this.#t)}onConnect(){const{src:t,alt:e,crossOrigin:s}=this.$state;d(()=>{const{loading:a,hidden:n}=this.$state;this.#t.style.display=a()||n()?"none":""}),d(()=>{y(this.#t,"alt",e()),y(this.#t,"crossorigin",s()),y(this.#t,"src",t())}),this.#t.parentNode!==this&&this.prepend(this.#t)}}const _t=new yt({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return da(this.min,this.max,this.value)},get fillPercent(){return this.fillRate*100},get pointerRate(){return da(this.min,this.max,this.pointerValue)},get pointerPercent(){return this.pointerRate*100}});function da(i,t,e){const s=t-i,a=e-i;return s>0?a/s:0}const Gt=dt(()=>({}));class ua extends rt{#t;#e;constructor(t){super(),this.#t=t}onConnect(t){this.#e=new IntersectionObserver(e=>{this.#t.callback?.(e,this.#e)},this.#t),this.#e.observe(t),A(this.#s.bind(this))}#s(){this.#e?.disconnect(),this.#e=void 0}}function hd(i,t,e,s){return Qe(i,K(e,tn(s)),t)}function pd(i,t,e,s){const a=Qe(0,e,1),n=t-i,r=n*a,o=r/s,l=s*Math.round(o);return i+l}const Es={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};class md extends rt{#t;#e;#s;constructor(t,e){super(),this.#t=t,this.#e=e}onSetup(){tt(te)&&(this.#s=O(te))}onConnect(t){d(this.#u.bind(this,t)),d(this.#c.bind(this,t)),this.#t.swipeGesture&&d(this.#i.bind(this))}#i(){const{pointer:t}=this.#e.$state;if(t()!=="coarse"||!this.#t.swipeGesture()){this.#a=null;return}this.#a=this.#e.player.el?.querySelector("media-provider,[data-media-provider]"),this.#a&&new _(this.#a).add("touchstart",this.#o.bind(this),{passive:!0}).add("touchmove",this.#l.bind(this),{passive:!1})}#a=null;#n=null;#r=null;#o(t){this.#n=t.touches[0]}#l(t){if(Et(this.#n)||Ye(t))return;const e=t.touches[0],s=e.clientX-this.#n.clientX,a=e.clientY-this.#n.clientY,n=this.$state.dragging();!n&&Math.abs(a)>5||n||(t.preventDefault(),Math.abs(s)>20&&(this.#n=e,this.#r=this.$state.value(),this.#w(this.#r,t)))}#u(t){const{hidden:e}=this.$props;H(t,"focus",this.#h.bind(this)),!(e()||this.#t.isDisabled())&&new _(t).add("keyup",this.#k.bind(this)).add("keydown",this.#T.bind(this)).add("pointerenter",this.#b.bind(this)).add("pointermove",this.#g.bind(this)).add("pointerleave",this.#y.bind(this)).add("pointerdown",this.#$.bind(this))}#c(t){this.#t.isDisabled()||!this.$state.dragging()||new _(document).add("pointerup",this.#E.bind(this),{capture:!0}).add("pointermove",this.#C.bind(this)).add("touchmove",this.#A.bind(this),{passive:!1})}#h(){this.#p(this.$state.value())}#d(t,e){const{value:s,min:a,max:n,dragging:r}=this.$state,o=Math.max(a(),Math.min(t,n()));s.set(o);const l=this.createEvent("value-change",{detail:o,trigger:e});if(this.dispatch(l),this.#t.onValueChange?.(l),r()){const u=this.createEvent("drag-value-change",{detail:o,trigger:e});this.dispatch(u),this.#t.onDragValueChange?.(u)}}#p(t,e){const{pointerValue:s,dragging:a}=this.$state;s.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),a()&&this.#d(t,e)}#m(t){let e,s=this.el.getBoundingClientRect(),{min:a,max:n}=this.$state;if(this.$props.orientation()==="vertical"){const{bottom:r,height:o}=s;e=(r-t.clientY)/o}else if(this.#n&&ct(this.#r)){const{width:r}=this.#a.getBoundingClientRect(),o=(t.clientX-this.#n.clientX)/r,l=n()-a(),u=l*Math.abs(o);e=(o<0?this.#r-u:this.#r+u)/l}else{const{left:r,width:o}=s;e=(t.clientX-r)/o}return Math.max(a(),Math.min(n(),this.#t.roundValue(pd(a(),n(),e,this.#t.getStep()))))}#b(t){this.$state.pointing.set(!0)}#g(t){const{dragging:e}=this.$state;e()||this.#p(this.#m(t),t)}#y(t){this.$state.pointing.set(!1)}#$(t){if(t.button!==0)return;const e=this.#m(t);this.#w(e,t),this.#p(e,t)}#w(t,e){const{dragging:s}=this.$state;if(s())return;s.set(!0),this.#e.remote.pauseControls(e);const a=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(a),this.#t.onDragStart?.(a),this.#s?.onDragStart?.()}#v(t,e){const{dragging:s}=this.$state;if(!s())return;s.set(!1),this.#e.remote.resumeControls(e);const a=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(a),this.#t.onDragEnd?.(a),this.#n=null,this.#r=null,this.#s?.onDragEnd?.()}#x;#f=!1;#T(t){if(!Object.keys(Es).includes(t.key))return;const{key:s}=t,a=this.#S(t);if(!Et(a)){this.#p(a,t),this.#d(a,t);return}const n=this.#P(t);this.#f||(this.#f=s===this.#x,!this.$state.dragging()&&this.#f&&this.#w(n,t)),this.#p(n,t),this.#x=s}#k(t){if(!Object.keys(Es).includes(t.key)||!Et(this.#S(t)))return;const s=this.#f?this.$state.pointerValue():this.#P(t);this.#d(s,t),this.#v(s,t),this.#x="",this.#f=!1}#S(t){let e=t.key,{min:s,max:a}=this.$state;return e==="Home"||e==="PageUp"?s():e==="End"||e==="PageDown"?a():!t.metaKey&&/^[0-9]$/.test(e)?(a()-s())/10*Number(e):null}#P(t){const{key:e,shiftKey:s}=t;t.preventDefault(),t.stopPropagation();const{shiftKeyMultiplier:a}=this.$props,{min:n,max:r,value:o,pointerValue:l}=this.$state,u=this.#t.getStep(),c=this.#t.getKeyStep(),m=s?c*a():c,v=Number(Es[e]),w=m*v,P=this.#f?l():this.#t.getValue?.()??o(),I=(P+w)/u;return Math.max(n(),Math.min(r(),Number((u*I).toFixed(3))))}#E(t){if(t.button!==0)return;t.preventDefault(),t.stopImmediatePropagation();const e=this.#m(t);this.#p(e,t),this.#v(e,t)}#A(t){t.preventDefault()}#C=Ct(t=>{this.#p(this.#m(t),t)},20,{leading:!0})}class at extends rt{static props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};#t;#e;#s=b(!0);#i=b(!0);constructor(t){super(),this.#e=t}onSetup(){this.#t=g();const t=new lt;t.attach(this),this.$state.focused=t.focused.bind(t),tt(Gt)||J(Gt,{default:"value"}),J(xs,{orientation:this.$props.orientation,disabled:this.#e.isDisabled,preview:b(null)}),d(this.#r.bind(this)),d(this.#o.bind(this)),d(this.#l.bind(this)),this.#c(),new md(this.#e,this.#t).attach(this),new ua({callback:this.#a.bind(this)}).attach(this)}onAttach(t){D(t,"role","slider"),D(t,"tabindex","0"),D(t,"autocomplete","off"),d(this.#h.bind(this))}onConnect(t){A(oi(t,this.#s.set)),d(this.#n.bind(this))}#a(t){this.#i.set(t[0].isIntersecting)}#n(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#s()||!this.#i.bind(this))}#r(){const{dragging:t,value:e,min:s,max:a}=this.$state;f(t)||e.set(hd(s(),a(),e(),this.#e.getStep()))}#o(){this.$state.step.set(this.#e.getStep())}#l(){if(!this.#e.isDisabled())return;const{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}#u(){return ce(this.#e.isDisabled())}#c(){const{orientation:t}=this.$props,{dragging:e,active:s,pointing:a}=this.$state;this.setAttributes({"data-dragging":e,"data-pointing":a,"data-active":s,"aria-disabled":this.#u.bind(this),"aria-valuemin":this.#e.aria.valueMin??this.$state.min,"aria-valuemax":this.#e.aria.valueMax??this.$state.max,"aria-valuenow":this.#e.aria.valueNow,"aria-valuetext":this.#e.aria.valueText,"aria-orientation":t})}#h(){const{fillPercent:t,pointerPercent:e}=this.$state;this.#d(K(t(),3),K(e(),3))}#d=ht((t,e)=>{this.el?.style.setProperty("--slider-fill",t+"%"),this.el?.style.setProperty("--slider-pointer",e+"%")})}class fd extends k{static props={...at.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300};static state=_t;#t;onSetup(){this.#t=g(),J(Gt,{default:"percent",percent:(t,e)=>K(this.$state.value(),e)+"%"}),new at({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#n.bind(this),aria:{valueNow:this.#e.bind(this),valueText:this.#s.bind(this)},onDragValueChange:this.#l.bind(this),onValueChange:this.#o.bind(this)}).attach(this),d(this.#i.bind(this)),d(this.#a.bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),D(t,"aria-label","Audio Boost");const{canSetAudioGain:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":W(()=>!e())})}#e(){const{value:t}=this.$state;return Math.round(t())}#s(){const{value:t}=this.$state;return t()+"%"}#i(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}#a(){const{audioGain:t}=this.#t.$state,e=((t()??1)-1)*100;this.$state.value.set(e),this.dispatch("value-change",{detail:e})}#n(){const{disabled:t}=this.$props,{canSetAudioGain:e}=this.#t.$state;return t()||!e()}#r(t){if(!t.trigger)return;const e=K(1+t.detail/100,2);this.#t.remote.changeAudioGain(e,t)}#o(t){this.#r(t)}#l(t){this.#r(t)}}class gd extends T(HTMLElement,fd){static tagName="media-audio-gain-slider"}class bd extends k{static props={...at.props,step:1,keyStep:1,shiftKeyMultiplier:1};static state=_t;#t;#e=M(()=>{const{qualities:t}=this.#t.$state;return ms(t())});onSetup(){this.#t=g(),new at({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#r.bind(this),aria:{valueNow:this.#s.bind(this),valueText:this.#i.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),d(this.#a.bind(this)),d(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),D(t,"aria-label","Video Quality");const{qualities:e,canSetQuality:s}=this.#t.$state,a=M(()=>s()&&e().length>0);this.setAttributes({"data-supported":a,"aria-hidden":W(()=>!a())})}#s(){const{value:t}=this.$state;return t()}#i(){const{quality:t}=this.#t.$state;if(!t())return"";const{height:e,bitrate:s}=t(),a=s&&s>0?`${(s/1e6).toFixed(2)} Mbps`:null;return e?`${e}p${a?` (${a})`:""}`:"Auto"}#a(){const t=this.#e();this.$state.max.set(Math.max(0,t.length-1))}#n(){let{quality:t}=this.#t.$state,e=this.#e(),s=Math.max(0,e.indexOf(t()));this.$state.value.set(s),this.dispatch("value-change",{detail:s})}#r(){const{disabled:t}=this.$props,{canSetQuality:e,qualities:s}=this.#t.$state;return t()||s().length<=1||!e()}#o=Ct(this.#l.bind(this),25);#l(t){if(!t.trigger)return;const{qualities:e}=this.#t,s=f(this.#e)[t.detail];this.#t.remote.changeQuality(e.indexOf(s),t)}#u(t){this.#o(t)}#c(t){this.#o(t)}}class yd extends T(HTMLElement,bd){static tagName="media-quality-slider"}class ca extends k{static props={...at.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100};static state=_t;#t;#e;#s=b(null);constructor(){super();const{noSwipeGesture:t}=this.$props;new at({swipeGesture:()=>!t(),getValue:this.#b.bind(this),getStep:this.#g.bind(this),getKeyStep:this.#y.bind(this),roundValue:this.#$,isDisabled:this.#w.bind(this),aria:{valueNow:this.#v.bind(this),valueText:this.#x.bind(this)},onDragStart:this.#h.bind(this),onDragValueChange:this.#d.bind(this),onDragEnd:this.#p.bind(this),onValueChange:this.#m.bind(this)})}onSetup(){this.#t=g(),J(Gt,{default:"time",value:this.#k.bind(this),time:this.#S.bind(this)}),this.setAttributes({"data-chapters":this.#a.bind(this)}),this.setStyles({"--slider-progress":this.#i.bind(this)}),d(this.#r.bind(this)),d(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),D(t,"aria-label","Seek")}onConnect(t){d(this.#o.bind(this)),zt(this.#t.textTracks,"chapters",this.#s.set)}#i(){const{bufferedEnd:t,duration:e}=this.#t.$state;return K(Math.min(t()/Math.max(e(),1),1)*100,3)+"%"}#a(){const{duration:t}=this.#t.$state;return this.#s()?.cues.length&&Number.isFinite(t())&&t()>0}#n(){this.#e=Ct(this.#l.bind(this),this.$props.seekingRequestThrottle())}#r(){if(this.$state.hidden())return;const{value:t,dragging:e}=this.$state,s=this.#b();f(e)||(t.set(s),this.dispatch("value-change",{detail:s}))}#o(){const t=this.#t.player.el,{preview:e}=O(xs);t&&e()&&y(t,"data-preview",this.$state.active())}#l(t,e){this.#t.remote.seeking(t,e)}#u(t,e,s){this.#e.cancel();const{live:a}=this.#t.$state;if(a()&&e>=99){this.#t.remote.seekToLiveEdge(s);return}this.#t.remote.seek(t,s)}#c=!1;#h(t){const{pauseWhileDragging:e}=this.$props;if(e()){const{paused:s}=this.#t.$state;this.#c=!s(),this.#t.remote.pause(t)}}#d(t){this.#e(this.#f(t.detail),t)}#p(t){const{seeking:e}=this.#t.$state;f(e)||this.#l(this.#f(t.detail),t);const s=t.detail;this.#u(this.#f(s),s,t);const{pauseWhileDragging:a}=this.$props;a()&&this.#c&&(this.#t.remote.play(t),this.#c=!1)}#m(t){const{dragging:e}=this.$state;e()||!t.trigger||this.#p(t)}#b(){const{currentTime:t}=this.#t.$state;return this.#T(t())}#g(){const t=this.$props.step()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#y(){const t=this.$props.keyStep()/this.#t.$state.duration()*100;return Number.isFinite(t)?t:1}#$(t){return K(t,3)}#w(){const{disabled:t}=this.$props,{canSeek:e}=this.#t.$state;return t()||!e()}#v(){const{value:t}=this.$state;return Math.round(t())}#x(){const t=this.#f(this.$state.value()),{duration:e}=this.#t.$state;return Number.isFinite(t)?`${De(t)} out of ${De(e())}`:"live"}#f(t){const{duration:e}=this.#t.$state;return K(t/100*e(),5)}#T(t){const{liveEdge:e,duration:s}=this.#t.$state,a=Math.max(0,Math.min(1,e()?1:Math.min(t,s())/s()));return Number.isNaN(a)?0:Number.isFinite(a)?a*100:100}#k(t){const e=this.#f(t),{live:s,duration:a}=this.#t.$state;return Number.isFinite(e)?(s()?e-a():e).toFixed(0):"LIVE"}#S(t,e){const s=this.#f(t),{live:a,duration:n}=this.#t.$state,r=a()?s-n():s;return Number.isFinite(s)?`${r<0?"-":""}${Le(Math.abs(r),e)}`:"LIVE"}}class ha extends k{static props={disabled:!1};#t;#e;#s;#i=null;#a=[];#n=b(null);#r=b([]);#o=b(-1);#l=b(-1);#u=0;get cues(){return this.#r()}get activeCue(){return this.#r()[this.#o()]||null}get activePointerCue(){return this.#r()[this.#l()]||null}onSetup(){this.#t=g(),this.#e=Ft(ca.state)}onAttach(t){zt(this.#t.textTracks,"chapters",this.#c.bind(this)),d(this.#E.bind(this))}onConnect(){A(()=>this.#h.bind(this))}onDestroy(){this.#c(null)}setRefs(t){if(this.#a=t,this.#s?.dispose(),this.#a.length===1){const e=this.#a[0];e.style.width="100%",e.style.setProperty("--chapter-fill","var(--slider-fill)"),e.style.setProperty("--chapter-progress","var(--slider-progress)")}else this.#a.length>0&&Ut(()=>this.#d(),this.#s=Ra())}#c(t){f(this.#n)!==t&&(this.#h(),this.#n.set(t))}#h(){this.#a=[],this.#r.set([]),this.#o.set(-1),this.#l.set(-1),this.#u=0,this.#s?.dispose()}#d(){this.#a.length&&d(this.#p.bind(this))}#p(){const{hidden:t}=this.#e;t()||(d(this.#m.bind(this)),d(this.#b.bind(this)),d(this.#g.bind(this)),d(this.#v.bind(this)))}#m(){const t=this.#r();if(!t.length)return;let e,{seekableStart:s,seekableEnd:a}=this.#t.$state,n=s(),r=a()||t[t.length-1].endTime,o=r-n,l=100;for(let u=0;u<t.length;u++)if(e=t[u],this.#a[u]){const c=u===t.length-1?l:K((e.endTime-Math.max(n,e.startTime))/o*100,3);this.#a[u].style.width=c+"%",l-=c}}#b(){let{liveEdge:t,seekableStart:e,seekableEnd:s}=this.#t.$state,{fillPercent:a,value:n}=this.#e,r=this.#r(),o=t(),l=f(this.#o),u=r[l],c=o?this.#r.length-1:this.#w(u&&u.startTime/s()*100<=f(n)?l:0,a());o||!u?this.#y(0,r.length,100):c>l?this.#y(l,c,100):c<l&&this.#y(c+1,l+1,0);const m=o?100:this.#S(r[c],a(),e(),this.#k(r));this.#$(this.#a[c],m),this.#o.set(c)}#g(){let{hidden:t,pointerPercent:e}=this.#e;if(t()){this.#l.set(-1);return}const s=this.#w(0,e());this.#l.set(s)}#y(t,e,s){for(let a=t;a<e;a++)this.#$(this.#a[a],s)}#$(t,e){t&&(t.style.setProperty("--chapter-fill",e+"%"),y(t,"data-active",e>0&&e<100),y(t,"data-ended",e===100))}#w(t,e){let s=0,a=this.#r();if(e===0)return 0;if(e===100)return a.length-1;let{seekableStart:n}=this.#t.$state,r=n(),o=this.#k(a);for(let l=t;l<a.length;l++)if(s=this.#S(a[l],e,r,o),s>=0&&s<100)return l;return 0}#v(){this.#x(this.#f())}#x=ht(t=>{let e,s=this.#r(),{seekableStart:a}=this.#t.$state,n=a(),r=this.#k(s);for(let o=this.#u;o<this.#a.length;o++)if(e=this.#S(s[o],t,n,r),this.#a[o]?.style.setProperty("--chapter-progress",e+"%"),e<100){this.#u=o;break}});#f=M(this.#T.bind(this));#T(){const{bufferedEnd:t,duration:e}=this.#t.$state;return K(Math.min(t()/Math.max(e(),1),1),3)*100}#k(t){const{seekableEnd:e}=this.#t.$state,s=e();return Number.isFinite(s)?s:t[t.length-1]?.endTime||0}#S(t,e,s,a){if(!t||this.#r().length===0)return 0;const r=a-s,o=Math.max(0,t.startTime-s),l=Math.min(a,t.endTime)-s,u=o/r,c=u*100,m=Math.min(1,u+(l-o)/r)*100;return Math.max(0,K(e>=m?100:(e-c)/(m-c)*100,3))}#P(t){let e=[],{seekableStart:s,seekableEnd:a,duration:n}=this.#t.$state,r=s(),o=a();t=t.filter(c=>c.startTime<=o&&c.endTime>=r);const l=t[0];l&&l.startTime>r&&e.push(new window.VTTCue(r,l.startTime,""));for(let c=0;c<t.length-1;c++){const m=t[c],v=t[c+1];if(e.push(m),v){const w=v.startTime-m.endTime;w>0&&e.push(new window.VTTCue(m.endTime,m.endTime+w,""))}}const u=t[t.length-1];if(u){e.push(u);const c=n();c>=0&&c-u.endTime>1&&e.push(new window.VTTCue(u.endTime,n(),""))}return e}#E(){const{source:t}=this.#t.$state;t(),this.#A()}#A(){if(!this.scope)return;const{disabled:t}=this.$props;if(t()){this.#r.set([]),this.#o.set(0),this.#u=0;return}const e=this.#n();if(e){const s=this.#M.bind(this);s(),new _(e).add("add-cue",s).add("remove-cue",s),d(this.#C.bind(this))}return this.#i=this.#q(),this.#i&&d(this.#D.bind(this)),()=>{this.#i&&(this.#i.textContent="",this.#i=null)}}#C(){this.#t.$state.duration(),this.#M()}#M=Fe(()=>{const t=f(this.#n);!this.scope||!t||!t.cues.length||(this.#r.set(this.#P(t.cues)),this.#o.set(0),this.#u=0)},150,!0);#D(){const t=this.activePointerCue||this.activeCue;this.#i&&(this.#i.textContent=t?.text||"")}#_(){let t=this.el;for(;t&&t.getAttribute("role")!=="slider";)t=t.parentElement;return t}#q(){const t=this.#_();return t?t.querySelector('[data-part="chapter-title"]'):null}}const Ie=ha.prototype;C(Ie,"cues"),C(Ie,"activeCue"),C(Ie,"activePointerCue"),B(Ie,"setRefs");class vd extends T(HTMLElement,ha){static tagName="media-slider-chapters";#t=null;onConnect(){mt(()=>{if(!this.connectScope)return;const t=this.querySelector("template");t&&(this.#t=t,d(this.#e.bind(this)))})}#e(){if(!this.#t)return;const t=Xe(this.#t,this.cues.length||1);this.setRefs(t)}}class se extends k{static props={...at.props,min:0,max:100,value:0};static state=_t;constructor(){super(),new at({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:this.#t.bind(this),valueText:this.#e.bind(this)}})}onSetup(){d(this.#s.bind(this)),d(this.#i.bind(this))}#t(){const{value:t}=this.$state;return Math.round(t())}#e(){const{value:t,max:e}=this.$state;return K(t()/e()*100,2)+"%"}#s(){const{value:t}=this.$props;this.$state.value.set(t())}#i(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}}class $d extends T(HTMLElement,se){static tagName="media-slider"}class wd extends k{static props={offset:0,noClamp:!1};#t;onSetup(){this.#t=O(xs);const{active:t}=Ft(se.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){const{preview:e}=this.#t;e.set(t),A(()=>e.set(null)),d(this.#e.bind(this));const s=new ResizeObserver(this.#e.bind(this));s.observe(t),A(()=>s.disconnect())}#e=ht(()=>{const{disabled:t,orientation:e}=this.#t;if(t())return;const s=this.el,{offset:a,noClamp:n}=this.$props;s&&Td(s,{clamp:!n(),offset:a(),orientation:e()})})}function Td(i,{clamp:t,offset:e,orientation:s}){const a=getComputedStyle(i),n=parseFloat(a.width),r=parseFloat(a.height),o={top:null,right:null,bottom:null,left:null};if(o[s==="horizontal"?"bottom":"left"]=`calc(100% + var(--media-slider-preview-offset, ${e}px))`,s==="horizontal"){const l=n/2;if(!t)o.left=`calc(var(--slider-pointer) - ${l}px)`;else{const u=`max(0px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${n}px)`;o.left=`min(${u}, ${c})`}}else{const l=r/2;if(!t)o.bottom=`calc(var(--slider-pointer) - ${l}px)`;else{const u=`max(${l}px, calc(var(--slider-pointer) - ${l}px))`,c=`calc(100% - ${r}px)`;o.bottom=`min(${u}, ${c})`}}Object.assign(i.style,o)}class kd extends T(HTMLElement,wd){static tagName="media-slider-preview"}class Sd extends k{}class xd extends T(HTMLElement,Sd){static tagName="media-slider-steps";#t=null;onConnect(t){mt(()=>{this.connectScope&&(this.#t=t.querySelector("template"),this.#t&&d(this.#e.bind(this)))})}#e(){if(!this.#t)return;const{min:t,max:e,step:s}=Ft(_t),a=(e()-t())/s();Xe(this.#t,Math.floor(a)+1)}}const bt=new Map,Ve=new Map;class Ds{#t;#e;#s;$images=b([]);static create(t,e){const s=g();return new Ds(t,e,s)}constructor(t,e,s){this.#e=t,this.#s=e,this.#t=s,d(this.#i.bind(this))}#i(){const{canLoad:t}=this.#t.$state;if(!t())return;const e=this.#e();if(e){if(E(e)&&bt.has(e)){const s=bt.get(e);if(bt.delete(e),bt.set(e,s),bt.size>99){const a=bt.keys().next().value;bt.delete(a)}this.$images.set(bt.get(e))}else if(E(e)){const s=this.#s(),a=e+"::"+s;if(!Ve.has(a)){const n=new Promise(async(r,o)=>{try{const l=await fetch(e,{credentials:ge(s)});if(l.headers.get("content-type")==="application/json"){const c=await l.json();if(G(c))if(c[0]&&"text"in c[0])r(this.#r(c));else{for(let m=0;m<c.length;m++){const v=c[m];pt(Na(v),!1),pt("url"in v&&E(v.url),!1),pt("startTime"in v&&ct(v.startTime),!1)}r(c)}else r(this.#n(c));return}import("https://cdn.jsdelivr.net/npm/media-captions@next/dist/prod.js").then(async({parseResponse:c})=>{try{const{cues:m}=await c(l);r(this.#r(m))}catch(m){o(m)}})}catch(l){o(l)}}).then(r=>(bt.set(a,r),r)).catch(r=>{this.#c(e,r)}).finally(()=>{E(a)&&Ve.delete(a)});Ve.set(a,n)}Ve.get(a)?.then(n=>{this.$images.set(n||[])})}else if(G(e))try{this.$images.set(this.#a(e))}catch(s){this.#c(e,s)}else try{this.$images.set(this.#n(e))}catch(s){this.#c(e,s)}return()=>{this.$images.set([])}}}#a(t){const e=this.#o();return t.map((s,a)=>(pt(s.url&&E(s.url)),pt("startTime"in s&&ct(s.startTime)),{...s,url:E(s.url)?this.#l(s.url,e):s.url}))}#n(t){pt(E(t.url)),pt(G(t.tiles)&&t.tiles?.length);const e=new URL(t.url),s=[],a="tile_width"in t?t.tile_width:t.tileWidth,n="tile_height"in t?t.tile_height:t.tileHeight;for(const r of t.tiles)s.push({url:e,startTime:"start"in r?r.start:r.startTime,width:a,height:n,coords:{x:r.x,y:r.y}});return s}#r(t){for(let a=0;a<t.length;a++){const n=t[a];pt("startTime"in n&&ct(n.startTime)),pt("text"in n&&E(n.text))}const e=[],s=this.#o();for(const a of t){const[n,r]=a.text.split("#"),o=this.#u(r);e.push({url:this.#l(n,s),startTime:a.startTime,endTime:a.endTime,width:o?.w,height:o?.h,coords:o&&ct(o.x)&&ct(o.y)?{x:o.x,y:o.y}:void 0})}return e}#o(){let t=f(this.#e);return!E(t)||!/^https?:/.test(t)?location.href:t}#l(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}#u(t){if(!t)return{};const[e,s]=t.split("="),a=s?.split(","),n={};if(!e||!a)return null;for(let r=0;r<e.length;r++){const o=+a[r];isNaN(o)||(n[e[r]]=o)}return n}#c(t,e){}}class Pd extends k{static props={src:null,time:0,crossOrigin:null};static state=new yt({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});media;#t;#e=[];onSetup(){this.media=g(),this.#t=Ds.create(this.$props.src,this.$state.crossOrigin),this.#i(),this.setAttributes({"data-loading":this.#o.bind(this),"data-error":this.#l.bind(this),"data-hidden":this.$state.hidden,"aria-hidden":W(this.$state.hidden)})}onConnect(t){d(this.#s.bind(this)),d(this.#u.bind(this)),d(this.#i.bind(this)),d(this.#a.bind(this)),d(this.#c.bind(this)),d(this.#h.bind(this))}#s(){const t=this.$state.img();t&&new _(t).add("load",this.#n.bind(this)).add("error",this.#r.bind(this))}#i(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.media.$state,a=t()!==null?t():s();e.set(a===!0?"anonymous":a)}#a(){const{src:t,loading:e,error:s}=this.$state;return t()&&(e.set(!0),s.set(null)),()=>{this.#p(),e.set(!1),s.set(null)}}#n(){const{loading:t,error:e}=this.$state;this.#h(),t.set(!1),e.set(null)}#r(t){const{loading:e,error:s}=this.$state;e.set(!1),s.set(t)}#o(){const{loading:t,hidden:e}=this.$state;return!e()&&t()}#l(){const{error:t}=this.$state;return!Et(t())}#u(){const{hidden:t}=this.$state,{duration:e}=this.media.$state,s=this.#t.$images();t.set(this.#l()||!Number.isFinite(e())||s.length===0)}getTime(){return this.$props.time()}#c(){let t=this.#t.$images();if(!t.length)return;let e=this.getTime(),{src:s,activeThumbnail:a}=this.$state,n=-1,r=null;for(let o=t.length-1;o>=0;o--){const l=t[o];if(e>=l.startTime&&(!l.endTime||e<l.endTime)){n=o;break}}t[n]&&(r=t[n]),a.set(r),s.set(r?.url.href||"")}#h(){if(!this.scope||this.$state.hidden())return;const t=this.el,e=this.$state.img(),s=this.$state.activeThumbnail();if(!e||!s||!t)return;let a=s.width??e.naturalWidth,n=s?.height??e.naturalHeight,{maxWidth:r,maxHeight:o,minWidth:l,minHeight:u,width:c,height:m}=getComputedStyle(this.el);l==="100%"&&(l=parseFloat(c)+""),u==="100%"&&(u=parseFloat(m)+"");let v=Math.max(parseInt(l)/a,parseInt(u)/n),w=Math.min(Math.max(parseInt(l),parseInt(r))/a,Math.max(parseInt(u),parseInt(o))/n),P=!isNaN(w)&&w<1?w:v>1?v:1;this.#d(t,"--thumbnail-width",`${a*P}px`),this.#d(t,"--thumbnail-height",`${n*P}px`),this.#d(t,"--thumbnail-aspect-ratio",String(K(a/n,5))),this.#d(e,"width",`${e.naturalWidth*P}px`),this.#d(e,"height",`${e.naturalHeight*P}px`),this.#d(e,"transform",s.coords?`translate(-${s.coords.x*P}px, -${s.coords.y*P}px)`:""),this.#d(e,"max-width","none")}#d(t,e,s){t.style.setProperty(e,s),this.#e.push(()=>t.style.removeProperty(e))}#p(){for(const t of this.#e)t();this.#e=[]}}const Cd=Je('<img loading="eager" decoding="async" aria-hidden="true">');class pa extends T(HTMLElement,Pd){static tagName="media-thumbnail";static attrs={crossOrigin:"crossorigin"};#t;#e=this.#s();onSetup(){this.#t=g(),this.$state.img.set(this.#e)}onConnect(){const{src:t,crossOrigin:e}=this.$state;this.#e.parentNode!==this&&this.prepend(this.#e),d(()=>{y(this.#e,"src",t()),y(this.#e,"crossorigin",e())})}#s(){return Ze(Cd)}}class Ed extends pa{static tagName="media-slider-thumbnail";#t;#e;onSetup(){super.onSetup(),this.#t=g(),this.#e=Ft(se.state)}onConnect(){super.onConnect(),d(this.#s.bind(this))}#s(){const{duration:t,clipStartTime:e}=this.#t.$state;this.time=e()+this.#e.pointerRate()*t()}}class ma extends k{static props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};#t;#e;#s;onSetup(){this.#s=Ft(se.state),this.#t=O(Gt),this.#e=M(this.getValueText.bind(this))}getValueText(){const{type:t,format:e,decimalPlaces:s,padHours:a,padMinutes:n,showHours:r,showMs:o}=this.$props,{value:l,pointerValue:u,min:c,max:m}=this.#s,v=e?.()??this.#t.default,w=t()==="current"?l():u();if(v==="percent"){const P=m()-c(),I=w/P*100;return(this.#t.percent??K)(I,s())+"%"}else return v==="time"?(this.#t.time??Le)(w,{padHrs:a(),padMins:n(),showHrs:r(),showMs:o()}):(this.#t.value?.(w)??w.toFixed(2))+""}}const Ad=ma.prototype;B(Ad,"getValueText");class Md extends T(HTMLElement,ma){static tagName="media-slider-value";static attrs={padMinutes:{converter:Fa}};onConnect(){d(()=>{this.textContent=this.getValueText()})}}class fa extends k{static props={src:null,crossOrigin:null};static state=new yt({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});#t;#e;get video(){return this.$state.video()}onSetup(){this.#t=g(),this.#e=Ft(se.state),this.#a(),this.setAttributes({"data-loading":this.#n.bind(this),"data-hidden":this.$state.hidden,"data-error":this.#r.bind(this),"aria-hidden":W(this.$state.hidden)})}onAttach(t){d(this.#s.bind(this)),d(this.#i.bind(this)),d(this.#a.bind(this)),d(this.#o.bind(this)),d(this.#l.bind(this)),d(this.#h.bind(this))}#s(){const t=this.$state.video();t&&(t.readyState>=2&&this.#u(),new _(t).add("canplay",this.#u.bind(this)).add("error",this.#c.bind(this)))}#i(){const{src:t}=this.$state,{canLoad:e}=this.#t.$state;t.set(e()?this.$props.src():null)}#a(){const{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:s}=this.#t.$state,a=t()!==null?t():s();e.set(a===!0?"anonymous":a)}#n(){const{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}#r(){const{error:t}=this.$state;return!Et(t)}#o(){const{src:t,hidden:e}=this.$state,{canLoad:s,duration:a}=this.#t.$state;e.set(s()&&(!t()||this.#r()||!Number.isFinite(a())))}#l(){const{src:t,canPlay:e,error:s}=this.$state;t(),e.set(!1),s.set(null)}#u(t){const{canPlay:e,error:s}=this.$state;e.set(!0),s.set(null),this.dispatch("can-play",{trigger:t})}#c(t){const{canPlay:e,error:s}=this.$state;e.set(!1),s.set(t),this.dispatch("error",{trigger:t})}#h(){const{video:t,canPlay:e}=this.$state,{duration:s}=this.#t.$state,{pointerRate:a}=this.#e,n=t();e()&&n&&Number.isFinite(s())&&Number.isFinite(a())&&(n.currentTime=a()*s())}}const Ld=fa.prototype;C(Ld,"video");const Dd=Je('<video muted playsinline preload="none" style="max-width: unset;"></video>');class qd extends T(HTMLElement,fa){static tagName="media-slider-video";#t;#e=this.#s();onSetup(){this.#t=g(),this.$state.video.set(this.#e)}onConnect(){const{canLoad:t}=this.#t.$state,{src:e,crossOrigin:s}=this.$state;this.#e.parentNode!==this&&this.prepend(this.#e),d(()=>{y(this.#e,"crossorigin",s()),y(this.#e,"preload",t()?"auto":"none"),y(this.#e,"src",e())})}#s(){return Ze(Dd)}}class _d extends k{static props={...at.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2};static state=_t;#t;onSetup(){this.#t=g(),new at({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:this.#n,isDisabled:this.#r.bind(this),aria:{valueNow:this.#e.bind(this),valueText:this.#s.bind(this)},onDragValueChange:this.#c.bind(this),onValueChange:this.#u.bind(this)}).attach(this),d(this.#i.bind(this)),d(this.#a.bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),D(t,"aria-label","Speed");const{canSetPlaybackRate:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":W(()=>!e())})}#e(){const{value:t}=this.$state;return t()}#s(){const{value:t}=this.$state;return t()+"x"}#i(){const{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}#a(){const{playbackRate:t}=this.#t.$state,e=t();this.$state.value.set(e),this.dispatch("value-change",{detail:e})}#n(t){return K(t,2)}#r(){const{disabled:t}=this.$props,{canSetPlaybackRate:e}=this.#t.$state;return t()||!e()}#o=Ct(this.#l.bind(this),25);#l(t){if(!t.trigger)return;const e=t.detail;this.#t.remote.changePlaybackRate(e,t)}#u(t){this.#o(t)}#c(t){this.#o(t)}}class Id extends T(HTMLElement,_d){static tagName="media-speed-slider"}class Vd extends T(HTMLElement,ca){static tagName="media-time-slider"}class Od extends k{static props={...at.props,keyStep:5,shiftKeyMultiplier:2};static state=_t;#t;onSetup(){this.#t=g();const{audioGain:t}=this.#t.$state;J(Gt,{default:"percent",value(e){return(e*(t()??1)).toFixed(2)},percent(e){return Math.round(e*(t()??1))}}),new at({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.#a.bind(this),aria:{valueMax:this.#i.bind(this),valueNow:this.#e.bind(this),valueText:this.#s.bind(this)},onDragValueChange:this.#u.bind(this),onValueChange:this.#l.bind(this)}).attach(this),d(this.#n.bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),D(t,"aria-label","Volume");const{canSetVolume:e}=this.#t.$state;this.setAttributes({"data-supported":e,"aria-hidden":W(()=>!e())})}#e(){const{value:t}=this.$state,{audioGain:e}=this.#t.$state;return Math.round(t()*(e()??1))}#s(){const{value:t,max:e}=this.$state,{audioGain:s}=this.#t.$state;return K(t()/e()*(s()??1)*100,2)+"%"}#i(){const{audioGain:t}=this.#t.$state;return this.$state.max()*(t()??1)}#a(){const{disabled:t}=this.$props,{canSetVolume:e}=this.#t.$state;return t()||!e()}#n(){const{muted:t,volume:e}=this.#t.$state,s=t()?0:e()*100;this.$state.value.set(s),this.dispatch("value-change",{detail:s})}#r=Ct(this.#o.bind(this),25);#o(t){if(!t.trigger)return;const e=K(t.detail/100,3);this.#t.remote.changeVolume(e,t)}#l(t){this.#r(t)}#u(t){this.#r(t)}}class Rd extends T(HTMLElement,Od){static tagName="media-volume-slider"}class Nd extends k{static props={size:96,trackWidth:8,fillPercent:50};onConnect(t){mt(()=>{if(!this.connectScope)return;const e=t.querySelector("svg"),s=e.firstElementChild,a=s.nextElementSibling;d(this.#t.bind(this,e,s,a))})}#t(t,e,s){const{size:a,trackWidth:n,fillPercent:r}=this.$props;y(t,"width",a()),y(t,"height",a()),y(e,"stroke-width",n()),y(s,"stroke-width",n()),y(s,"stroke-dashoffset",100-r())}}class Fd extends T($e,Nd){static tagName="media-spinner";render(){return h`
      <svg fill="none" viewBox="0 0 120 120" aria-hidden="true" data-part="root">
        <circle cx="60" cy="60" r="54" stroke="currentColor" data-part="track"></circle>
        <circle
          cx="60"
          cy="60"
          r="54"
          stroke="currentColor"
          pathLength="100"
          stroke-dasharray="100"
          data-part="track-fill"
        ></circle>
      </svg>
    `}}class Bd extends k{static props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1};static state=new yt({timeText:"",hidden:!1});#t;#e=b(null);#s=b(!0);#i=b(!0);onSetup(){this.#t=g(),this.#o();const{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":this.#c.bind(this)}),new ua({callback:this.#a.bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||d(this.#l.bind(this)),d(this.#o.bind(this))}onConnect(t){A(oi(t,this.#s.set)),d(this.#n.bind(this)),d(this.#r.bind(this))}#a(t){this.#i.set(t[0].isIntersecting)}#n(){const{hidden:t}=this.$props;this.$state.hidden.set(t()||!this.#s()||!this.#i())}#r(){if(!this.$props.toggle()){this.#e.set(null);return}this.el&&$t(this.el,this.#h.bind(this))}#o(){const{hidden:t,timeText:e}=this.$state,{duration:s}=this.#t.$state;if(t())return;const{type:a,padHours:n,padMinutes:r,showHours:o}=this.$props,l=this.#u(a()),u=s(),c=this.#c();if(!Number.isFinite(l+u)){e.set("LIVE");return}const m=c?Math.max(0,u-l):l,v=Le(m,{padHrs:n(),padMins:r(),showHrs:o()});e.set((c?"-":"")+v)}#l(){if(!this.el)return;const{toggle:t}=this.$props;y(this.el,"role",t()?"timer":null),y(this.el,"tabindex",t()?0:null)}#u(t){const{bufferedEnd:e,duration:s,currentTime:a}=this.#t.$state;switch(t){case"buffered":return e();case"duration":return s();default:return a()}}#c(){return this.$props.remainder()&&this.#e()!==!1}#h(t){if(t.preventDefault(),this.#e()===null){this.#e.set(!this.$props.remainder());return}this.#e.set(e=>!e)}}class Hd extends T(HTMLElement,Bd){static tagName="media-time";onConnect(){d(()=>{this.textContent=this.$state.timeText()})}}class Gd extends k{}class Kd extends T(HTMLElement,Gd){static tagName="media-title";#t;onSetup(){this.#t=g()}onConnect(){d(this.#e.bind(this))}#e(){const{title:t}=this.#t.$state;this.textContent=t()}}const It=dt();class Qd extends k{static props={placement:"top center",offset:0,alignOffset:0};constructor(){super(),new lt;const{placement:t}=this.$props;this.setAttributes({"data-placement":t})}onAttach(t){this.#t(t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){this.#t(t);const e=O(It);A(()=>e.detachContent(t)),A(mt(()=>{this.connectScope&&d(this.#e.bind(this))}))}#t(t){O(It).attachContent(t)}#e(){const{showing:t}=O(It);if(!t())return;const{placement:e,offset:s,alignOffset:a}=this.$props;return di(this.el,this.#s(),e(),{offsetVarName:"media-tooltip",xOffset:a(),yOffset:s()})}#s(){return O(It).trigger()}}class Wd extends T(HTMLElement,Qd){static tagName="media-tooltip-content"}let Ud=0;class zd extends k{static props={showDelay:700};#t=`media-tooltip-${++Ud}`;#e=b(null);#s=b(null);#i=b(!1);constructor(){super(),new lt;const{showDelay:t}=this.$props;new ia({trigger:this.#e,content:this.#s,showDelay:t,listen(e,s,a){d(()=>{be()&&H(e,"focus",s),H(e,"blur",a)}),new _(e).add("touchstart",n=>n.preventDefault(),{passive:!1}).add("mouseenter",s).add("mouseleave",a)},onChange:this.#l.bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onSetup(){J(It,{trigger:this.#e,content:this.#s,showing:this.#i,attachTrigger:this.#a.bind(this),detachTrigger:this.#n.bind(this),attachContent:this.#r.bind(this),detachContent:this.#o.bind(this)})}#a(t){this.#e.set(t);let e=t.getAttribute("data-media-tooltip");e&&this.el?.setAttribute(`data-media-${e}-tooltip`,""),y(t,"data-describedby",this.#t)}#n(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),this.#e.set(null)}#r(t){t.setAttribute("id",this.#t),t.style.display="none",D(t,"role","tooltip"),this.#s.set(t)}#o(t){t.removeAttribute("id"),t.removeAttribute("role"),this.#s.set(null)}#l(t){const e=this.#e(),s=this.#s();e&&y(e,"aria-describedby",t?this.#t:null);for(const a of[this.el,e,s])a&&y(a,"data-visible",t);this.#i.set(t)}}class jd extends T(HTMLElement,zd){static tagName="media-tooltip"}class Yd extends k{constructor(){super(),new lt}onConnect(t){A(mt(()=>{if(!this.connectScope)return;this.#t();const e=O(It);A(()=>{const s=this.#e();s&&e.detachTrigger(s)})}))}#t(){const t=this.#e(),e=O(It);t&&e.attachTrigger(t)}#e(){const t=this.el.firstElementChild;return t?.localName==="button"||t?.getAttribute("role")==="button"?t:this.el}}class Xd extends T(HTMLElement,Yd){static tagName="media-tooltip-trigger";onConnect(){this.style.display="contents"}}$(ql),$(Cl),$(Al),$(cd),$(tl),$(jd),$(Xd),$(Wd),$(bl),$(pl),$(nl),$(ol),$(fl),$(vl),$(il),$(dl),$(wl),$($d),$(gd),$(Rd),$(Vd),$(Id),$(yd),$(vd),$(xd),$(kd),$(Md),$(Ed),$(qd),$(Xl),$(Hl),$(id),$(sd),$(Zl),$(Vl),$(Ol),$(dd),$(Il),$(ad),$(Fl),$(od),$(rd),$(Ll),$(pa),$(kl),$(cl),$(Hd),$(Kd),$(xl),$(Fd);export{Je as a,Ze as c};
